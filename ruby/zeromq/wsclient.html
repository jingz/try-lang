<!DOCTYPE HTML>
<html>
     <head>
         <meta http-equiv="content-type" content="text/html; charset=utf-8">
         <title>Wsclient</title>
         <style>
            div {
                overflow-x: auto;
            }
         </style>
         <script type="text/javascript" charset="utf-8">

            var socket = new WebSocket("ws://localhost:8000/");  

            socket.onopen = function(){
                document.body.innerHTML += "Socket opened ok!";
                document.body.innerHTML += "<hr/>";
                // loopSend();
            }

            var cut = 0
            socket.onmessage = function(msg){
                cut++;
                var div = document.getElementById('result');
                if(msg.data == '99'){
                    div.innerHTML += "<font color=red>" + msg.data + "</font>";
                } else if(msg.data == '77'){
                    div.innerHTML += "<font color=cyan>" + msg.data + "</font>";
                } else if(msg.data == '88'){
                    div.innerHTML += "<font color=blue>" + msg.data + "</font>";
                } else{
                    div.innerHTML += msg.data;
                }

                div.innerHTML += ",";
                if(cut == 60){
                    cut = 0;
                    div.innerHTML += "<br/>";
                }
                socket.send("ok");
            }

            var loopSend = function(){
                socket.send("Sending from client!!");
                setTimeout(function(){
                    loopSend();
                }, 50);
            }

         </script>
     </head>
     <body>
         <h1 id="heading">WSCLIENT</h1>
         <div id='result'>
             
         </div>
     </body>
</html>
