(function(e){var t='<a href="https://support.odesk.com/entries/23089068-How-do-I-add-a-title-to-my-profile-">Learn more</a>';e.validator.addMethod("contractorTitle",function(i,o){if(i=e.trim(i),this.optional(o))return!0;var s=this.settings.messages[o.name]=this.settings.messages[o.name]||{};return 4>i.length?(s.contractorTitle="A descriptive title must have at least 4 letters.",!1):i.replace(/[A-Z]/g,"").length<i.length/2?(s.contractorTitle="Too many capital letters. "+t,!1):/^[\w_\-+~,\/\\:'"().&*|\[\]?# ]+$/i.test(i)?/\b(dr|mr|mister|mrs|ms|miss|sir|hello|hi)\b/i.test(i)?(s.contractorTitle="Your title should describe the work you do. "+t,!1):!0:(s.contractorTitle="Please, no decorative characters or exclamation points. "+t,!1)},"")})(jQuery),function(e){var t='<a href="https://support.odesk.com/entries/23098347-What-should-I-put-in-my-overview-">Learn more</a>';e.validator.addMethod("contractorOverview",function(i,o){if(i=e.trim(i),this.optional(o))return!0;var s=this.settings.messages[o.name]=this.settings.messages[o.name]||{};return 100>i.length?(s.contractorOverview="Too short. An eï¬€ective overview needs to be at least 100 characters. "+t,!1):i.replace(/[A-Z]/g,"").length<.7*i.length?(s.contractorOverview="Too many capital letters. "+t,!1):!0},"")}(jQuery),function(e){odesk.pageController=e.extend(odesk.abstractPageController,{init:function(){this._initJump();var e=odesk.url.parse().queryParams;this.projectId=e.projectId,this.reportProject=e.reportProject,this.registerWidgets(),this.subscribeToEvents(),this._addEvents(),this._loadSimilarContractors(),odesk.pageConfig.showRecommendedFreelancers&&this.widgets.recommendedFreelancers.openDialog(),this.initReportProject(),this.queryString=window.location.search,this.urlRoot=window.location.pathname.split("/").splice(0,3).join("/"),window.onpopstate=this._onUrlChange.bind(this),this._onUrlChange(),odesk.pageConfig.ownProfile&&window.location.hash&&this.openPciActionDialog(window.location.hash),(odesk.pageConfig.startEditing||"#edit"===window.location.hash)&&this._startEditing(),odesk.pageConfig.showFP2380FeatureFeedback&&this.widgets.FP2380FeatureTooltip&&this.widgets.FP2380FeatureTooltip.showTooltip(odesk.pageConfig.contractorId)},options:{teamSelectorWidgetContainer:"#jsTeamSelector",teamSelector:"#jsTeamSelector select",teamDialog:"#jsSelectTeamForOfferDialog",offerLink:"#jsMakeOfferLink",offerCancel:"#jsMakeOfferCancel",offerProceed:"#jsMakeOfferProceed",emailVerified:odesk.pageConfig.emailVerified,shareContainer:".jsShareContainer"},reinit:function(){var t={workHistory:new odesk.ProfilesProfileJobHistoryAndFeedback("workHistory","#workHistoryList"),relationshipContext:new odesk.ProfilesRelationshipContext("#relationshipContext"),similarContractors:new odesk.SimilarContractors("#similarContractors"),profileVideo:new odesk.ProfileVideo("profileVideo",".oVideo")};odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]&&e.extend(t,{contractorCertifications:new odesk.ContractorSkillCertifications("profileVideo","#jsCertifications"),contractorExperiences:new odesk.ContractorOtherExperiences("contractorExperiences","#jsMyOtherExperiences"),contractorEmployments:new odesk.ContractorEmployments("contractorEmployments","#jsEmployments"),contractorEducations:new odesk.ContractorEducations("contractorEducations","#jsEducations")}),odesk.featureFlags.FP65PortfolioProjects?t.projectsList=new odesk.ProfileProjectList("#profilePortfolioSection"):t.portfolio=new odesk.ProfilesProfilePortfolio("portfolio","#portfolioList"),this._loadSimilarContractors(),this.registerWidget(t)},initReportProject:function(){var t=this;if(this.projectId){var i=this.widgets.projectPreviewDialog;i.loadProject(this.projectId).done(function(o){var s=e("<div>"),n=i.renderProject(o);s.data("preview-data",o),s.data("preview-content",n),i.setContent(n).setRelatedElement(s).setRelatedData(s.data("preview-data")).open(),t.reportProject!==void 0&&i.showReportFlyout()}).fail(function(t){"Can not find project"===t?(odesk.loading.hide(),new odesk.ModalDialog(e('<div class="txtCenter"><div class="p">This project has been removed and is no longer viewable.</div><button class="oBtn oBtnPrimary jsClosePopup">OK</button></div>'),{width:400,title:"Error",autoOpen:!0})):odesk.loading.flash("Sorry, we weren't able to display this project",5e3)})}},registerWidgets:function(){e('<div class="oLoading"></div>').appendTo("body").hide(),odesk.FP2345LinkedPromoLogging!==void 0&&new odesk.FP2345LinkedPromoLogging("contractor_profile_page");var t={workHistory:new odesk.ProfilesProfileJobHistoryAndFeedback("workHistory","#workHistoryList",{location:"contractor_profile_page"}),relationshipContext:new odesk.ProfilesRelationshipContext("#relationshipContext"),flagging:new odesk.Flagging("#flaggingWidget"),similarContractors:new odesk.SimilarContractors("#similarContractors"),contactContractor:new odesk.ContactContractor("contactContractor","#main",{location:"contractor_profile_page"}),profileVideo:new odesk.ProfileVideo("profileVideo",".oVideo"),contractorProfileLogging:new odesk.ContractorProfileLogging,videoEnglishRate:new odesk.VideoEnglishRate(e('<div class="txtLeft">').appendTo(".oVideo"),{freelancerKey:odesk.pageConfig.contractorKey,englishProficiencyLevels:odesk.pageConfig.englishProficiencyLevels}),recommendedFreelancers:new odesk.RecommendedFreelancers("recommendedFreelancers")};odesk.featureFlags.FP65PortfolioProjects?(t.projectsList=new odesk.ProfileProjectList("#profilePortfolioSection"),this.projectId&&(t.projectPreviewDialog=new odesk.ProjectPreviewDialog(null,{contractorKey:odesk.pageConfig.contractorKey,hideArrows:!0}))):t.portfolio=new odesk.ProfilesProfilePortfolio("portfolio","#portfolioList"),e(this.options.shareContainer).length&&(t.shareToSocial=new odesk.ShareToSocial(this.options.shareContainer)),odesk.pageConfig.ownProfile&&(t.portraitUploader=new odesk.PortraitUploader(".oMain .oImageUploader",{documentDropping:!0,flyout:{placement:"right"}}),odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]&&(t.contractorTitle=new odesk.ContractorTitle("contractorTitle",".oMain .jsContractorTitle",{userKey:odesk.pageConfig.contractorKey}),odesk.pageConfig.contractorRateData&&odesk.pageConfig.contractorRateData.editable&&(t.contractorRate=new odesk.ContractorRate("contractorRate",".oMain .jsContractorRate",{userKey:odesk.pageConfig.contractorKey})),t.contractorOverview=new odesk.ContractorOverview("contractorOverview",".oMain .oContractorOverview",{userKey:odesk.pageConfig.contractorKey}),t.contractorVideo=new odesk.ContractorVideo("contractorVideo",".oMain #jsMyVideo",{userKey:odesk.pageConfig.contractorKey}),t.contractorAvailability=new odesk.ContractorAvailability("contractorAvailability",".oSide",{userKey:odesk.pageConfig.contractorKey,source:"profile_ui"}),t.contractorLanguages=new odesk.ContractorLanguages("contractorLanguages","#jsLanguages",{userKey:odesk.pageConfig.contractorKey}),t.contractorSkills=new odesk.ContractorSkills("contractorSkills","#jsMySkills",{userKey:odesk.pageConfig.contractorKey}),t.contractorExams=new odesk.ContractorExams("#jsContractorExams"))),odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]&&(t.contractorProjects=new odesk.ContractorProjects("#jsMyProjects",{userKey:odesk.pageConfig.contractorKey}),t.contractorExperiences=new odesk.ContractorOtherExperiences("contractorExperiences","#jsMyOtherExperiences",{userKey:odesk.pageConfig.contractorKey}),t.contractorEmployments=new odesk.ContractorEmployments("contractorEmployments","#jsEmployments",{userKey:odesk.pageConfig.contractorKey}),t.contractorEducations=new odesk.ContractorEducations("contractorEducations","#jsEducations",{userKey:odesk.pageConfig.contractorKey}),t.contractorCertifications=new odesk.ContractorSkillCertifications("contractorCertifications","#jsCertifications",{userKey:odesk.pageConfig.contractorKey})),(odesk.qt["FP2380_ExposeNss100ToClient-Treatment_1"]||odesk.qt["FP2380_ExposeNss100ToClient-Treatment_2"])&&(t.FP2380FeatureTooltip=new odesk.FP2380FeatureTooltip("FP2380FeatureTooltip",".oFP2380FeatureTooltipContainer",{page:"contractor_profile_page",location:"work_history",scoreType:odesk.qt["FP2380_ExposeNss100ToClient-Treatment_1"]?"recommended":"nss"})),this.registerWidget(t),odesk.qt["FP120_ProfileHireButton-Treatment"]&&this._registerTeamSelectorWidget(),odesk.pageConfig.isSuspended&&this.registerWidget("profileSuspended",new odesk.ProfileSuspended(".jsResubmitProfile"))},_registerTeamSelectorWidget:function(){var t=this,i=odesk.persistentStorage.get("company_last_accessed",odesk.storageManager.cnst().SERVER_DATA),o=e(t.options.teamSelectorWidgetContainer);this.registerWidget({teamSelector:new odesk.CustomSelector("teamSelectorWidget",o,{includeAllOption:!1,noItemsText:""})}),this.widgets.teamSelector.$select.addClass("oFormMed"),o.find("select").size()&&odesk.AuthServices.getAuthUserAndRoles(function(e){var t,o={};if(o.teams=[{id:"",name:"-- Choose Team --"}],o.company=e.getCompanyByReference(i),o.company){o.company.filterTeams(e,odesk.AuthUser.Flavors.recruiter),t=e.getVisibleTeams(o.company);for(var s=0;t.length>s;s++){var n=t[s];o.teams.push({id:n.reference,name:n.name})}}this.widgets.teamSelector.populate(o.teams)}.bind(this));var s=e(t.options.teamDialog);s.dialog({title:"Which team do you want to hire in?",autoOpen:!1,modal:!0,resizable:!1,width:"auto",open:function(){e(".oVideo").addClass("isInactive")},close:function(){e(".oVideo").removeClass("isInactive")}}),e(t.options.offerLink).click(function(e){t.options.emailVerified?(e.preventDefault(),2===s.find(t.options.teamSelector+" option").length?(window.location.replace(odesk.env.CONSOLE_ROOT+"e/"+i+"/offers/new?contractor="+odesk.pageConfig.contractorId+"&team="+s.find(t.options.teamSelector+" option").last().val()),odesk.loading.show("Sending...",!0)):s.dialog("open")):t._pleaseVerify(e)}),s.find(t.options.offerCancel).click(function(e){e.preventDefault(),s.dialog("close")}),s.find(t.options.offerProceed).click(function(e){s.find(t.options.teamSelector).val()&&(window.location.replace(odesk.env.CONSOLE_ROOT+"e/"+i+"/offers/new?team="+s.find(t.options.teamSelector).val()+"&contractor="+odesk.pageConfig.contractorId),odesk.loading.show("Sending...",!0)),e.preventDefault()})},subscribeToEvents:function(){this.subscribe(this.widgets.moreList.events.elements,this._onMoreListLoadElements),this.subscribe(this.widgets.workHistory.events.jobInProgressToggle,e.proxy(function(){this.widgets.contractorProfileLogging.logWorkHistoryImpression()},this)),this.subscribe(this.widgets.profileVideo.events.ready,e.proxy(function(e,t){this.widgets.contractorProfileLogging.logVideoReady(t)},this)),this.subscribe(this.widgets.profileVideo.events.play,e.proxy(function(e,t){this.widgets.contractorProfileLogging.logVideoPlay(t),odesk.featureFlags.FP305EnglishAssessmentVideoProfile&&odesk.pageConfig.englishProficiencyLevels&&this.widgets.videoEnglishRate.render()},this)),this.subscribe(this.widgets.projectsList.events.projectOpen,this._onProjectOpen.bind(this)),this.subscribe(this.widgets.projectsList.events.projectClose,this._onProjectClose.bind(this)),odesk.pageConfig.ownProfile&&odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]&&(this.subscribe(this.widgets.contractorSkills.events.add,this._onAddItem.bind(this)),this.subscribe(this.widgets.contractorEmployments.events.add,this._onAddItem.bind(this)),this.subscribe(this.widgets.contractorEducations.events.add,this._onAddItem.bind(this)),this.subscribe(this.widgets.contractorCertifications.events.add,this._onAddItem.bind(this)),this.subscribe(this.widgets.contractorExperiences.events.add,this._onAddItem.bind(this)))},_addEvents:function(){e("body").on("click","#permalink",function(){e(this).focus().select()}),e("body").on("click","#recentApplicationsBtn",this._recentApplicationToggle.bind(this)),e("body").on("click","#jump a",function(t){t.preventDefault(),this._jump(e(t.target).attr("href").replace("#",""))}.bind(this)),odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]&&(e("body").on("click",".jsStartEditing",function(e){e.preventDefault(),this._startEditing()}.bind(this)),e("body").on("click",".jsDoneEditing",function(e){e.preventDefault(),this._doneEditing()}.bind(this))),e(".jsResubmitProfile").bind("click",function(t){t.preventDefault(),e("#sendForReviewForm").submit(),e(this).prop("disabled",!0)})},_recentApplicationToggle:function(){var t=e("#recentApplicationsContent");t.html()||(t.html('<div class="oLoadingSmall">loading</div>'),odesk.ajax({type:"GET",url:"/profiles/recent-applications/id/"+odesk.pageConfig.contractorId,success:e.proxy(function(e){t.html(odesk.string.procXssEntity(e))},this),error:e.proxy(function(e,i,o){t.html('<article class="oMsg oMsgError">Invalid server response: '+o+"</article>")},this)})),t.toggleClass("isHidden"),e("#recentApplicationsBtn").toggleClass("isCollapsed")},_initJump:function(){var e=document.location.hash.replace("#","");e=odesk.string.pxss(e),this._jump(e)},_jump:function(t){if(t){var i=e("#"+t+"Jump");if(i.length){var o=-20;e.scrollTo(i,400,{offset:o,onAfter:function(){e(window).triggerHandler("scroll")}}),window.location.hash=t}}},_onMoreListLoadElements:function(t,i){i.more.data("portfolio")&&e(i.current).find("img").each(function(){var t=e(this),i=t.data("url");i&&i!==t.prop("src")&&t.prop("src",i)}),i.more.data("job-history")&&this.widgets.contractorProfileLogging.logWorkHistoryImpression()},_loadSimilarContractors:function(){if((odesk.qt["F2416_MoreLikeThis-TreatmentOld"]||odesk.qt["F2416_MoreLikeThis-TreatmentNew"])&&!(odesk.qt["FP1117_ProfileV2Client-Treatment"]||odesk.qt["FP1117_ProfileV2Freelancer-Treatment"]||odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"])){var t=e("#similarContractors");0===t.find(".jsSimilarContractor").length&&odesk.ajax({type:"GET",url:"/profiles/similar-contractors/id/"+odesk.pageConfig.contractorId,success:e.proxy(function(e){""!==e&&(t.append(e),t.find(".jsEpitome").each(function(){new odesk.Epitome(this)}),t.removeClass("isHidden"))},this),error:e.proxy(function(e,i,o){t.html('<article class="oMsg oMsgError">Invalid server response: '+o+"</article>")},this)})}},_pleaseVerify:function(e){e.preventDefault(),window.location.href="/signup/please-verify/?ba=hire&redirect_url="+encodeURIComponent(window.location.href)},_onUrlChange:function(){var e=window.location.pathname.split("projects/")[1];e&&this.widgets.projectsList.openProject(e)},openPciActionDialog:function(e){switch(e){case"#overview":this._startEditing(),this.widgets.contractorOverview.openEditDialog();break;case"#skills":this._startEditing(),this.widgets.contractorSkills.openAddDialog();break;case"#employment":this._startEditing(),this.widgets.contractorEmployments.openAddDialog();break;case"#education":this._startEditing(),this.widgets.contractorEducations.openAddDialog();break;case"#certification":this._startEditing(),this.widgets.contractorCertifications.openAddDialog();break;case"#other":this._startEditing(),this.widgets.contractorExperiences.openAddDialog()}},_onAddItem:function(t,i){var o=!1;switch(i){case"skills":o=this.widgets.contractorSkills.$element;break;case"employments":o=this.widgets.contractorEmployments.$element;break;case"educations":o=this.widgets.contractorEducations.$element;break;case"certificates":o=this.widgets.contractorCertifications.$element;break;case"otherexp":o=this.widgets.contractorExperiences.$element}if(o&&o.length){var s=e(window),n=s.scrollTop(),a=s.height(),r=o.offset();(n>r.top||r.top>n+a)&&e.scrollTo(o,400)}},_startEditing:function(){odesk.pageConfig.ownProfile&&!this.isEditing&&(window.location.hash="#edit",this.isEditing=!0,e(".jsStartEditing").addClass("oHidden"),e(".jsDoneEditing").removeClass("oHidden"),this.widgets.contractorExperiences.startEditing(),this.widgets.contractorTitle.startEditing(),this.widgets.contractorRate&&this.widgets.contractorRate.startEditing(),this.widgets.contractorAvailability.startEditing(),this.widgets.contractorLanguages.startEditing(),this.widgets.contractorOverview.startEditing(),this.widgets.contractorVideo.startEditing(),this.widgets.contractorSkills.startEditing(),this.widgets.contractorEducations.startEditing(),this.widgets.contractorEmployments.startEditing(),this.widgets.contractorProjects.startEditing(),this.widgets.projectsList.startEditing(),this.widgets.contractorExams.startEditing(),this.widgets.contractorCertifications.startEditing(),e(".jsHideWhenEditing").hide(),e(".jsShowWhenEditing").show())},_doneEditing:function(){window.location.hash="",odesk.pageConfig.toReloadAfterEditing&&(odesk.loading.show(null,!0),window.location.href="/users/"+odesk.pageConfig.contractorKey),this.isEditing=!1,e(".jsStartEditing").removeClass("oHidden"),e(".jsDoneEditing").addClass("oHidden"),this.widgets.contractorExperiences.doneEditing(),this.widgets.contractorTitle.doneEditing(),this.widgets.contractorRate&&this.widgets.contractorRate.doneEditing(),this.widgets.contractorAvailability.doneEditing(),this.widgets.contractorLanguages.doneEditing(),this.widgets.contractorOverview.doneEditing(),this.widgets.contractorVideo.doneEditing(),this.widgets.contractorSkills.doneEditing(),this.widgets.contractorEducations.doneEditing(),this.widgets.contractorEmployments.doneEditing(),this.widgets.contractorProjects.doneEditing(),this.widgets.projectsList.doneEditing(),this.widgets.contractorExams.doneEditing(),this.widgets.contractorCertifications.doneEditing(),e(".jsHideWhenEditing").show(),e(".jsShowWhenEditing").hide()},_onProjectOpen:function(e,t){window.history.replaceState({},document.title,this.urlRoot+"/projects/"+t+this.queryString)},_onProjectClose:function(){window.history.replaceState({},document.title,this.urlRoot+this.queryString)}}),odesk.showForUserPageController=e.extend({},odesk.pageController)}(jQuery),function(e){"use strict";new odesk.Class("odesk.MoreText","odesk.AbstractWidget",{init:function(t){this.$element=e(t),e.extend(this.events,odesk.events.makeMap(this.name,["less"])),this._addEvents()},_addEvents:function(){this.$element.delegate(".jsTruncated .oMore","click",e.proxy(this.more,this)).delegate(".jsFull .oMore","click",e.proxy(this.less,this))},more:function(t){var i=e(t.target),o=i.closest(".jsTruncated").addClass("isHidden");o.next().removeClass("isHidden")},less:function(t){var i=e(t.target),o=i.closest(".jsFull").addClass("isHidden"),s=o.prev().removeClass("isHidden");this.ctx.mediator.publish(this.events.less,s)}}),odesk.preLoadedWidgets.moreText=new odesk.MoreText(document.body)}(jQuery),function(e){new odesk.Class("odesk.MoreList","odesk.AbstractWidget",{options:{moreCount:9},init:function(t,i){this.$element=e(t),e.extend(this.options,i),e.extend(this.events,odesk.events.makeMap(this.name,["elements"])),this._addEvents()},_addEvents:function(){this.$element.on("click",".oMoreRow .oMore",this.more.bind(this))},more:function(t){var i=e(t.currentTarget),o=i.parent(),s=i.data("scroll");void 0!==s&&e("html, body").animate({scrollTop:o.offset().top-s},"slow");var n,a=i.data("count")||this.options.moreCount,r=[];for(n=o.parent().is("td")?o.parent().parent().prev():o.parent().is("li")?o.parent().prev():o.prev();n.hasClass("isHidden");)r.unshift(n[0]),n=n.prev();var l=e(r),d=l.filter(".isHidden:lt("+a+")");d.removeClass("isHidden");var c=l.filter(".isHidden");c.length?i.find(".jsCount").html(c.length):o.detach(),this.ctx.mediator.publish(this.events.elements,{more:i,current:d})}}),odesk.preLoadedWidgets.moreList=new odesk.MoreList(document.body)}(jQuery),odesk.templates.hoverOver='<div>{{if skillCertificates}}<div class="oTag oTagCertified">CERTIFIED</div>{{each skillCertificates}}<div class="oMed oTxtSmall p">{{if $value.logoUrl}}<img src="${$value.logoUrl}" class="oImgCertificate oImg" alt="none" height="50">{{/if}}<div class="oBd">{{if $value.externalLink}}<a href="${$value.externalLink}" target="_blank"><strong>${$value.name}</strong></a>{{else}}<strong>${$value.name}</strong>{{/if}}<div>{{html odesk.string.cutStr($value.description, 200)}}</div></div></div>{{/each}}{{/if}}<div id="testsPlaceholder"/><article class="oTxtSmall">${skillText} {{if skillUrl}}<a href="${skillUrl}" target="_blank">${skillShortUrl}</a>{{/if}}</article></div>',function(e){new odesk.Class("odesk.HoverOver","odesk.AbstractWidget",{options:{className:"oHoverPopup",bannedCharacters:[" "]},init:function(t){e.template("hoverOver",odesk.templates.hoverOver),e(document.body).on("mouseenter",t,this._initFlyout.bind(this))},_initFlyout:function(t){var i=this,o=e(t.currentTarget);if(!o.data("flyout")){for(var s=o.data("skill")?o.data("skill"):o.text(),n=i.options.bannedCharacters.length,a=0;n>a;a++)if(-1!==s.indexOf(i.options.bannedCharacters[a]))return;o.flyout(e.extend(this.options,{loading:!0})).mouseenter().bind("show",function(){if(!o.data("loading")){o.data("loading",!0);var t={skill:null,skillUrl:"",skillShortUrl:"",skillText:"",exams:null};if(t.skill=s,odesk.pageConfig.skillDetails)if(odesk.pageConfig.skillDetails[s]){var n=odesk.pageConfig.skillDetails[s];t.skillUrl=i._isUrl(n[2])?n[2]:!1,t.skillShortUrl=i._isUrl(n[2])?i._getDomainFromUrl(n[2]):!1,t.skillText=n[1];var a=e.tmpl("hoverOver",t);o.flyout("setContent",a)}else o.flyout("hide").flyout("disable");else{var r=o.data("contractor"),l=o.data("certificate");odesk.ajax({url:odesk.env.CONSOLE_ROOT+"skills-api/json-request",type:"get",data:{skill:s.toLowerCase(),contractor:r,certificate:l},complete:function(s,n){if("success"===n||"notmodified"===n){var a=JSON.parse(s.responseText),r="skill"in a?a.skill:"",l="exams"in a?a.exams:"",d="certificates"in a?a.certificates:"";if(a.error||!r||!r.description&&!r.external_link)return o.flyout("hide").flyout("disable"),void 0;if(t.skillUrl=i._isUrl(r.external_link)?r.external_link:!1,t.skillShortUrl=i._isUrl(r.external_link)?i._getDomainFromUrl(r.external_link):!1,t.skillText=r.description,d){var c=[];e.each(d,function(e,t){var i=t.description.match(/^(.*) \[([^\[]*)\]$/);i&&(t.description=i[1],t.externalLink=i[2]),c.push(t)}),t.skillCertificates=c}var p=e.tmpl("hoverOver",t);if(l&&1===l.has_tests){delete l.has_tests;var u=[];if(l=e.each(l,function(e,t){u.push(t)}),u.length){var h=new odesk.TestScore,f='<div class="oTag oTagTested">TESTED</div>'+e("<div></div>").append(h.getHtml(u).clone()).html();e(p).find("#testsPlaceholder").replaceWith(f)}}o.flyout("setContent",p)}}})}}}.bind(this))}},_isUrl:function(e){return e&&this._getDomainFromUrl(e)},_getDomainFromUrl:function(e){var t=RegExp("\\://([^/]+)","i");if(!t.test(e))return!1;var i=""+e.match(t)[1],o=i.indexOf(".");if(o>0){var s=i.lastIndexOf(".");if(s>o){var n=i.length-1-s,a=i.lastIndexOf(".",s-1),r=3===n?a:i.lastIndexOf(".",a-1);return i.substr(r+1)}}}}),new odesk.HoverOver(".oSkill")}(jQuery),function(e){new odesk.Class("odesk.EventLogging","odesk.AbstractWidget",{options:{pageNumSubLoc:["search_navigation_bottom_page_number","search_navigation_top_page_number"],qtAlocation:"Treatment1",logQueryString:!0,executeLogging:!0},clickSubLocations:{},impressionSublocations:{},hideSubLocations:{},expandSubLocations:{},loggingMethod:null,logEventTriggeredSublocations:function(e,t,i,o){for(var s in i)i[s].event!==void 0?this._subscribeLogging(e,s,i[s],o):this._bindEventTriggeredLogging(e,t,s,i[s],o);return!0},logImpressionEvents:function(t,i){function o(t,i){var o=[];return e(i).each(function(){var i=a._generateLoggingDataObj(e(this),t);e.isEmptyObject(i)||o.push(i)}),a.options.logQueryString===!0&&o.push(a._generateSearchQueryItem(t)),o=a._extendDataList(t,o)}function s(t){var s=a.impressionSublocations[t],r=e(s.container).find(s.element);if(0===r.length||"undefined"===s.id)return!1;var l=o(s,r),d=a.options.qtAlocation;s.qtAlocation!==void 0&&""!==s.qtAlocation&&(d=s.qtAlocation);var c=s.sync!==void 0&&s.sync;return"function"==typeof i?(i(n,a.options.location,t,l,c,d),void 0):"function"==typeof this.loggingMethod?(this.loggingMethod(n,a.options.location,t,l,c,d),void 0):(c?odesk.logging.logCustomDataSync(n,a.options.location,t,l,d,s.proxy):odesk.logging.logCustomData(n,a.options.location,t,l,d,s.proxy),void 0)}var n="impression",a=this;if(a.options.executeLogging=!0,!a.options.executeLogging)return!1;if(t===void 0)for(var r in a.impressionSublocations)s(r);else s(t);return!0},_extendDataList:function(e,t){return"function"==typeof e.extendDataList&&(t=e.extendDataList(t)),t},_generateLoggingDataObj:function(t,i,o){var s={},n=i.id!==void 0&&"function"==typeof t.attr?t.attr(i.id):null,a=i.key!==void 0&&"function"==typeof t.attr?t.attr(i.key):null,r=i.type!==void 0?i.type:null,l=i.position!==void 0&&"function"==typeof t.attr?t.attr(i.position):null,d=i.indexed!==void 0&&i.indexed?!0:!1,c=void 0!==i.responsiveness?t.find(".jsContactContractor").data("responsiveness"):null;if(d&&(s.indexed=d,!n&&!a||!r))throw Error("Properties id and type are required for indexed logging");if(n&&(s.id=n),a&&(s.key=a),r&&(s.type=r),l&&(s.position=l),c&&(s.resp=c),"function"==typeof i.extendData){var p=i.extendData(t,o);"object"==typeof p&&null!==p&&(s=e.extend(!0,s,p))}return s},_generateSearchQueryItem:function(e){var t,i=e.sync===!0?"previous_params":"params",o={};if(o.type="query",o[i]="",""!==window.location.hash)o[i]=window.location.hash;else if(""!==window.location.search&&-1!==window.location.search.indexOf("&q="))t=window.location.search.match(/&?q=[^&]+/),null!==t&&t[0]!==void 0&&(o[i]=t[0]);else if(""!==window.location.pathname&&this.options.urlPath!==void 0){var s=RegExp("\\/"+this.options.urlPath+"\\/([\\w-])*(\\/)?");t=window.location.pathname.match(s),null!==t&&t[0]!==void 0&&(o[i]=t[0].replace(/\//g,"").replace(this.options.urlPath,""))}return o},_bindEventTriggeredLogging:function(e,t,i,o,s){if(o.element===void 0||o.container===void 0)throw Error("Sublocation required property (element, container) are undefined");"click"===t||"mouseup"===t?(this._bindLogging(e,"mouseup",i,o,s),this._bindLogging(e,"contextmenu",i,o,s)):this._bindLogging(e,t,i,o,s)},_subscribeLogging:function(e,t,i,o){var s="object"==typeof i.event?i.event:[i.event],n=this._processEvent.bind(this,e,i,t,o,"");for(var a in s)this.ctx.mediator.subscribe(s[a],n)},_bindLogging:function(t,i,o,s,n){var a=this;e(s.container).on(i,s.element,function(r){if(3!==r.which||"mouseup"!==i){var l=e(this);a._processEvent(t,s,o,n,l,r)}})},_processEvent:function(t,i,o,s,n,a,r){var l,d=this;s!==void 0?(l=setTimeout(function(){d.doLogging(t,i,o,n,a,r)},parseInt(s,10)),("mouseover"===a.type||"mouseenter"===a.type)&&e(i.container+" "+i.element).on("mouseout",function(){clearTimeout(l)})):d.doLogging(t,i,o,n,a,r)},doLogging:function(t,i,o,s,n,a){this.options.executeLogging=!0;var r=[],l=!1;void 0===n||2!==n.which&&3!==n.which||(l=!0);var d;d=a!==void 0?a:i.parent!==void 0?s.closest(i.parent):s;var c=this._generateLoggingDataObj(d,i,n);e.isEmptyObject(c)||r.push(c),this.options.logQueryString===!0&&r.push(this._generateSearchQueryItem(i)),-1!==e.inArray(o,this.options.pageNumSubLoc)&&r.push({type:"pagination",page_no:s.text()}),r=this._extendDataList(i,r);var p=this.options.qtAlocation;if(i.qtAlocation!==void 0&&""!==i.qtAlocation&&(p=i.qtAlocation),c.event_type&&(t=c.event_type,delete c.event_type),!this.options.executeLogging)return!1;var u=i.sync!==void 0&&i.sync&&!l;return"function"==typeof this.loggingMethod?(this.loggingMethod(t,this.options.location,o,r,!u,p),!0):(u?i.isJobEncrypted?odesk.logging.logAtsEventToProxy(t,this.options.location,o,r,!1,p):odesk.logging.logCustomDataSync(t,this.options.location,o,r,p,i.proxy):i.isJobEncrypted?odesk.logging.logAtsEventToProxy(t,this.options.location,o,r,!0,p):odesk.logging.logCustomData(t,this.options.location,o,r,p,i.proxy),!0)}}),e.extend(!0,odesk.EventLogging.prototype,odesk.mediator)}(jQuery),function(e){new odesk.Class("odesk.SimilarContractors","odesk.AbstractWidget",{init:function(t){this.$element=e(t);var i=this;this.$element.on("click","button",function(){i._onVote(e(this))}).on("click",".oSimilarContractorsName",function(){i._onClickName(e(this))})},_onVote:function(e){var t=e.closest("li"),i=t.index(),o=t.data("id");odesk.logging.log(e.data("action"),"contractor_profile_page ","similar_contractors","contractor",o,!0,i),t.find("button").detach(),t.find(".jsThanks").removeClass("isHidden")},_onClickName:function(e){var t=e.closest("li"),i=t.index(),o=t.data("id");odesk.logging.logSync("click","contractor_profile_page","similar_contractors","contractor",o,!0,i)}})}(jQuery),function(e){function t(t){return e.isFunction(t)||"object"==typeof t?t:{top:t,left:t}}var i=e.scrollTo=function(t,i,o){return e(window).scrollTo(t,i,o)};return i.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1,limit:!0},i.window=function(){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,i=!t.nodeName||-1!=e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!i)return t;var o=(t.contentWindow||t).document||t.ownerDocument||t;return/webkit/i.test(navigator.userAgent)||"BackCompat"==o.compatMode?o.body:o.documentElement})},e.fn.scrollTo=function(o,s,n){return"object"==typeof s&&(n=s,s=0),"function"==typeof n&&(n={onAfter:n}),"max"==o&&(o=9e9),n=e.extend({},i.defaults,n),s=s||n.duration,n.queue=n.queue&&n.axis.length>1,n.queue&&(s/=2),n.offset=t(n.offset),n.over=t(n.over),this._scrollable().each(function(){function a(e){d.animate(p,s,n.easing,e&&function(){e.call(this,c,n)})}if(null!=o){var r,l=this,d=e(l),c=o,p={},u=d.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(c)){c=t(c);break}if(c=e(c,this),!c.length)return;case"object":(c.is||c.style)&&(r=(c=e(c)).offset())}var h=e.isFunction(n.offset)&&n.offset(l,c)||n.offset;e.each(n.axis.split(""),function(e,t){var o="x"==t?"Left":"Top",s=o.toLowerCase(),f="scroll"+o,g=l[f],m=i.max(l,t);if(r)p[f]=r[s]+(u?0:g-d.offset()[s]),n.margin&&(p[f]-=parseInt(c.css("margin"+o))||0,p[f]-=parseInt(c.css("border"+o+"Width"))||0),p[f]+=h[s]||0,n.over[s]&&(p[f]+=c["x"==t?"width":"height"]()*n.over[s]);else{var v=c[s];p[f]=v.slice&&"%"==v.slice(-1)?parseFloat(v)/100*m:v}n.limit&&/^\d+$/.test(p[f])&&(p[f]=0>=p[f]?0:Math.min(p[f],m)),!e&&n.queue&&(g!=p[f]&&a(n.onAfterFirst),delete p[f])}),a(n.onAfter)}}).end()},i.max=function(t,i){var o="x"==i?"Width":"Height",s="scroll"+o;if(!e(t).is("html,body"))return t[s]-e(t)[o.toLowerCase()]();var n="client"+o,a=t.ownerDocument.documentElement,r=t.ownerDocument.body;return Math.max(a[s],r[s])-Math.min(a[n],r[n])},i}(jQuery),odesk.templates.favoriteProfiles='{{html contractorInfo}}<form class="oFormTop"><div class="oFormField oOptional"><label for="favoriteNotes">Your private notes</label><textarea id="favoriteNotes" name="favoriteNotes"></textarea></div><div class="oFieldValue">{{if action == "add"}}<button class="oBtn oBtnPrimary" data-action="save">Save</button> {{/if}}{{if action == "edit"}}<button class="oBtn oBtnPrimary" data-action="edit">Update Note</button> <button class="oBtn oBtnSecondary" data-action="remove">Remove from Saved Freelancers</button> {{/if}}<a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></div></form>',function(e){"use strict";new odesk.Class("odesk.FavoriteProfiles","odesk.AbstractWidget",{options:{notesDefaultText:"",notesMaxLength:256,itemSelector:".jsFavoriteProfiles",contractorInfo:".jsContractorInfo",submitBtn:".oBtnPrimary, .oBtnSecondary",cancelBtn:".jsCancel",template:"favoriteProfiles",addEditClasses:"oBtnFavoriteAddSmall oBtnFavoriteEditSmall",addEditP2Classes:"isActive oBtnNull",addEditClassesResponsiveness:"oBtnNull",addEditClassesProfileV2:"oBtn oBtnSecondary oBtnJumbo txtCenter",plainLinkClass:"jsFavoritePlainLink",btn:"a",dialog:{width:540,modal:!0,autoOpen:!1,resizeable:!1,title:"Save Freelancer",dialogClass:"oFavoriteProfiles"}},init:function(t,i){this.$element=e(t),e.extend(this.options,i),e.extend(this.events,odesk.events.makeMap(this.name,["save","remove"])),e.template(this.options.template,odesk.templates[this.options.template]),this._initDialog(),this._addEvents()},_initDialog:function(){this.$dialog=e("<div>").dialog(this.options.dialog)},_addEvents:function(){var e=this.options;
return this.$dialog.on("click",e.cancelBtn,this._closeDialog.bind(this)).on("click",e.submitBtn,this._execute.bind(this)),this.$element.on("click",e.itemSelector,this._openDialog.bind(this)),this},_openDialog:function(t){t.preventDefault();var i=this.$item=e(t.currentTarget);this.$button=i.children(this.options.btn);var o=i.find(this.options.contractorInfo).html(),s=i.data("action"),n=e.tmpl(this.options.template,{action:s,contractorInfo:o});this.$dialog.html(n).dialog("open");var a=this.$form=this.$dialog.find("form").submit(!1),r=this.$button.attr("title");this.$favoriteNotes=a.find("textarea").val("add"==s?this.options.notesDefaultText:r),this._initValidation()},_initValidation:function(){this.$form.oFormValidation({disabledButtons:null,rules:{favoriteNotes:{maxlength:256}},errorPlacement:function(e,t){e.appendTo(t.closest(".oFormField"))}})},_closeDialog:function(e){e&&e.preventDefault(),this.$dialog.dialog("close")},_execute:function(t){t.preventDefault();var i=e(t.target).data("action");if(!(e.inArray(i,["save","edit"])>-1)||this.$form.valid()){var o={uid:odesk.pageConfig.AUSER.uid,recno:this.$item.data("recno")};e.inArray(i,["save","edit"])>-1&&e.extend(o,{note:this.$form.find("textarea").val()}),"edit"==i&&e.extend(o,{tag_id:this.$item.data("tagid")}),odesk.ajax({type:"post",url:"/users/favorite/"+i,data:o,dataType:"json",success:function(t){e.extend(t,{action:i}),this._successHandler(t)}.bind(this)}),this._closeDialog()}},_successHandler:function(e){var t=this.$item,i=this.$button,o=i,s=this.options.addEditClasses,n=this.options.addEditP2Classes,a=odesk.qt["FP1117_ProfileV2Freelancer-Treatment"]||odesk.qt["FP1117_ProfileV2Client-Treatment"],r=odesk.qt["FP37_ResponsivenessClientViews-Treatment"];switch(r&&(s=this.options.addEditClassesResponsiveness),e.action){case"save":t.data("action","edit").data("tagid",e.tag_id),i.text(t.data("saved")),i.attr("title",""),o.attr("title",odesk.string.escapeHTML(e.note)),o.hasClass(this.options.plainLinkClass)||a||o.toggleClass(s),a&&t.toggleClass(n),this.ctx.mediator.publish(this.events.save,e);break;case"edit":o.attr("title",odesk.string.escapeHTML(e.note)),this.ctx.mediator.publish(this.events.save,e);break;case"remove":t.data("action","add").data("tagid",""),i.text(t.data("save")),o.hasClass(this.options.plainLinkClass)||a||o.toggleClass(s),a&&t.toggleClass(n),this.ctx.mediator.publish(this.events.remove,e)}},_showError:function(e){this.$error.text(e).slideDown()},_hideError:function(){this.$error.slideUp()},_clearNotePrompt:function(){this.$favoriteNotes&&this.$favoriteNotes.val()==this.options.notesDefaultText&&this.$favoriteNotes.val("")}}),odesk.preLoadedWidgets.favoriteProfiles=new odesk.FavoriteProfiles(document.body)}(jQuery),function(e){"use strict";new odesk.Class("odesk.Lightbox","odesk.AbstractWidget",{currentIndex:0,currentData:{},options:{templateName:"lightbox",items:[],primaryKey:"reference",totalCount:0,preProcessing:e.noop,afterRender:e.noop,countPerPage:20,enableDefaultHotkeysBehavior:!0,dialogTitle:"",dialogContentClass:"",dialog:{autoOpen:!1,modal:!0,resizable:!1,draggable:!1,width:"auto",height:"auto",dialogClass:"oLightbox",position:{my:"center",at:"center",of:window,using:function(t){var i=e(this),o=e(window),s=o.scrollTop()+20,n=i.css(t).offset(),a=t.top;0>n.top&&(a-=n.top),s>a&&i.css("top",s),i.css("left",o.width()/2-i.width()/2)}}},cyclicFlipping:!1,enableCache:!1,hasPager:!1,closeBtn:".jsClose",prevBtn:".oLightboxPrev",nextBtn:".oLightboxNext, .jsNext",content:".oLightboxContent"},init:function(t){e.extend(!0,this.options,t),e.extend(this.events,odesk.events.makeMap(this.name,["itemOffsetChanged"])),this._addEvents(),this.setItems(this.options.items)},setItems:function(t){return this.options.items=t,e.isArray(t)&&t.length>this.options.totalCount&&(this.options.totalCount=t.length),this},setTotalCount:function(e){return this.options.totalCount=parseInt(e,10),this},getDialog:function(){return this.$dialog||(this.$dialog=e("<div />").dialog(this.options.dialog).addClass(this.options.dialogContentClass)),this.$dialog},isDialogOpen:function(){return this.getDialog().dialog("isOpen")},_addEvents:function(){var t=this,i=this.getDialog();this.options.dialog.open=function(){t.options.afterRender.call(t)},i.dialog("widget").on("click",this.options.prevBtn,this.previous.bind(this)).on("click",this.options.nextBtn,this.next.bind(this)).on("click",this.options.closeBtn,function(){return i.dialog("close"),!1}),e(document).keydown(function(e){t.isDialogOpen()&&t.options.enableDefaultHotkeysBehavior&&t.checkPrevNextHotkeys(e.keyCode)}),e(window).resize(function(){t.isDialogOpen()&&i.dialog("option","position",i.dialog("option","position"))})},checkPrevNextHotkeys:function(e){return 37==e?(this.previous(),!1):39==e?(this.next(),!1):void 0},getItemReference:function(e){return e[this.options.primaryKey]},indexByRef:function(e){for(var t=this.options.items,i=0,o=t.length;o>i;i++)if(t[i]&&e==this.getItemReference(t[i]))return i;return!1},itemByIndex:function(e){return null==e&&(e=this.currentIndex),"string"==typeof e&&(e=parseInt(e,10)),this.options.items[e]?(this.currentIndex=e,this.currentData=this.options.items[e],this.currentData.currentIndex=e,this.currentReference=this.getItemReference(this.currentData),this.currentData):!1},itemByRef:function(e){return null==e&&(e=this.currentReference),this.itemByIndex(this.indexByRef(e))},openDialogItem:function(t){if(t&&!t.loading){var i=this.getDialog();if(!t._cache){var o=t.templateName||this.options.templateName;this._addTemplate(o);var s={totalCount:this.options.totalCount,hasPager:this.options.hasPager};for(var n in t)s[n]=t[n];t.dialogContent=e.tmpl(o,s),t.dialogContent.filter(this.options.content).prepend(t.content),this.options.enableCache&&(t._cache=!0)}var a=t.dialogTitle||this.options.dialogTitle;a&&i.dialog("option","title",a),t.dialogContent&&i.empty().append(t.dialogContent),this._refresh()}},_refresh:function(){var t=this.getDialog(),i=t.dialog("option","close");t.dialog("option","close",null).dialog("close").dialog("open").dialog("option","close",i),e("body > div.ui-widget-overlay:last").on("click",function(){t.dialog("close")}),e("body").trigger("resize")},_renderBy:function(e,t){var i=this["itemBy"+t](e);return i&&(this._updateItem(i),this.openDialogItem(i)),i},renderByRef:function(e){return this._renderBy(e,"Ref")},renderByIndex:function(e){return this._renderBy(e,"Index")},_move:function(e){var t=this._fixIndex(this.currentIndex+e,this.options.cyclicFlipping);return t!=this.currentIndex&&(this.renderByIndex(t),this._refresh()),!1},previous:function(e){e&&e.preventDefault(),this._move(-1)},next:function(e){e&&e.preventDefault(),this._move(1)},_addTemplate:function(t){e.template[t]||e.template(t,odesk.templates[t])},_updateItem:function(e){var t=this.currentIndex,i=t-1,o=t+1,s=this.options.cyclicFlipping&&this.options.totalCount>1;e.controls={previous:s||this.options.items[i],next:s||this.options.items[o]},!this.options.items[i]&&i>=0&&this.ctx.mediator.publish(this.events.itemOffsetChanged,{index:t,offset:this._fixIndex(t-this.options.countPerPage,!1)}),!this.options.items[o]&&this.options.totalCount>o&&this.ctx.mediator.publish(this.events.itemOffsetChanged,{index:t,offset:o}),e._cache||this._preProcessing(e)},_fixIndex:function(e,t){return 0>e&&(e=t?this.options.totalCount-1:0),e>=this.options.totalCount&&(e=t?0:this.options.totalCount-1),e},_preProcessing:function(e){this.options.preProcessing.call(this,e)}})}(jQuery),odesk.templates.lightbox='<div class="oLightboxNext{{if !controls.next}} isDisabled{{/if}}"></div><div class="oLightboxPrev{{if !controls.previous}} isDisabled{{/if}}"></div><div class="oLightboxContent">{{if hasPager}}<div class="oLightboxPager"><div class="txtCenter">${currentIndex + 1} of ${totalCount}</div><button class="oBtn oBtnSecondary jsClose">Close</button></div>{{/if}}</div>',function(e){new odesk.Class("odesk.Tabs","odesk.AbstractWidget",{options:{tabSelector:"ul.tabs li > a",selectedTabIndex:1,tabPageSelector:" > div",inPageTab:!1,contentSelector:".oTabContent",activeTabSelector:".isCurrent",activeTabClass:"isCurrent",hiddenContentClass:"isHidden"},init:function(t,i,o){this.name=t,this.$element=e(i),this.options=e.extend(this.options,o),e.extend(this.events,odesk.events.makeMap(this.name,["selectedTabChanged","activateTab"])),this.options.inPageTab&&this._configureTabs(),this.addEvents()},addEvents:function(){this.$element.on("click",this.options.tabSelector,this._onTabClick.bind(this))},setActiveTab:function(t){var i="string"==typeof t?e(t):t,o=this.$element.find(i.attr("href"));i.hasClass(this.options.activeTabClass)||(this.$element.find(this.options.tabSelector).removeClass(this.options.activeTabClass),this.$element.find(this.options.contentSelector).addClass(this.options.hiddenContentClass),i.addClass(this.options.activeTabClass),o.removeClass(this.options.hiddenContentClass),this.ctx.mediator.publish(this.events.activateTab,{tab:i,content:o}))},getActiveTab:function(){return this.$element.find(this.options.activeTabClass)},_onTabClick:function(t){var i=e(t.currentTarget);this.$element.find(i.attr("href")).length>0&&(t.preventDefault(),this.setActiveTab(i))},_configureTabs:function(){var t=this,i=t.$element.find(".oTablist a"),o=t.$element.find(t.options.tabPageSelector).not(".oTablist");o.addClass("isHidden"),i.filter(".isCurrent").length&&(t.options.selectedTabIndex=i.index(i.filter(".isCurrent"))+1),o.eq(t.options.selectedTabIndex-1).toggleClass("isHidden"),i.click(function(s){s.preventDefault(),o.eq(t.options.selectedTabIndex-1).toggleClass("isHidden"),i.eq(t.options.selectedTabIndex-1).toggleClass("isCurrent"),t.options.selectedTabIndex=i.index(e(this))+1,o.eq(t.options.selectedTabIndex-1).toggleClass("isHidden"),i.eq(t.options.selectedTabIndex-1).toggleClass("isCurrent"),t.ctx.mediator.publish(t.events.selectedTabChanged,{selectedTabIndex:t.options.selectedTabIndex})})},setUrl:function(t){if(!t)return!1;var i=this.$element.find(this.options.tabSelector),o=e.param(t);i.each(function(){var t=e(this).attr("href"),i=odesk.url.parse(t).directory;""!==o&&(i=i+"?"+o),e(this).attr("href",i)})}})}(jQuery),odesk.templates.testScore='{{if tests.length > 0}}<ul class="oPlainList">{{each tests}}<li><a href="/exams/${$value.ts_seo_link}_${$value.ts_id}">${odesk.string.cutStr($value.ts_name_raw ? $value.ts_name_raw : $value.ts_name, ($value.ts_rank > 3 && $value.ts_percentile < 70) ? 24 : 28, "...")}</a>{{if $value.ts_pass == 0}}<span class="oScore oScoreFailed">Failed</span>{{else $value.ts_rank == 1}}<span class="oScore oScoreFirst">1st Place!</span>{{else $value.ts_rank == 2}}<span class="oScore oScoreSecond">2nd Place!</span>{{else $value.ts_rank == 3}}<span class="oScore oScoreThird">3rd Place!</span>{{else $value.ts_percentile >= 90}}<span class="oScore oScore10">Top 10%</span>{{else $value.ts_percentile >= 80}}<span class="oScore oScore20">Top 20%</span>{{else $value.ts_percentile >= 70}}<span class="oScore oScore30">Top 30%</span>{{else $value.ts_percentile >= 50}}<span class="oScore oScoreAboveAvg">Above Average</span>{{else}}<span class="oScore oScoreBelowAvg">Below Average</span>{{/if}}</li>{{/each}}</ul>{{/if}}',function(e){new odesk.Class("odesk.TestScore","odesk.AbstractWidget",{init:function(){e.template("testScore",odesk.templates.testScore)},getHtml:function(t){return e.tmpl("testScore",{tests:t})}})}(jQuery),function(e){odesk.social||(odesk.social={}),odesk.social.twitter=function(){function t(t,i){var o=c[t];switch(o||odesk.logger.say("not registered profile for",t),typeof o){case"string":return e.tmpl(o,i).text();case"object":return e.tmpl(o,e.extend(!0,o,i)).text();case"function":return o.call(this,i);case"undefined":return i.text||"Enter tweet"}}function i(e){var t,i=e.data("twitter")||{},o=["via","text","related","counturl","url"];for(var s in o)void 0!==(t=e.data(o[s]))&&(i[o[s]]=t);return{profile:e.data("profile"),twit:i,id:"twt_"+odesk.date.serverTime}}function o(){odesk.loading.show("Redirecting to Twitter...",!0)}function s(i){var o=["original_referer="+encodeURIComponent(window.location.href)];i.twit.text=e.tmpl(t(i.profile,i.twit),i.profile).text();for(var s in i.twit)switch(s){case"url":case"text":case"related":case"counturl":case"via":o.push(s+"="+encodeURIComponent(i.twit[s]))}window.location.href=d+o.join("&")}function n(){odesk.loading.hide(),alert("error shortening url")}function a(e){(function(){window[e.id]=function(t){if(0===t.errorCode){var i=t.results[e.twit.url];i?(e.twit.counturl=e.twit.url,e.twit.url=i.shortUrl,s(e)):n(),window[e.id]=null,delete window[e.id]}else n()}})()}function r(t){e.getScript(["https://api-ssl.bit.ly/shorten?longUrl=",encodeURIComponent(t.twit.url),"&login=",odesk.pageConfig.ODESK_BITLY_LOGIN,"&apiKey=",odesk.pageConfig.ODESK_BITLY_API_KEY,"&callback=",t.id].join(""))}function l(e,t){return odesk.logger.say("registering twitter profile",e),c[e]=t,this}var d="http://twitter.com/share?",c={},p=".jsTwitterShare";return{register:function(t,s,n){var d=n||p,c=e(d).data("profile");return l(c,t),e(s).delegate(d,"click",function(){var t=e(this),s=i(t);return o(),a(s),r(s),!1}),this}}}()}(jQuery),function(e){odesk.social||(odesk.social={}),odesk.social.facebook=function(){function t(t,i){var o=r[t];switch(typeof o){case"object":return e.extend(!0,o,i);case"function":return o.call(this,i);default:return i}}function i(e){var t,i=e.data("facebook")||{},o=["link","name","picture","caption","description","properties","actions"];for(var s in o)void 0!==(t=e.data(o[s]))&&(i[o[s]]=t);return{profile:e.data("profile"),fb:i,id:"fb_"+odesk.date.serverTime}}function o(i){return i&&a?(FB.getLoginStatus(function(o){"connected"!=o.status?FB.login(function(o){o.authResponse&&FB.ui(e.extend(!0,t(i.profile,i.fb),d))}):FB.ui(e.extend(!0,t(i.profile,i.fb),d))}),this):!1}function s(e,t){return odesk.logger.say("registering facebook profile",e),r[e]=t,this}function n(){0===e("#fb-root").length&&e('<div id="fb-root" />').appendTo(document.body),window.fbAsyncInit=function(){FB.init({appId:odesk.pageConfig.FB_APP_ID,cookie:!0,xfbml:!0,channelUrl:odesk.pageConfig.FB_APP_RECEIVER,oauth:!0}),a=1},e.getScript(document.location.protocol+"//connect.facebook.net/en_US/all.js")}var a=0,r={},l=".jsFacebookShare",d={method:"feed",display:"iframe"};return{register:function(t,a,r){var d=r||l,c=e(d).data("profile");return n(),s(c,t),e(a).delegate(d,"click",function(){var t=e(this),s=i(t);o(s)}),this}}}()}(jQuery),function(e){new odesk.Class("odesk.SuggestSkill","odesk.AbstractWidget",{options:{templates:{suggestDialog:"suggestSkills"},section:{info:{suggestDialogTitle:"Suggest a Skill",termsUrl:"https://www.odesk.com/info/terms/"}},suggestUrl:odesk.env.OCA_ROOT+"tracking/v1/comments/babel_skills/v2/suggest/[USER_RID].json",userKey:""},init:function(t){e.extend(this.options,t),e.extend(this.events,odesk.events.makeMap(this.name,["skillAdded"])),e.extend(this.events,odesk.events.makeMap(this.name,["cancelAddingSkill"])),this.$suggestDialog=!1,this.addTemplates()},addTemplates:function(t){t||(t=this.options.templates);for(var i in t){var o=t[i];e.template[o]||e.template(o,odesk.templates[o])}},showSuggestDialog:function(t){var i=this,o=this.options.section;this.openDialog(this.$suggestDialog,{action:"add",dialogTemplate:this.options.templates.suggestDialog,title:o.info.suggestDialogTitle,onOpen:function(i){var o=e("form",i);o.oFormValidation({ignore:".ignore,input[type=hidden],:hidden",rules:{name:{required:!0,regExp:/^[^,;]+$/},description:{required:!0,maxlength:300},link:{required:!0,url:!0}},messages:{name:{regExp:"Entry only one skill at a time, no commas or semicolons"}},callback:function(){return!1}}),t&&o.find('[name="name"]').val(t)},onSubmit:function(t,o){var s=e("form",t);if(i.isFormValid(s)){var n=e.trim(s.find('[name="name"]').val()),a=e.trim(s.find('[name="description"]').val()),r=e.trim(s.find('[name="link"]').val());i.saveAjaxForm(s,{loadingMessage:"We are submitting your skill...",url:i.options.suggestUrl.replace("[USER_RID]",odesk.pageConfig.userId),data:'comment= {skills:[{name:"'+n+'"}];'+'description:"'+a+'";link:"'+r+'"}',onSave:function(){i.ctx.mediator.publish(i.events.skillAdded,n),o()}})}}})},openDialog:function(t,i){var o=this,s=this.options.section,n=!t,a=n||!i.keepContent;return n&&(t=e("<div></div>")),i.action||(i.action=""),"add"===i.action&&(s.data={}),i.data&&(s.data=i.data),s.action=i.action,a?t.html(this._renderTemplate(i.dialogTemplate)):i.onInit&&i.onInit(t,i,s),t.dialog(e.extend({autoOpen:!0,modal:!0,resizable:!1,width:i.width||740,open:e.proxy(function(){var s=e("form",t);o.setFormError(s,{show:!1}),o._lockForm(s,!1),e(".oFormError",s).remove(),e(".oErrorField,.valid").toggleClass("oErrorField valid",!1),i.onOpen&&a&&i.onOpen(t)},this),close:e.proxy(function(){o.ctx.mediator.publish(o.events.cancelAddingSkill)},this)},i)),e(".jsSubmit",t).off("click").on("click",function(){return i.onSubmit&&i.onSubmit(t,function(){t.dialog("close")},i,s),!1}),e(".jsCancel",t).off("mousedown").on("mousedown",function(e){e.preventDefault(),e.stopPropagation();var o=!0;i.onCancel&&(o=i.onCancel(t)),o!==!1&&t.dialog("close")}),t},_renderTemplate:function(t){return e.tmpl(t,this.options.section)},setFormError:function(t,i){i=e.extend({msgClass:"oMsgError",message:"Please fix errors below",show:!0},i);var o=t.prev(".oFormHeader");o.length||(o=e('<header class="oFormHeader jsGenerated isHidden"></header>').insertBefore(t));var s=e(".oMsg",o);s.length||(s=e("<article></article>").appendTo(o)),s.attr("class","oMsg "+i.msgClass).html(i.message),o.hasClass("jsGenerated")?o.toggleClass("isHidden",!i.show):s.toggleClass("isHidden",!i.show)},_lockForm:function(t,i){e("button",t).prop("disabled",i),e(":input:visible",t).prop("readonly",i)},isFormValid:function(e){var t=e.valid();return this.setFormError(e,{show:!t}),t},saveAjaxForm:function(t,i){var o=this,s=e(t),n={loadingMessage:"Saving...",type:"POST",complete:function(e,t){var n=o.saveAjaxcomplete(e,t,i,s);n&&n.error&&n.error.message&&o.setFormError(s,{message:n.error.message}),o._lockForm(s,!1)}};o._lockForm(s,!0),"multipart/form-data"===s.attr("enctype")?(e.extend(n,i),this._prepareAjax(n),odesk.loading.show(n.loadingMessage),s.attr("action",n.url),s.attr("method",n.type),s.ajaxSubmit(n)):(i.data||(i.data=e.param(s.serializeArray())),e.extend(n,i),this.ajaxRequest(n))},ajaxRequest:function(t){this._prepareAjax(t),odesk.loading.show(t.loadingMessage),odesk.ajax(e.extend({type:"GET",cache:!1,complete:function(){odesk.loading.hide()}},t))},saveAjaxcomplete:function(t,i,o){var s=!1;if(o=o||{},o.dataType&&"xml"===o.dataType&&t.responseText){var n=!1;try{n=e.parseXML(t.responseText)}catch(a){odesk.logger.say("ContractorSection: bad XML response",t.responseText)}if(n){var r=e(n);if(r.length){s={};var l=r.find("error");l.length&&(s.error={code:l.find("code").text(),message:l.find("message").text()})}}}else if(t.responseText){var d=t.responseText;d.replace(/^<pre[^>]*>(.*)<\/pre>$/i,function(e,t){d=t});try{s=odesk.json.parse(d)}catch(c){odesk.logger.say("Parse error",t)}}var p="Bad Response";if(s){var u=s.code||s.error&&s.error.code;"success"===i&&!s.error||u&&200==u?(p=!1,o.onSave&&o.onSave(s,i)):u&&200!=u&&s.error&&s.error.message&&(p=s.error.message)}return p&&(o.onError?o.onError(p,s&&s.error):s={error:{message:p}}),odesk.loading.hide(),s},_prepareAjax:function(e){return e.loadingMessage||(e.loadingMessage="Loading..."),e.url||(e.url=e.sectionUrl||this.options.sectionUrl),e}}),e.extend(!0,odesk.SuggestSkill.prototype,odesk.mediator)}(jQuery),odesk.templates.suggestSkills='<header class="oFormHeader"><div class="oFormNote"><p><strong>Important:</strong> Skills must fit in the sentence "I am an expert in _____."</p><div class="cols"><div class="col col1of3 oColSplit"><p><strong>Acceptable Skills</strong></p><ul class="oPlainList"><li><i class="oSuccessIcon"></i> JavaScript</li><li><i class="oSuccessIcon"></i> Accounting</li><li><i class="oSuccessIcon"></i> Photoshop</li><li><i class="oSuccessIcon"></i> German</li></ul></div><div class="col col2of3"><p><strong>Not Acceptable</strong></p><ul class="oPlainList"><li><i class="oErrorIcon"></i> Punctuality - Personal attribute, not a skill</li><li><i class="oErrorIcon"></i> Accountant - Job title or certification, not a skill</li><li><i class="oErrorIcon"></i> Photoshop CS5 - For software, please omit versions</li><li><i class="oErrorIcon"></i> Expert in German - Please omit levels of expertise</li></ul></div></div></div><div class="oFormNote"><p>Skills must also be in English and comply with the oDesk <a href="${info.termsUrl}" target="_blank">Terms of Service</a></p></div></header><form><div class="oFormField"><label class="oLabel">Skill Name</label><input class="oFormMed" type="text" name="name" maxlength="70"><div class="oHint">Please enter only one skill at a time</div></div><div class="oFormField"><label class="oLabel">Description</label><textarea class="oFormMed oFormShort" name="description"></textarea></div><div class="oFormField"><label class="oLabel">Link</label><input class="oFormMed" type="text" name="link"><div class="oHint">e.g., http://en.wikipedia.org/wiki/JavaScript</div></div><footer class="oFormFooter"><div class="oFieldValue"><button class="oBtn oBtnPrimary jsSubmit">Suggest these Skills</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></div></footer></form>',odesk.templates.emailVerified='<div id="verifyBox" class="oLetsGoToWork"><p class="txtCenter oMute">Welcome to our community of smart, talented and extremely good looking oDeskers.</p><figure class="oCheckedEnvelope">âœ”</figure><div class="txtCenter"><p><a href="{{if mainButtonUrl}}${mainButtonUrl}{{else}}#{{/if}}" id="verifyBoxClose" class="oBtn oBtnVisitorPrimary">${mainButtonText}</a></p></div></div>',function(e){new odesk.Class("odesk.EmailVerified","odesk.AbstractWidget",{options:{confirmationMessageId:"",inputElementId:"",template:"emailVerified",noDialog:odesk.pageConfig.emailVerifiedNoDialog,mainButtonText:"Let's Get to Work",mainButtonUrl:null},init:function(t){if(odesk.pageConfig&&odesk.pageConfig.signupEmailVerifiedWidget){var i=odesk.pageConfig.signupEmailVerifiedWidget;i.customMainButtonText&&(this.options.mainButtonText=i.customMainButtonText),i.customMainButtonUrl&&(this.options.mainButtonUrl=i.customMainButtonUrl)}e.extend(this.options,t),this.options.noDialog?this._noDialog():this._initDialog(),this._showDialog(),this._addEvents()},_showDialog:function(){null===odesk.persistentStorage.get("emailVerified",odesk.storageManager.cnst().SERVER_DATA)&&e("#verifyBox").dialog("open")},_noDialog:function(){null===odesk.persistentStorage.get("emailVerified",odesk.storageManager.cnst().SERVER_DATA)&&odesk.persistentStorage.set("emailVerified",1,odesk.storageManager.cnst().SERVER_DATA)},_initDialog:function(){e.template(this.options.template,odesk.templates[this.options.template]),e.tmpl(this.options.template,{mainButtonText:this.options.mainButtonText,mainButtonUrl:this.options.mainButtonUrl}).appendTo("body"),e("#verifyBox").dialog({width:700,modal:!0,autoOpen:!1,resizable:!1,title:"Verification success! You are officially legit.",close:function(){odesk.persistentStorage.set("emailVerified",1,odesk.storageManager.cnst().SERVER_DATA)}})},_addEvents:function(){e("#verifyBoxClose").bind("click",function(t){var i=e(this).attr("href");i&&"#"!=i||t.preventDefault(),e("#verifyBox").dialog("close")})}}),window.location.search.match(/[?&]verified=true/)&&!odesk.qt["FP160U_ExtendedBasicProfileUpdated-Treatment"]&&new odesk.EmailVerified}(jQuery),function(e){new odesk.Class("odesk.VideoEnglishRate","odesk.AbstractWidget",{options:{ajax:{url:"/fwh-api/rate-english-level/",method:"post",data:{source:"freelancer_profile"}}},init:function(t,i){this.$element=e(t),e.extend(this.options,i),this._addEvents()},render:function(){this.$element.html(e.tmpl(odesk.templates.videoEnglishRate,{voted:this.voted,englishProficiencyLevels:this.options.englishProficiencyLevels}))},_addEvents:function(){this.$element.on("click","button",this._rate.bind(this))},_rate:function(t){var i=e(t.target).data("rate"),o=this.options.freelancerKey;odesk.ajax(e.extend(!0,this.options.ajax,{data:{rate:i,freelancerKey:o}})),this.voted=!0,this.render()}})}(jQuery),odesk.templates.videoEnglishRate='{{if !voted}}<h5>How whould you rate their english level?</h5><div class="oBtnGrpRate"><button data-rate="${englishProficiencyLevels.Fluent}" class="oBtn oBtnInline oBtnSecondary oBtnRateFluent">Fluent</button> <button data-rate="${englishProficiencyLevels.Acceptable}" class="oBtn oBtnInline oBtnSecondary oBtnRateBasic">Acceptable</button> <button data-rate="${englishProficiencyLevels[\'Difficult to understand\']}" class="oBtn oBtnInline oBtnSecondary oBtnRatePoor">Difficult to understand</button></div>{{else}}<strong>Thanks for your feedback!</strong>{{/if}}',function(e){new odesk.Class("odesk.ProfilesRelationshipContext","odesk.AbstractWidget",{options:{selectors:{applicationLink:".jsApplicationLink",contractLink:".jsContractLink"}},init:function(t,i){e.extend(!0,this.options,i),this.$element=e(t),0!==this.$element.length&&(this.relationshipContext=this.$element.data("relationship"),this._registerLinksEventLogging()._doRenderLog())},_registerLinksEventLogging:function(){var t=this;return this.$element.find(this.options.selectors.applicationLink+", "+this.options.selectors.contractLink).on("click",function(){t._doClickLog(e(this).data("type"))}),this},_doClickLog:function(e){odesk.logging.logCustomData("impression","contractor_profile_page","click_relationship_context",[{type:this.relationshipContext,link:e}],"")},_doRenderLog:function(){return odesk.logging.logCustomData("impression","contractor_profile_page","relationship_context",[{type:this.relationshipContext,links:["applicants","contracts"]}],""),this}}),e.extend(!0,odesk.ProfilesRelationshipContext.prototype,odesk.mediator)}(jQuery),function(e){new odesk.Class("odesk.ProfileVideo","odesk.AbstractWidget",{init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(!0,this.options,o),e.extend(this.events,odesk.events.makeMap(this.name,["ready","play"])),this.addVideoEvents()},addVideoEvents:function(){var e=this,t=!0;this.trackingId=this.$element.attr("data-trackingId"),this.iframe=this.$element.children("iframe"),this.iframe.length||(this.iframe=this.$element.children(".jsVideoIframe")),this.iframe.attr("id")||this.iframe.prop("id","profileVideo"+odesk.uuid.getUniqueId()),"youtube"===e.$element.attr("data-source")&&(window.onYouTubeIframeAPIReady=function(){e.player=new window.YT.Player(e.iframe.prop("id"),{videoId:e.$element.attr("data-videoId"),events:{onReady:function(t){e._publishEvent.call(e,t,"ready")},onStateChange:function(i){t&&i.data===window.YT.PlayerState.PLAYING&&(t=!1,e._publishEvent.call(e,i,"play"))}}})},jQuery.getScript("//www.youtube.com/iframe_api"))},_publishEvent:function(e,t){var i=e.target.getVideoData();this.ctx.mediator.publish(this.events[t],{id:this.trackingId,source:"youtube",videoId:i.video_id})}})}(jQuery),function(e){new odesk.Class("odesk.ProfileSuspended","odesk.AbstractWidget",{init:function(t){this.$element=e(t);var i=new odesk.ModalDialog(e.tmpl(odesk.templates.profileSuspended));this.$element.on("click",function(e){e.preventDefault(),i.open()}.bind(this))}})}(jQuery),odesk.templates.profileSuspended='<div id="profileSuspended" title="Profile Suspended" class="oHidden"><p>You can\'t create or submit your profile for review because your account is currently suspended.</p><div class="txtCenter"><button class="oBtn oBtnPrimary jsClosePopup">OK</button></div></div>',function(e){new odesk.Class("odesk.ProfilesProfilePortfolio","odesk.AbstractWidget",{options:{selectors:{items:".jsItem",itemLink:".jsItem",itemDialogTitle:"figcaption",itemContent:".jsDetails"},loadingClass:"oLoading"},init:function(t,i,o){e.extend(!0,this.options,o),this.$element=e(i),0!==this.$element.length&&this._registerWidgets()},_portfolioPreProcessing:function(t){var i=this,o=this.widgets.portfolio,s=e("img:first",t.content),n=s.data("url");n&&n!==s.prop("src")&&i._loadedImages[n]===void 0&&(i._loadedImages[n]=!1,e("<img>").load(function(){i._loadedImages[n]=!0,s.prop("src",n);var e=o.getDialog();e.find(s).length&&(o.options.afterRender.call(o),e.dialog("widget").position(e.dialog("option","position")))}).attr("src",n))},_portfolioAfterRender:function(){var t=e(this.options.selectors.itemContent,this.widgets.portfolio.getDialog()),i=e("img:first",t),o=i.data("url");if(o){var s=e("."+this.options.loadingClass,t);o!==i.prop("src")?s.length||t.prepend(e("<div />").addClass(this.options.loadingClass)):s.length&&(s.remove(),i.removeData("url"))}},_registerWidgets:function(){return this._loadedImages={},this.registerWidget({portfolio:new odesk.ProfilePreview(this.$element,{itemsSelector:this.options.selectors.items,itemLinkSelector:this.options.selectors.itemLink,itemDialogTitleSelector:this.options.selectors.itemDialogTitle,itemContentSelector:this.options.selectors.itemContent,preProcessing:this._portfolioPreProcessing.bind(this),afterRender:this._portfolioAfterRender.bind(this),dialog:{width:940}})}),this}}),e.extend(!0,odesk.ProfilesProfilePortfolio.prototype,odesk.mediator)}(jQuery),function(e){new odesk.Class("odesk.FeedbackTooltip","odesk.AbstractWidget",{options:{},init:function(t,i,o){this.$element=e(i);var s=this;e.extend(!0,this.options,o),e.extend(this.events,odesk.events.makeMap(this.name,["closePortfolioFeedbackDialog"])),e(document).on("feedBackTooltipPortfolioClose",function(){var e=s.$element.data("flyout");e&&e.hide().disable()})},showFeedbackTooltip:function(t){if(odesk.featureFlags.portfolioLinkingContractFeedback&&odesk.pageConfig.showLinkedFeedbackBox){var i=this,o=i.options.className+" .action";e(i.options.className).length>0&&e(i.options.className).flyout().remove();var s=i.$element.flyout({clickAnywhereToClose:!1,trigger:"manual",container:i.options.container||"",className:i.options.className.replace(".",""),hasCloseBtn:!0,fixedPosition:!0,placement:i.options.placement,width:i.options.width||"200px",content:'<p><span class="oTag oTagNew">New</span> <strong>Project Portfolios</strong></p><p>'+i.options.text+"<p>"+"<div>Is this helpful? "+'<a class="action" data-contract="'+t.data("contract")+'" data-project="'+t.data("project-id")+'" data-value="yes">Yes</a>'+" | "+'<a class="action" data-contract="'+t.data("contract")+'" data-project="'+t.data("project-id")+'" data-value="no">No</a></div>'}).flyout("show");e("body").delegate(i.options.closeBtn,"mousedown",function(){odesk.ajax({type:"POST",url:"/fwh-api/linking-feedback-vote/"}),odesk.pageConfig.showLinkedFeedbackBox=!1,i._triggerCloseEvent()}),e("body").delegate(o,"click",function(){s.flyout().data("flyout").setContent("Sending ... "),odesk.ajax({type:"POST",url:"/fwh-api/linking-feedback-vote/",data:{contract:e(this).data("contract"),portfolio_item:e(this).data("project"),vote:e(this).data("value"),page:i.options.location,sub_location:i.options.sub_location},success:function(){s.data("flyout").setContent("Thanks for your feedback!"),setTimeout(function(){odesk.pageConfig.showLinkedFeedbackBox=!1,i._triggerCloseEvent(),s.data("flyout").hide().disable()},3e3)},error:function(){s.data("flyout").setContent("Service is temporarily unavailable."),setTimeout(function(){i._triggerCloseEvent(),s.data("flyout").hide().disable()},5e3)}})})}},hide:function(t){var i=e(t);i.length>0&&i.flyout().remove()},_triggerCloseEvent:function(){e.event.trigger({type:"feedBackTooltipPortfolioClose",message:"Close tooltip",time:new Date})}})}(jQuery),function(e){new odesk.Class("odesk.FP2380FeatureTooltip","odesk.AbstractWidget",{options:{className:".FP2380FeatureTooltip",title:"Recommended Score",text:"Shows you how often clients who work with this freelancer would recommend them to others."},init:function(t,i,o){this.$element=e(i);var s=this;e.extend(!0,this.options,o),e.extend(this.events,odesk.events.makeMap(this.name,["closePortfolioFeedbackDialog"])),e(document).on("feedBackFP2380FeatureClose",function(){var e=s.$element.data("flyout");
e&&e.hide().disable()})},showTooltip:function(t){var i=this,o=i.options.className+" .oBtnCloseSmall";voteLinks=i.options.className+" .action",e(i.options.className).length>0&&e(i.options.className).flyout().remove(),i.$element.removeAttr("data-content").removeAttr("data-class-name").removeAttr("data-rel").removeAttr("data-width"),t||(t=i.$element.attr("data-contractor-ref"));var s=i.$element.flyout({clickAnywhereToClose:!1,trigger:"manual",container:i.options.container||"",className:i.options.className.replace(".",""),hasCloseBtn:!0,fixedPosition:!0,placement:i.options.placement||"left",width:i.options.width||"270px",content:'<p><span class="oTag oTagNew">New</span> <strong>'+i.options.title+"</strong></p>"+"<p>"+i.options.text+"<p>"+"<div>Is this helpful? "+'<a class="action" data-value="yes">Yes</a>'+" | "+'<a class="action" data-value="no">No</a></div>'}).flyout("show");e("body").delegate(o,"mousedown",function(){odesk.ajax({type:"POST",url:"/fwh-api/fp2380-feedback-vote/",data:{contractor:t,page:i.options.page,location:i.options.location,type:i.options.scoreType}}),i._triggerCloseEvent()}),e("body").delegate(voteLinks,"click",function(){s.flyout().data("flyout").setContent("Sending ... "),odesk.ajax({type:"POST",url:"/fwh-api/fp2380-feedback-vote/",data:{contractor:t,vote:e(this).data("value"),page:i.options.page,location:i.options.location,type:i.options.scoreType},success:function(){s.data("flyout").setContent("Thanks for your feedback!"),setTimeout(function(){i._triggerCloseEvent(),s.data("flyout").hide().disable()},3e3)},error:function(){s.data("flyout").setContent("Service is temporarily unavailable."),setTimeout(function(){i._triggerCloseEvent(),s.data("flyout").hide().disable()},5e3)}})})},hide:function(t){var i=e(t);i.length>0&&i.flyout().remove()},_triggerCloseEvent:function(){e.event.trigger({type:"feedBackFP2380FeatureClose",message:"Close tooltip",time:new Date})}})}(jQuery),function(e){new odesk.Class("odesk.ContractorSection","odesk.AbstractWidget",{options:{profileSection:"",sectionUrl:odesk.env.API_ROOT+"profiles/v1/providers/[KEY]/[SECTION].json",section:{},userKey:"",templates:{}},$editDialog:!1,$removeDialog:!1,init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(!0,this.options,o)},addTemplates:function(t){t||(t=this.options.templates);for(var i in t){var o=t[i];e.template[o]||e.template(o,odesk.templates[o])}},_renderTemplate:function(t){return e.tmpl(t,this.options.section)},_prepareAjax:function(e){if(e.loadingMessage||(e.loadingMessage="Loading..."),!e.url){var t=e.sectionUrl||this.options.sectionUrl;e.url=t.replace("[KEY]",e.urlKey||this.options.userKey).replace("[SECTION]",this.options.profileSection)}return e},ajaxRequest:function(t){this._prepareAjax(t),odesk.loading.show(t.loadingMessage),odesk.ajax(e.extend({type:"GET",cache:!1,complete:function(){odesk.loading.hide()}},t))},getPreparedView:function(e){var t=this.options.section,i={};if(e&&t.enums)for(var o in e){var s=e[o];if(t.enums[o]!==void 0){var n=t.enums[o];s=n[s]!==void 0?n[s]:""}i[o]=s}return i},setFormError:function(t,i){i=e.extend({msgClass:"oMsgError",message:"Please fix errors below",show:!0},i);var o=t.prev(".oFormHeader");o.length||(o=e('<header class="oFormHeader jsGenerated isHidden"></header>').insertBefore(t));var s=e(".oMsg",o);s.length||(s=e("<article></article>").appendTo(o)),s.attr("class","oMsg "+i.msgClass).html(i.message),o.hasClass("jsGenerated")?o.toggleClass("isHidden",!i.show):s.toggleClass("isHidden",!i.show)},openDialog:function(t,i){var o=this,s=this.options.section,n=!t,a=n||!i.keepContent;return n&&(t=e("<div></div>")),i.action||(i.action=""),"add"===i.action&&(s.data={}),i.data&&(s.data=i.data),s.action=i.action,a?t.html(this._renderTemplate(i.dialogTemplate)):i.onInit&&i.onInit(t,i,s),t.dialog(e.extend({autoOpen:!0,modal:!0,resizable:!1,width:i.width||740,open:e.proxy(function(){var s=e("form",t);o.setFormError(s,{show:!1}),o._lockForm(s,!1),e(".oFormError",s).remove(),e(".oErrorField,.valid").toggleClass("oErrorField valid",!1),i.onOpen&&a&&i.onOpen(t)},this)},i)),e(".jsSubmit",t).off("click").on("click",function(){return i.onSubmit&&i.onSubmit(t,function(){t.dialog("close")},i,s),!1}),e(".jsSubmitMore",t).off("click").on("click",function(){return i.onSubmit&&i.onSubmit(t,function(){t.dialog("close"),i.action="add",o.openDialog(t,i)},i,s,!0),!1}),e(".jsCancel",t).off("mousedown").on("mousedown",function(e){e.preventDefault(),e.stopPropagation();var o=!0;i.onCancel&&(o=i.onCancel(t)),o!==!1&&t.dialog("close")}),t},_lockForm:function(t,i){e("button",t).prop("disabled",i),e(":input:visible",t).prop("readonly",i)},isFormValid:function(e){var t=e.valid();return this.setFormError(e,{show:!t}),t},saveAjaxcomplete:function(t,i,o){var s=!1;if(o=o||{},o.dataType&&"xml"===o.dataType&&t.responseText){var n=!1;try{n=e.parseXML(t.responseText)}catch(a){odesk.logger.say("ContractorSection: bad XML response",t.responseText)}if(n){var r=e(n);if(r.length){s={};var l=r.find("error");l.length&&(s.error={code:l.find("code").text(),message:l.find("message").text()})}}}else if(t.responseText){var d=t.responseText;d.replace(/^<pre[^>]*>(.*)<\/pre>$/i,function(e,t){d=t});try{s=odesk.json.parse(d)}catch(c){odesk.logger.say("Parse error",t)}}var p="Bad Response";if(s){var u=s.code||s.error&&s.error.code;"success"===i&&!s.error||u&&200==u?(p=!1,o.onSave&&o.onSave(s,i)):200!=u&&s.error&&s.error.message&&(p=s.error.message)}return p&&(o.onError?o.onError(p,s&&s.error):s={error:{message:p}}),odesk.loading.hide(),s},saveAjaxForm:function(t,i){var o=this,s=e(t),n={loadingMessage:"Saving...",type:"POST",complete:function(e,t){var n=o.saveAjaxcomplete(e,t,i,s);n&&n.error&&n.error.message&&o.setFormError(s,{message:n.error.message}),o._lockForm(s,!1)}};o._lockForm(s,!0),"multipart/form-data"===s.attr("enctype")?(e.extend(n,i),this._prepareAjax(n),odesk.loading.show(n.loadingMessage),s.attr("action",n.url),s.attr("method",n.type),s.ajaxSubmit(n)):(i.data||(i.data=e.param(s.serializeArray())),e.extend(n,i),this.ajaxRequest(n))},findItemById:function(e,t){var i=this.options.section;if(e&&i.items){t=t||"recordId";for(var o in i.items){var s=i.items[o];if(s[t]&&s[t]==e)return s}}return!1},_openCommonDialog:function(){return!1},openAddDialog:function(){var e=this.options.section;this._openCommonDialog({action:"add",title:e.info.addDialogTitle})},addCommonEditEvent:function(){var t=this;this.$element.delegate("a.oBtnEditSmall, a.oEditIcon","click",function(i){i.preventDefault();var o=t.options.section,s=e(this).closest("tr, article, li").data("id"),n=t.findItemById(s);return n&&(o.data=n,t._openCommonDialog({action:"edit",urlKey:s,title:o.info.editDialogTitle})),!1})},addRemoveEvent:function(t,i){var o=this;this.$element.delegate("a.oBtnDeleteSmall, a.oDeleteIcon","click",function(s){s.preventDefault();var n=o.options.section,a=e(this).closest("tr, article, li").data("id"),r=o.findItemById(a);return r&&(n.data=r,o.openDialog(this.$removeDialog,{urlKey:a,title:n.info.removeDialogTitle,dialogTemplate:o.options.templates.removeDialog,width:500,onSubmit:function(s,n){var r=e("form",s);o.saveAjaxForm(r,{urlKey:i?"":a,loadingMessage:"Removing...",onSave:function(e,i){t(e,i),n()}})}})),!1})},sortItems:function(e,t){e.sort(function(e,i){for(var o in t){if(e[o]>i[o])return t[o]?1:-1;if(e[o]<i[o])return t[o]?-1:1}return 0})},startEditing:function(){this.options.section.editing=!0,this.$element.html(this._renderTemplate(this.options.templates.section))},doneEditing:function(){this.options.section.editing=!1,this.$element.html(this._renderTemplate(this.options.templates.section))}})}(jQuery),function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(i){function o(t){for(var o=new FormData,s=0;t.length>s;s++)"file"!=t[s].type&&o.append(t[s].name,t[s].value);if(l.find("input:file:enabled").each(function(){var t=e(this).attr("name"),i=this.files;if(t)for(var s=0;i.length>s;s++)o.append(t,i[s])}),i.extraData)for(var n in i.extraData)o.append(n,i.extraData[n]);i.data=null;var a=e.extend(!0,{},e.ajaxSettings,i,{contentType:!1,processData:!1,cache:!1,type:"POST"}),r=odesk&&odesk.pageConfig&&odesk.pageConfig.CSRF_TOKEN;r&&(a.headers=a.headers||{},a.headers["X-Odesk-CSRF-Token"]=r),a.context=a.context||a,a.data=null;var d=a.beforeSend;a.beforeSend=function(e,t){t.data=o,e.upload&&(e.upload.onprogress=function(e){t.progress(e.position,e.total)}),d&&d.call(t,e,i)},e.ajax(a)}function s(o){function s(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function a(){function i(){try{var e=s(g).readyState;t("state = "+e),"uninitialized"==e.toLowerCase()&&setTimeout(i,50)}catch(o){t("Server abort: ",o," (",o.name,")"),r(j),y&&clearTimeout(y),y=void 0}}var o=l.attr("target"),a=l.attr("action");_.setAttribute("target",h),n||_.setAttribute("method","POST"),a!=p.url&&_.setAttribute("action",p.url),p.skipEncodingOverride||n&&!/post/i.test(n)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),p.timeout&&(y=setTimeout(function(){k=!0,r(C)},p.timeout));var d=[];try{if(p.extraData)for(var c in p.extraData)d.push(e('<input type="hidden" name="'+c+'">').attr("value",p.extraData[c]).appendTo(_)[0]);p.iframeTarget||(f.appendTo("body"),g.attachEvent?g.attachEvent("onload",r):g.addEventListener("load",r,!1)),setTimeout(i,15),_.submit()}finally{_.setAttribute("action",a),o?_.setAttribute("target",o):l.removeAttr("target"),e(d).remove()}}function r(i){if(!m.aborted&&!T){try{$=s(g)}catch(o){t("cannot access response document: ",o),i=j}if(i===C&&m)return m.abort("timeout"),void 0;if(i==j&&m)return m.abort("server abort"),void 0;if($&&$.location.href!=p.iframeSrc||k){g.detachEvent?g.detachEvent("onload",r):g.removeEventListener("load",r,!1);var n,a="success";try{if(k)throw"timeout";var l="xml"==p.dataType||$.XMLDocument||e.isXMLDoc($);if(t("isXml="+l),!l&&window.opera&&(null==$.body||""==$.body.innerHTML)&&--I)return t("requeing onLoad callback, DOM not available"),setTimeout(r,250),void 0;var d=$.body?$.body:$.documentElement;m.responseText=d?d.innerHTML:null,m.responseXML=$.XMLDocument?$.XMLDocument:$,l&&(p.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":p.dataType};return t[e]},d&&(m.status=Number(d.getAttribute("status"))||m.status,m.statusText=d.getAttribute("statusText")||m.statusText);var c=(p.dataType||"").toLowerCase(),h=/(json|script|text)/.test(c);if(h||p.textarea){var v=$.getElementsByTagName("textarea")[0];if(v)m.responseText=v.value,m.status=Number(v.getAttribute("status"))||m.status,m.statusText=v.getAttribute("statusText")||m.statusText;else if(h){var b=$.getElementsByTagName("pre")[0],_=$.getElementsByTagName("body")[0];b?m.responseText=b.textContent?b.textContent:b.innerText:_&&(m.responseText=_.textContent?_.textContent:_.innerText)}}else"xml"!=c||m.responseXML||null==m.responseText||(m.responseXML=F(m.responseText));try{D=L(m,c,p)}catch(i){a="parsererror",m.error=n=i||a}}catch(i){t("error caught: ",i),a="error",m.error=n=i||a}m.aborted&&(t("upload aborted"),a=null),m.status&&(a=m.status>=200&&300>m.status||304===m.status?"success":"error"),"success"===a?(p.success&&p.success.call(p.context,D,"success",m),u&&e.event.trigger("ajaxSuccess",[m,p])):a&&(void 0==n&&(n=m.statusText),p.error&&p.error.call(p.context,m,a,n),u&&e.event.trigger("ajaxError",[m,p,n])),u&&e.event.trigger("ajaxComplete",[m,p]),u&&!--e.active&&e.event.trigger("ajaxStop"),p.complete&&p.complete.call(p.context,m,a),T=!0,p.timeout&&clearTimeout(y),setTimeout(function(){p.iframeTarget||f.remove(),m.responseXML=null},100)}}}var d,c,p,u,h,f,g,m,v,b,k,y,_=l[0],w=!!e.fn.prop;if(o)if(w)for(c=0;o.length>c;c++)d=e(_[o[c].name]),d.prop("disabled",!1);else for(c=0;o.length>c;c++)d=e(_[o[c].name]),d.removeAttr("disabled");if(e(":input[name=submit],:input[id=submit]",_).length)return alert('Error: Form elements must not have name or id of "submit".'),void 0;if(p=e.extend(!0,{},e.ajaxSettings,i),p.context=p.context||p,h="jqFormIO"+(new Date).getTime(),p.iframeTarget?(f=e(p.iframeTarget),b=f.attr("name"),null==b?f.attr("name",h):h=b):(f=e('<iframe name="'+h+'" src="'+p.iframeSrc+'" />'),f.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=f[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var o="timeout"===i?"timeout":"aborted";t("aborting upload... "+o),this.aborted=1,f.attr("src",p.iframeSrc),m.error=o,p.error&&p.error.call(p.context,m,o,i),u&&e.event.trigger("ajaxError",[m,p,o]),p.complete&&p.complete.call(p.context,m,o)}},u=p.global,u&&!e.active++&&e.event.trigger("ajaxStart"),u&&e.event.trigger("ajaxSend",[m,p]),p.beforeSend&&p.beforeSend.call(p.context,m,p)===!1)return p.global&&e.active--,void 0;if(!m.aborted){v=_.clk,v&&(b=v.name,b&&!v.disabled&&(p.extraData=p.extraData||{},p.extraData[b]=v.value,"image"==v.type&&(p.extraData[b+".x"]=_.clk_x,p.extraData[b+".y"]=_.clk_y)));var C=1,j=2,x=e("meta[name=csrf-token]").attr("content"),S=e("meta[name=csrf-param]").attr("content");S&&x&&(p.extraData=p.extraData||{},p.extraData[S]=x);var P=odesk&&odesk.pageConfig&&odesk.pageConfig.CSRF_TOKEN;P&&(p.extraData=p.extraData||{},p.extraData.csrf_token=P),p.forceSync?a():setTimeout(a,10);var D,$,T,I=50,F=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},E=e.parseJSON||function(e){return window.eval("("+e+")")},L=function(t,i,o){var s=t.getResponseHeader("content-type")||"",n="xml"===i||!i&&s.indexOf("xml")>=0,a=n?t.responseXML:t.responseText;return n&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),o&&o.dataFilter&&(a=o.dataFilter(a,i)),"string"==typeof a&&("json"===i||!i&&s.indexOf("json")>=0?a=E(a):("script"===i||!i&&s.indexOf("javascript")>=0)&&e.globalEval(a)),a}}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;var n,a,r,l=this;"function"==typeof i&&(i={success:i}),n=this.attr("method"),a=this.attr("action"),r="string"==typeof a?e.trim(a):"",r=r||window.location.href||"",r&&(r=(r.match(/^([^#]+)/)||[])[1]),i=e.extend(!0,{url:r,success:e.ajaxSettings.success,type:n||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var d={};if(this.trigger("form-pre-serialize",[this,i,d]),d.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&i.beforeSerialize(this,i)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var c=i.traditional;void 0===c&&(c=e.ajaxSettings.traditional);var p,u=this.formToArray(i.semantic);if(i.data&&(i.extraData=i.data,p=e.param(i.data,c)),i.beforeSubmit&&i.beforeSubmit(u,this,i)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[u,this,i,d]),d.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var h=e.param(u,c);p&&(h=h?h+"&"+p:p),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+h,i.data=null):i.data=h;var f=[];if(i.resetForm&&f.push(function(){l.resetForm()}),i.clearForm&&f.push(function(){l.clearForm(i.includeHidden)}),!i.dataType&&i.target){var g=i.success||function(){};f.push(function(t){var o=i.replaceTarget?"replaceWith":"html";e(i.target)[o](t).each(g,arguments)})}else i.success&&f.push(i.success);i.success=function(e,t,o){for(var s=i.context||i,n=0,a=f.length;a>n;n++)f[n].apply(s,[e,t,o||l,l])};var m=e("input:file:enabled[value]",this),v=m.length>0,b="multipart/form-data",k=l.attr("enctype")==b||l.attr("encoding")==b,y=!!(v&&m.get(0).files&&window.FormData);t("fileAPI :"+y);var _=(v||k)&&!y;return i.iframe!==!1&&(i.iframe||_)?i.closeKeepAlive?e.get(i.closeKeepAlive,function(){s(u)}):s(u):(v||k)&&y?(i.progress=i.progress||e.noop,o(u)):e.ajax(i),this.trigger("form-submit-notify",[this,i]),this},e.fn.ajaxForm=function(i){if(0===this.length){var o={s:this.selector,c:this.context};return!e.isReady&&o.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(o.s,o.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(i))}).bind("click.form-plugin",function(t){var i=t.target,o=e(i);if(!o.is(":submit,input:image")){var s=o.closest(":submit");if(0==s.length)return;i=s[0]}var n=this;if(n.clk=i,"image"==i.type)if(void 0!=t.offsetX)n.clk_x=t.offsetX,n.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=o.offset();n.clk_x=t.pageX-a.left,n.clk_y=t.pageY-a.top}else n.clk_x=t.pageX-i.offsetLeft,n.clk_y=t.pageY-i.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var i=[];if(0===this.length)return i;var o=this[0],s=t?o.getElementsByTagName("*"):o.elements;if(!s)return i;var n,a,r,l,d,c,p;for(n=0,c=s.length;c>n;n++)if(d=s[n],r=d.name)if(t&&o.clk&&"image"==d.type)d.disabled||o.clk!=d||(i.push({name:r,value:e(d).val(),type:d.type}),i.push({name:r+".x",value:o.clk_x},{name:r+".y",value:o.clk_y}));else if(l=e.fieldValue(d,!0),l&&l.constructor==Array)for(a=0,p=l.length;p>a;a++)i.push({name:r,value:l[a]});else null!==l&&l!==void 0&&i.push({name:r,value:l,type:d.type});if(!t&&o.clk){var u=e(o.clk),h=u[0];r=h.name,r&&!h.disabled&&"image"==h.type&&(i.push({name:r,value:u.val()}),i.push({name:r+".x",value:o.clk_x},{name:r+".y",value:o.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var o=this.name;if(o){var s=e.fieldValue(this,t);if(s&&s.constructor==Array)for(var n=0,a=s.length;a>n;n++)i.push({name:o,value:s[n]});else null!==s&&s!==void 0&&i.push({name:this.name,value:s})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],o=0,s=this.length;s>o;o++){var n=this[o],a=e.fieldValue(n,t);null===a||void 0===a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(i,a):i.push(a))}return i},e.fieldValue=function(t,i){var o=t.name,s=t.type,n=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!o||t.disabled||"reset"==s||"button"==s||("checkbox"==s||"radio"==s)&&!t.checked||("submit"==s||"image"==s)&&t.form&&t.form.clk!=t||"select"==n&&-1==t.selectedIndex))return null;if("select"==n){var a=t.selectedIndex;if(0>a)return null;for(var r=[],l=t.options,d="select-one"==s,c=d?a+1:l.length,p=d?a:0;c>p;p++){var u=l[p];if(u.selected){var h=u.value;if(h||(h=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),d)return h;r.push(h)}}return r}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(e){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,o=this.tagName.toLowerCase();t.test(i)||"textarea"==o||e&&/hidden/.test(i)?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==o&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var o=e(this).parent("select");t&&o[0]&&"select-one"==o[0].type&&o.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),function(e){new odesk.Class("odesk.ContractorExams","odesk.AbstractWidget",{options:{},init:function(t,i){this.$element=e(t),e.extend(this.options,i),this.addEvents()},addEvents:function(){var t=this;this.$element.delegate(".jsSetPublic","click",function(){t.setStatus(e(this),"public")}),this.$element.delegate(".jsSetPrivate","click",function(){t.setStatus(e(this),"private")})},setStatus:function(t,i){odesk.pageConfig.toReloadAfterEditing=!0,odesk.loading.show(),e.ajax({url:"/UserSettings/exams/make-"+i+"/id/"+t.parent().data("id")+"?format=html",success:function(){odesk.loading.hide()},error:function(t){odesk.loading.hide(),e.parseJSON(t.responseText),new odesk.Showbox({title:"error",message:"request error",type:"error"}).show()}})},loadData:function(){this.$element.html('<div class="oLoading"></div>');var t=this;e.ajax({dataType:"json",url:"/fwh-api/get-exam-list/",complete:function(i){var o=odesk.json.parse(i.responseText);t.options.data=o,t.$element.html(e.tmpl(odesk.templates.contractorExams,t.options.data))}})},startEditing:function(){this.$element.show(),this.$element.empty()&&this.loadData()},doneEditing:function(){this.$element.hide()}})}(jQuery),odesk.templates.contractorExams='<section><h2 class="oH2Lite"><a href="/tests" class="oRight oRight oBtnEditSmall">Take tests</a>Tests</h1>{{if exams && exams.length>0}}<table class="oTable"><thead class="nowrap"><tr><th>Name</th><th>Score (out of 5)</th><th>Time to Complete</th><th>Display on profile</th></tr></thead><tbody>{{each exams}}<tr><td>${$value.testName}</td><td class="nowrap">${odesk.string.sprintf("%1.2f", $value.score)}{{if $value.success != "Passed"}}<span class="oScore oScoreFailed">Failed</span>{{else $value.rank == 1}}<span class="oScore oScoreFirst">1st Place!</span>{{else $value.rank == 2}}<span class="oScore oScoreSecond">2nd Place!</span>{{else $value.rank == 3}}<span class="oScore oScoreThird">3rd Place!</span>{{else $value.percentile >= 90}}<span class="oScore oScore10">Top 10%</span>{{else $value.percentile >= 80}}<span class="oScore oScore20">Top 20%</span>{{else $value.percentile >= 70}}<span class="oScore oScore30">Top 30%</span>{{else $value.percentile >= 50}}<span class="oScore oScoreAboveAvg">Above Average</span>{{else}}<span class="oScore oScoreBelowAvg">Below Average</span>{{/if}}</td><td class="nowrap">{{if $value.duration}}${$value.duration} min{{/if}}</td><td class="nowrap">{{if testIsCertification == "1"}}<div class="txtCenter oNull"><strong>No</strong></div>{{else}}<div data-id="${$value.id}" class="oBtnGrp"><input type="radio" class="jsSetPublic" id="examStatus${$value.id}_Public" name="examStatus${$value.id}" value="Public"{{if $value.status=="Public"}} checked{{/if}}><label for="examStatus${$value.id}_Public">Yes</label><input type="radio" class="jsSetPrivate" id="examStatus${$value.id}_Private" name="examStatus${$value.id}" value="Private"{{if $value.status=="Private"}} checked{{/if}}><label for="examStatus${$value.id}_Private">No</label></div>{{/if}}</tr>{{/each}}</tbody></table>{{else}}<ul class="oList"><li><span class="oNullBig">You have not taken any tests. Successful tests increase your chances of getting jobs.</span></li></ul>{{/if}}</section>',function(e){e.fn.autoSuggest=function(t,i){function o(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&t++;return t}function s(){var t=r.extraParams;return e.isFunction(t)?t():t}var n,a={asHtmlID:!1,startText:"Enter Name Here",usePlaceholder:!1,emptyText:"No Results Found",preFill:{},limitText:"No More Selections Are Allowed",selectedItemProp:"value",selectedValuesProp:"value",searchObjProps:"value",queryParam:"q",retrieveLimit:!1,extraParams:"",matchCase:!1,minChars:1,keyDelay:400,resultsHighlight:!0,neverSubmit:!1,selectionLimit:!1,showResultList:!0,showResultListWhenNoMatch:!1,canGenerateNewSelections:!0,start:function(){},selectionClick:function(){},selectionAdded:function(){},selectionRemoved:function(e){e.remove()},formatList:!1,beforeRetrieve:function(e){return e},retrieveComplete:function(e){return e},resultClick:function(){},resultsComplete:function(){},resultsClass:"as-results",currentItemClass:"active",multiple:!0,highlight:function(e,t,i){var o;return o=i?RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","g"):RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","gi"),e.replace(o,"<em>$1</em>")}},r=e.extend(a,i),l=null;return"function"==typeof t?n=t:"string"==typeof t?n=function(i,o){var n="";r.retrieveLimit&&(n="&limit="+encodeURIComponent(r.retrieveLimit)),l=e.getJSON(t+"?"+r.queryParam+"="+encodeURIComponent(i)+n+s(),function(e){var t=r.retrieveComplete.call(this,e);o(t,i)})}:"object"==typeof t&&o(t)>0&&(n=function(e,i){i(t,e)}),n?this.each(function(t){function i(t,i){k.val((k.val()||",")+t[r.selectedValuesProp]+",");var o=e('<li class="as-selection-item" id="as-selection-'+i+'" data-value="'+t[r.selectedValuesProp]+'"></li>').click(function(){r.selectionClick.call(this,e(this)),g.children().removeClass("selected"),e(this).addClass("selected")}).mousedown(function(){f=!1});if(r.multiple){var s=e('<a class="as-close">&times;</a>').click(function(){return k.val(k.val().replace(","+t[r.selectedValuesProp]+",",",")),r.selectionRemoved.call(this,o),f=!0,h.focus(),!1});m.before(o.html(t[r.selectedItemProp]).prepend(s))}else h.val(t[r.selectedItemProp]),h.blur(),h.data("select",t);return r.selectionAdded.call(this,m.prev(),t[r.selectedValuesProp]),m.prev()}function s(){var e=h.val().replace(/[\\]+|[\/]+/g,"");e!=I&&(I=e,e.length>=r.minChars?(g.addClass("loading"),a(e)):(g.removeClass("loading"),v.hide()))}function a(e){_=e,r.beforeRetrieve&&(e=r.beforeRetrieve.call(this,e)),p(),n(e,d)}function d(t,s){r.matchCase||(s=s.toLowerCase()),s=s.replace("(","\\(","g").replace(")","\\)","g");var n=0;v.html(b.html("")).hide(),o(t);for(var a in t){var l,d=a;A++;var c=!1;if("value"==r.searchObjProps)l=t[d].value;else{l="";for(var p=r.searchObjProps.split(","),u=0;p.length>u;u++){var m=e.trim(p[u]);l=l+t[d][m]+" "}}if(l&&(r.matchCase||(l=l.toLowerCase()),-1==l.search(s)||-1!=k.val().search(","+t[d][r.selectedValuesProp]+",")&&r.multiple||(c=!0)),c){var y=e('<li class="as-result-item" id="as-result-item-'+d+'"></li>').click(function(){var t=e(this).data("data"),o=t.num;if(0>=e("#as-selection-"+o,g).length&&!F){var s=t.attributes;h.val("").focus(),I="",i(s,o),r.resultClick.call(this,t),v.hide()}F=!1}).mousedown(function(){return f=!1,!1}).mouseover(function(){e("li",b).removeClass(r.currentItemClass),e(this).addClass(r.currentItemClass)}).data("data",{attributes:t[d],num:A}),_=e.extend({},t[d]);if(r.resultsHighlight&&s.length>0&&(_[r.selectedItemProp]=r.highlight.call(this,_[r.selectedItemProp],s,r.matchCase)),y=r.formatList?r.formatList.call(this,_,y,function(e){return r.resultsHighlight&&s.length>0?r.highlight.call(this,e,s,r.matchCase):void 0}):y.html(_[r.selectedItemProp]),b.append(y),_=void 0,n++,r.retrieveLimit&&r.retrieveLimit==n)break}}g.removeClass("loading"),0>=n&&(r.emptyText?b.html('<li class="as-message">'+r.emptyText+"</li>"):v.hide()),b.css("width",g.outerWidth()),(n>0||r.showResultListWhenNoMatch)&&h.is(":focus")&&v.show(),r.resultsComplete.call(this)}function c(t){if(e(":visible",v).length>0){var i,o=e("li",v);i="down"==t?o.eq(0):o.filter(":last");var s=e("li."+r.currentItemClass+":first",v);s.length>0&&(i="down"==t?s.next():s.prev()),o.removeClass(r.currentItemClass),i.addClass(r.currentItemClass)}}function p(){l&&(l.abort(),l=null)}var u;r.asHtmlID?(t=r.asHtmlID,u=t):(t=t+""+Math.floor(100*Math.random()),u="as-input-"+t),r.start.call(this,{add:function(t){i(t,"u"+e("li",g).length).addClass("blur")},remove:function(e){k.val(k.val().replace(","+e+",",",")),g.find('li[data-value = "'+e+'"]').remove()}});var h=e(this);h.attr("autocomplete","off").addClass("as-input").attr("id",u),r.usePlaceholder?h.attr("placeholder",r.startText):h.val(r.startText);var f=!1;h.wrap('<ul class="as-selections" id="as-selections-'+t+'"></ul>').wrap('<li class="as-original" id="as-original-'+t+'"></li>');var g=e("#as-selections-"+t),m=e("#as-original-"+t),v=e('<div class="'+r.resultsClass+'" id="as-results-'+t+'" style="position:absolute;"></div>').hide(),b=e('<ul class="as-list"></ul>'),k=e('<input type="hidden" class="as-values" name="as_values_'+t+'" id="as-values-'+t+'" />'),y="",_="";if("string"==typeof r.preFill){for(var w=r.preFill.split(","),C=0;w.length>C;C++){var j={};j[r.selectedValuesProp]=w[C],""!==w[C]&&i(j,"000"+C)}y=r.preFill}else{y="";var x=0;for(var S in r.preFill)r.preFill.hasOwnProperty(S)&&x++;if(x>0)for(var C=0;x>C;C++){var P=r.preFill[C][r.selectedValuesProp];void 0===P&&(P=""),y=y+P+",",""!==P&&i(r.preFill[C],"000"+C)}}if(""!==y){h.val("");var D=y.substring(y.length-1);","!=D&&(y+=","),k.val(","+y),e("li.as-selection-item",g).addClass("blur").removeClass("selected")}h.after(k),g.click(function(){f=!0,h.focus()}).mousedown(function(){f=!1}).after(v);var $=null,T=null,I="",F=!1,E=null,L=!1;h.focus(function(){return e(this).val()!=_&&(v.hide(),f=!1),r.usePlaceholder||e(this).val()!=r.startText||""!==k.val()?f&&(e("li.as-selection-item",g).removeClass("blur"),""!==e(this).val()&&(b.css("width",g.outerWidth()),e("li",v).length>0&&v.show())):e(this).val(""),$&&clearInterval($),$=setInterval(function(){r.showResultList&&(r.selectionLimit&&e("li.as-selection-item",g).length>=r.selectionLimit&&r.multiple?(b.html('<li class="as-message">'+r.limitText+"</li>"),v.show()):s())},r.keyDelay),f=!0,0===r.minChars&&a(e(this).val()),!0}).blur(function(){!r.usePlaceholder&&""===e(this).val()&&""===k.val()&&""===y&&r.minChars>0?e(this).val(r.startText):f&&(e("li.as-selection-item",g).addClass("blur").removeClass("selected"),v.hide()),v.hide(),$&&clearInterval($)}).keydown(function(t){switch(E=t.keyCode,L=!1,t.keyCode){case 38:t.preventDefault(),c("up");break;case 40:t.preventDefault(),c("down");break;case 8:if(""===h.val()){var o=k.val().split(",");o=o[o.length-2],g.children().not(m.prev()).removeClass("selected"),m.prev().hasClass("selected")?(k.val(k.val().replace(","+o+",",",")),r.selectionRemoved.call(this,m.prev())):(r.selectionClick.call(this,m.prev()),m.prev().addClass("selected"))}1==h.val().length&&(v.hide(),I="",p()),e(":visible",v).length>0&&(T&&clearTimeout(T),T=setTimeout(function(){s()},r.keyDelay));break;case 9:case 188:if(r.canGenerateNewSelections){F=!0;var n=h.val().replace(/(,)/g,""),a=e("li."+r.currentItemClass+":first",v);if(""!==n&&0>k.val().search(","+n+",")&&n.length>=r.minChars&&0===a.length){t.preventDefault();var l={};l[r.selectedItemProp]=n,l[r.selectedValuesProp]=n;var d=e("li",g).length;i(l,"00"+(d+1)),h.val(""),p();break}}break;case 13:F=!1;var a=e("li."+r.currentItemClass+":first",v);a.length>0&&(a.click(),v.hide()),(r.neverSubmit||a.length>0)&&t.preventDefault();break;case 27:case 16:case 20:p(),v.hide()}});var A=0}):void 0}}(jQuery),function(e){new odesk.Class("odesk.AutoSuggest","odesk.AbstractWidget",{options:{startText:"",limitText:"",usePlaceholder:!0,multiple:!1,selectionLimit:1,canGenerateNewSelections:!1},init:function(t,i,o){this.name=t,this.$element=e(i),this.options=e.extend(this.options,o),this.$input=this.$element.find("input").autoSuggest(this.options.source,this.options)},getSelectedData:function(){var e=this.$input.val(),t=this.$input.data("select");return t&&e===t[this.options.selectedItemProp]?t:!1}})}(jQuery),function(e){new odesk.Class("odesk.AutoComplete","odesk.AbstractWidget",{options:{autocomplete:{cacheable:!0,cacheLength:1e5,max:10,scrollHeight:300,stripSpacesAfterWords:!1,resultsClass:"oFieldSuggest",showNoResults:!1,matchContains:!0,forceSorting:!1,customScroll:{verticalDragMinHeight:20,verticalGutter:-5,hideFocus:!0},queryPlaceholderInUrl:"{q}",dataType:"json",loadingClass:"isLoading",listHeaderItemClass:"oFieldSuggestTitle",formatItem:function(e,t,i,o){return o||!1},getItemValue:function(t){if(e.isArray(t))return t[0];if(e.isPlainObject(t)){if(t.value!==void 0)return t.value;
if(t.name!==void 0)return t.name}return!1}}},init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(!0,this.options.autocomplete,{parseJson:e.proxy(this._parseJson,this)},o),odesk.events&&e.extend(this.events,odesk.events.makeMap(this.name,["change"])),this._setProperties(),this._addEvents()},_setProperties:function(){var e=this.options.autocomplete;!e.formatMatch&&e.getItemValue&&(e.formatMatch=e.getItemValue),this.$input=this.$element.find("input").data("container",this.$element).autocomplete(null,e)},_addEvents:function(){var e=this;this.$input.bind("result",function(t,i,o){e._selectedTerm=o||"",e._selectedItem=i||!1,e.ctx.mediator.publish(e.events.change,i,o)})},getSelectedData:function(){var e=this.$input.val();if(e===this._selectedTerm)return this._selectedItem;var t=this.$input.data("select").getData(e);return t&&t.data},getCacheData:function(){return this.$input.data("cache").getData()},setCacheData:function(e){var t=this.$input.data("cache");t.flush();for(var i in e)t.add(i,e[i]);return this},setResultsData:function(e){var t=this.$input;return t.data("cache").flush(),t.setOptions({data:e}),t.data("select").display(this._getParsedItems(e),""),this},destroy:function(){return this.$input&&(this.$input.unautocomplete(),this.$input.data("select").emptyList()),this},_getParsedItems:function(e){var t=[],i=this.$input.data("options");if(e)for(var o in e){var s=e[o],n="string"==typeof s?s.split("|"):s,a=i.getItemValue(n);a!==!1&&t.push({data:n,value:a,result:i.formatResult&&i.formatResult(n)||a,weight:n.weight||0})}return t},_parseJson:function(e){var t=null,i=this.$input.data("options");for(var o in i.jsonPath){var s=i.jsonPath[o];s&&(t=null==t?e[s]:t[s])}return this._getParsedItems(t)}})}(jQuery),function(e){e.fn.extend({autocomplete:function(t,i){var o="string"==typeof t;return i=e.extend({},e.Autocompleter.defaults,{url:o?t:null,data:o?null:t,delay:o?e.Autocompleter.defaults.delay:10,max:i&&!i.scroll?10:150},i),i.highlight=i.highlight||function(e){return e},i.formatMatch=i.formatMatch||i.formatItem,this.each(function(){new e.Autocompleter(this,i)})},result:function(e){return this.bind("result",e)},search:function(e){return this.trigger("search",[e])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(e){return this.trigger("setOptions",[e])},unautocomplete:function(){return this.trigger("unautocomplete")},setRequestFromSelectList:function(e){return this.trigger("setRequestFromSelectList",e)},setUrl:function(e){return this.trigger("setUrl",e)}}),e.Autocompleter=function(t,i){function o(o){var s=x.selected();if(!s)return!1;var a=s.result;if(y=a,i.multiple){var r=n(b.val());if(r=e.grep(r,function(e){return!!e}),r.length>1){var l=i.multipleSeparator.length;o=null!=o?o:e(t).selection().start;var c,p=0;e.each(r,function(e,t){return p+=t.length,p>=o?(c=e,!1):(p+=l,void 0)}),r[c]=a,a=r.join(i.multipleSeparator)}(!i.wordLimit||r.length<i.wordLimit)&&(a+=i.multipleSeparator),g(!0)}else b.val()&&b.val().substr(0,1)!=a.substr(0,1)&&g(!0);return i.appendSpaceOnSelection&&(a+=" "),b.val(a),i.hideOnSelect||d(),b.trigger("result",[s.data,s.value]),b.selection(a.length,a.length),!0}function s(t,o){var s=b.val(),n=!1;if(s||y==s||w!=v.DEL&&w!=v.BACKSPACE||(n=!0),w==v.DEL)return x.hide(),i.showNoResults&&P.hide(),n&&b.trigger("empty"),void 0;if(","==e.trim(i.multipleSeparator)&&i.stripSpacesAfterWords){for(var r=s.split(","),l=0,u=r.length;u>l;l++)r[l]=e.trim(r[l]);s=r.join(", "),b.val()!=s&&b.val(s)}if(o||s!=y)if(y=s,s=a(s),s.length>=i.minChars){if(i.matchCase||(s=e.trim(s.toLowerCase())),!s)return;(b.data("container")||b).addClass(i.loadingClass),g(!0),b.trigger("request"),p(s,c,d)}else g(!0),f(),x.hide(),i.showNoResults&&P.hide(),n&&b.trigger("empty")}function n(t){return t?i.multiple?e.map(t.split(i.multipleSeparator),function(i){return e.trim(t).length?e.trim(i):null}):[e.trim(t)]:[""]}function a(o){if(!i.multiple)return o;var s=n(o);if(1==s.length)return s[0];var a=e(t).selection().start;return s=a==o.length?n(o):n(o.replace(o.substring(a),"")),s[s.length-1]}function r(o,s){i.autoFill&&a(b.val()).toLowerCase()==o.toLowerCase()&&w!=v.BACKSPACE&&(b.val(b.val()+s.substring(a(y).length)),e(t).selection(y.length,y.length+s.length))}function l(){clearTimeout(k),k=setTimeout(d,200),i.showNoResults&&P.hide()}function d(){x.visible(),x.hide(),clearTimeout(k),f(),i.mustMatch&&b.search(function(e){if(!e)if(i.multiple){var t=n(b.val()).slice(0,-1);b.val(t.join(i.multipleSeparator)+(t.length?i.multipleSeparator:""))}else b.val(""),b.trigger("result",null)})}function c(e,t){t&&t.length&&C?(f(),i.weighted===!0&&t.sort(function(e,t){return t.weight-e.weight}),x.display(t,e),r(e,t[0].value),x.show()):d()}function p(o,s,r,l){if(o){if(i.matchCase||(o=o.toLowerCase()),i.substitute)for(var c in i.substitute)o=o.replace(RegExp(c,"g"),i.substitute[c]);if($){var f=b.data("select").getData(o);if(f)return s(o,[f]),void 0;$=!1}var m=i.subsetContains?l:l?null:!1,v=_.load(o,m);if(v&&v.length)i.showNoResults&&P.hide(),s(o,v);else if(D===!0&&"string"==typeof i.url&&i.url.length>0&&(null!=i.jsonPath&&i.queryPlaceholderInUrl?!_.load(o.substr(0,1),m):!0)){var k={timestamp:+new Date};e.each(i.extraParams,function(e,t){k[e]="function"==typeof t?t():t});var y=function(a){if(e.isEmptyObject(a))return x.emptyList(),r(o),i.showNoResults&&P.show(),void 0;i.cacheable===!0&&g(!1);var l,d=n(e(t).val()),c=d[d.length-1];if(i.matchCase||(c=c.toLowerCase()),"json"==i.dataType&&null!=i.jsonPath){if(l=i.parseJson?i.parseJson(a):u(a),i.matchContains)_.addAfterFlush(o.substr(0,1),l);else for(var f=0;o.length>f;f++)_.addAfterFlush(o.substr(0,f+1),l);return c!=o?p(c,s,r):(a=_.load(o,m),s(o,a)),void 0}l=i.parse?i.parse(a):h(a),i.data=a,_.add(o,l),s(o,l)},w="";if(i.queryPlaceholderInUrl){var C=i.cacheOnFullTerm?encodeURIComponent(o):encodeURIComponent(o.substr(0,1));w=i.url.replace(i.queryPlaceholderInUrl,C)}if("json"==i.dataType&&null!=i.jsonPath){var j=""===w?i.url:w;if(e.Autocompleter.requestDataLoading[j])return e.Autocompleter.requestDataLoading[j].push(s),void 0;e.Autocompleter.requestData[j]?y(e.Autocompleter.requestData[j]):(e.Autocompleter.requestDataLoading[j]=[s],s=function(){for(var t=0,i=e.Autocompleter.requestDataLoading[j].length;i>t;t++)e.Autocompleter.requestDataLoading[j][t].apply(this,arguments);e.Autocompleter.requestDataLoading[j]=null},(odesk&&odesk.ajax||e.ajax)({dataType:"json",url:j,success:function(t){e.Autocompleter.requestData[j]=t,y(t),b.trigger("loaded",C)},error:function(t){e.Autocompleter.requestDataLoading[j]=null,e.Autocompleter.requestData[j]={},404==t.status?(x.emptyList(),r(o),i.showNoResults&&P.show()):d()}}))}else(odesk&&odesk.ajax||e.ajax)({mode:"abort",port:"autocomplete"+t.name,dataType:i.dataType,url:""===w?i.url:w,data:e.extend({q:a(o),limit:i.max},k),success:function(e){y(e)}})}else x.emptyList(),r(o),i.showNoResults&&P.show()}}function u(t){var o=[],s=null,n=i.jsonPath;for(var a in n){var r=n[a];""!=r&&(s=null==s?t[r]:s[r])}if(null==s)return[];for(var l=s,d=0;l.length>d;d++){var c=l[d];c.name=e.trim(c.name),c.name&&(o[o.length]={data:[c.name,c.weight],value:c.name,weight:c.weight,result:c.name})}return o}function h(t){for(var o=[],s=t.split("\n"),n=0;s.length>n;n++){var a=e.trim(s[n]);a&&(a=a.split("|"),o[o.length]={data:a,value:a[0],result:i.formatResult&&i.formatResult(a,a[0])||a[0]})}return o}function f(){(b.data("container")||b).removeClass(i.loadingClass)}function g(e){D=e}function m(e){i.url=e}var v={UP:38,DOWN:40,RIGHT:39,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8},b=e(t).attr("autocomplete","off").addClass(i.inputClass);b.data("options",i);var k,y="",_=e.Autocompleter.Cache(i,b,n);b.data("cache",_);var w,C=0,j={mouseDownOnSelect:!1},x=e.Autocompleter.Select(i,t,o,j);b.data("select",x);var S,P=e.Autocompleter.NoResultsItem(i,t),D=!0,$=!1;e.Autocompleter.requestData=e.Autocompleter.requestData||{},e.Autocompleter.requestDataLoading=e.Autocompleter.requestDataLoading||{},b.bind("keydown.autocomplete, keyup.autocomplete",function(t){switch(C=1,w=t.keyCode,t.keyCode){case v.UP:if("keyup"==t.type)return;t.preventDefault(),x.visible()?x.prev():s(0,!0);break;case v.DOWN:if("keyup"==t.type)return;t.preventDefault(),x.visible()?x.next():s(0,!0);break;case v.PAGEUP:if("keyup"==t.type)return;t.preventDefault(),x.visible()?x.pageUp():s(0,!0);break;case v.PAGEDOWN:if("keyup"==t.type)return;t.preventDefault(),x.visible()?x.pageDown():s(0,!0);break;case i.multiple&&","==e.trim(i.multipleSeparator)&&v.COMMA:case v.TAB:case v.RETURN:if(t.keyCode==v.TAB&&t.shiftKey)return;if("keyup"==t.type)return;b.setRequestFromSelectList(!0),o()?(t.keyCode==v.TAB&&i.appendSpaceOnSelection&&(t.preventDefault(),S=!0),i.submitOnSelection||(t.preventDefault(),S=!0)):x.hide();break;case v.RIGHT:i.completeWithRightArrow&&x.visible()&&(o()?t.preventDefault():x.hide());break;case v.ESC:if("keyup"==t.type)return;x.hide(),i.showNoResults&&P.hide();break;default:var n=i.autocompleteRequestTimeout?parseInt(i.autocompleteRequestTimeout,10):0;n?(this.autocompleteTimer&&clearTimeout(this.autocompleteTimer),this.autocompleteTimer=setTimeout(function(){s()},n)):s()}}).focus(function(){C++}).blur(function(){C=0,j.mouseDownOnSelect||l()}).click(function(){i.hideOnClick?x.visible()&&(new Date).getTime()-x.getShowTime()>300?x.hide():x.show():!x.visible()&&b.val()&&s(0,!0)}).change(function(){s()}).bind("search",function(t,i){function o(e,t){var o;if(t&&t.length)for(var s=0;t.length>s;s++)if(t[s].result.toLowerCase()==e.toLowerCase()){o=t[s];break}"function"==typeof i?i(o):b.trigger("result",o&&[o.data,o.value])}e.each(n(b.val()),function(e,t){p(t,o,o,!0)})}).bind("flushCache",function(){_.flush()}).bind("setOptions",function(){e.extend(i,arguments[1]),"data"in arguments[1]&&_.populate()}).bind("unautocomplete",function(){x.unbind(),b.unbind(),e(t.form).unbind(".autocomplete")}).bind("setRequestFromSelectList",function(){$=arguments[1]}).bind("setMakeNewRequestFlag",function(){g(arguments[1])}).bind("setUrl",function(){m(arguments[1])})},e.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",listHeaderItemClass:"ac_header_item",minChars:1,delay:400,matchCase:!1,matchSubset:!0,matchContains:!1,subsetContains:!1,cacheLength:10,max:100,mustMatch:!1,extraParams:{},selectFirst:!0,formatItem:function(e){return e[0]},formatMatch:null,autoFill:!1,width:0,multiple:!1,multipleSeparator:", ",scroll:!0,scrollHeight:180,highlight:function(e,t,i,o){var s=t.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1");return"word"==o&&(s="(?:^|\\s)"+s),this.multipleWordSearch?e.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)(^| )("+s+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1$2</strong>"):e.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+s+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>")},stripSpacesAfterWords:!0,cacheable:!1,multipleWordSearch:!1,weighted:!1,queryPlaceholderInUrl:null,appendItem:null,jsonPath:null,showNoResults:!1,cacheOnFullTerm:!1,submitOnSelection:!1,appendSpaceOnSelection:!1,completeWithRightArrow:!1,hideOnSelect:!1,forceSorting:!0},e.Autocompleter.Cache=function(t,i,o){function s(e,i,o){t.matchCase||(e=e.toLowerCase());var s=e.indexOf(i);return"word"==t.matchContains&&(s=e.toLowerCase().search("(?:^|\\s)"+i.toLowerCase())),-1==s?!1:0==s||o}function n(e,t,i){var o=e.split(" ");for(var n in o)if(word=o[n],s(word,t,i))return!0}function a(e,i){h>t.cacheLength&&c(),u[e]||h++,u[e]=i}function r(e,t){var i=e.split(" ");return i[t]===void 0?null:i[t].charAt(0).toLowerCase()}function l(){if(!t.data)return!1;var i={},o=0;t.url||(t.cacheLength=1),i[""]=[];for(var s=0,n=t.data.length;n>s;s++){var l=t.data[s];l="string"==typeof l?[l]:l;var d=t.formatMatch(l,s+1,n);if(d!==!1){var c=d.charAt(0).toLowerCase(),p=1;do{i[c]||(i[c]=[]);var u={value:d,data:l,result:t.formatResult&&t.formatResult(l)||d};i[c].push(u),c=r(d,p++)}while(t.multipleWordSearch===!0&&null!=c);o++<t.max&&i[""].push(u)}}e.each(i,function(e,i){t.cacheLength++,a(e,i)})}function d(e,i){h>t.cacheLength&&c(),u[e]||h++;for(var o=[],a=0,r=0;i.length>r;r++){var l=i[r].value;if(t.matchContains)o[a++]=i[r];else if(t.matchSubset){var d=s(l,e,!0);!d&&t.multipleWordSearch&&(d=n(l,e,!0)),d&&(o[a++]=i[r])}else try{null!==l.match(RegExp("(^| )"+e,"gi"))&&(o[a++]=i[r])}catch(p){}}u[e]=o}function c(){u={},h=0}function p(e){return e.sort(function(e,t){return t.weight-e.weight}),e}var u={},h=0;return setTimeout(l,25),{flush:c,add:a,populate:l,addAfterFlush:d,getData:function(){return u},load:function(a,r){if(!t.cacheLength||!h)return null;var l,d,c,f=t.matchContains;if(t.url&&(t.subsetContains&&r||null!=r)&&(f=r),1>=t.minChars&&f){var g=[];for(var m in u)if(m.length>0){var v=u[m];e.each(v,function(e,i){s(i.value,a,t.matchContains)&&g.push(i)})}l=g}else if(u[a])l=t.weighted===!0?p(u[a]):u[a];else if(t.matchSubset)for(d=a.length-1;d>=t.minChars;d--)v=u[a.substr(0,d)],v&&(g=[],e.each(v,function(e,i){var o=s(i.value,a,!0);!o&&t.multipleWordSearch&&(o=n(i.value,a,!0)),o&&(g[g.length]=i)}),l=t.weighted===!0?p(g):g);var b={};if(i.data("values"))b=i.data("values");else if(i.data("tokenizer"))b=i.data("tokenizer").items;else{var k=o(i.val());for(d=0,c=k.length-1;c>d;d++)b[k[d]]=1}if(l&&!e.isEmptyObject(b))for(l=e.extend(!0,[],l),d=0,c=l.length;c>d;d++)b[t.matchCase?l[d].value:l[d].value.toLowerCase()]&&(l.splice(d,1),d--,c--);return l&&t.forceSorting&&l.sort(function(e,t){if(e.value==a)return-1;if(t.value==a)return 1;var i=e.value.indexOf(a),o=t.value.indexOf(a);return 0==i&&0!=o?-1:0==o&&0!=i?1:e.value.localeCompare(t.value)}),l}}},e.Autocompleter.Select=function(t,i,o,s){function n(){if(y){var s=document.body;if(null!=t.appendItem&&(s=t.appendItem),g=e("<div/>").hide().addClass(t.resultsClass).appendTo(s),null!=t.initCss)for(var n in t.initCss){var r=t.initCss[n];g.css(r.css,r.value)}else g.css("position","absolute");var l;m=e("<ul />").appendTo(g).mouseover(function(t){a(t).nodeName&&"LI"==a(t).nodeName.toUpperCase()&&(b=e("li",m).removeClass(v.ACTIVE).index(a(t)),e(a(t)).addClass(v.ACTIVE))}).click(function(t){var s=e(a(t));if(s.length)return s.addClass(v.ACTIVE),i.focus(),e(i).setRequestFromSelectList(!0),o(l),e(i).trigger("select:click",[s,i]),!1}).mousedown(function(t){t.preventDefault(),l=e(i).selection().start}),t.width>0&&g.css("width",t.width),y=!1}}function a(e){for(var t=e.target;t&&"LI"!=t.tagName;)t=t.parentNode;return t?t:[]}function r(i){h.slice(b,b+1).removeClass(v.ACTIVE),l(i);var o=h.slice(b,b+1).addClass(v.ACTIVE);if(t.scroll){var s=0;if(e.merge(h.slice(0,b),o.prevAll("."+t.listHeaderItemClass)).each(function(){s+=this.offsetHeight}),0==b){var n=o.prev("."+t.listHeaderItemClass);n.length>0&&(s-=n.get(0).offsetHeight)}var a=m.data("jsp");s+o[0].offsetHeight-(a?a.getContentPositionY():m.scrollTop())>m[0].clientHeight?a?a.scrollToY(s+o[0].offsetHeight-m.innerHeight()):m.scrollTop(s+o[0].offsetHeight-m.innerHeight()):(a?a.getContentPositionY():m.scrollTop())>s&&(a?a.scrollToY(s):m.scrollTop(s))}}function l(e){b+=e,0>b?b=h.size()-1:b>=h.size()&&(b=0)}function d(e){return t.max&&e>t.max?t.max:e}function c(){m.empty();var o=d(f.length),s=i.value.split(", ");s.pop();for(var n=0;o>n;n++)if(f[n])if("header"!=f[n].type){var a=t.formatItem(f[n].data,n+1,o,f[n].value,k);if(a!==!1){var r=e("<li/>").html(t.highlight(a,k,f[n],t.matchContains)).attr("data-term",f[n].value).appendTo(m)[0];e.data(r,"ac_data",f[n])}}else e("<div />").addClass(t.listHeaderItemClass).html(f[n].label).appendTo(m);h=m.find("li"),t.selectFirst&&f[0].selectFirst!==!1&&(h.slice(0,1).addClass(v.ACTIVE),b=0),e.fn.bgiframe&&m.bgiframe()}function p(i){s.mouseDownOnSelect=!!e(i.target).closest("."+t.resultsClass+", ul.acInput, .oTagsField").length}function u(){t.scroll&&(m.scrollTop(0),m.css({maxHeight:t.scrollHeight,overflow:"auto"}));var e=t.customScroll;e&&(m.data("jsp",null),m.jScrollPane("object"==typeof e?e:{}))}var h,f,g,m,v={ACTIVE:"isCurrent"},b=-1,k="",y=!0,_=0;return{display:function(e,t){n(),f=e,k=t,c(),g.find("li").length||g.hide()},next:function(){r(1)},prev:function(){r(-1)},pageUp:function(){0!=b&&0>b-8?r(-b):r(-8)},pageDown:function(){b!=h.size()-1&&b+8>h.size()?r(h.size()-1-b):r(8)},hide:function(){this.visible()&&(g&&g.hide(),h&&h.removeClass(v.ACTIVE),b=-1,e(document).unbind("mousedown",p))},visible:function(){return g&&g.is(":visible")},current:function(){return this.visible()&&(h.filter("."+v.ACTIVE)[0]||t.selectFirst&&h[0])},align:function(){var o=e(i).data("container"),s=o||e(i),n=s.offset(),a="string"==typeof t.width||t.width>0?t.width:s.width()+parseInt(s.css("padding-left"),10)+parseInt(s.css("padding-right"),10);if("fixed"==g.css("position")){var r=e(window);n.top-=r.scrollTop(),n.left-=r.scrollLeft()}var l=parseInt(g.css("border-left-width"),10)+parseInt(g.css("border-right-width"),10);isNaN(l)||(a-=l),g.css({minWidth:a,top:n.top+s[0].offsetHeight,left:n.left})},show:function(){return this.visible()?(u(),void 0):(g&&g.find("li").length&&(this.align(),g.show(),_=(new Date).getTime(),u(),e(document).bind("mousedown",p),e(i).trigger("select:show",[f,m])),void 0)},selected:function(){var t=h&&h.filter("."+v.ACTIVE).removeClass(v.ACTIVE);return t&&t.length&&e.data(t[0],"ac_data")},emptyList:function(){m&&m.empty()},unbind:function(){g&&g.remove()},removeByTerm:function(o){if(o){var s=this.getSelected(o),n=s.prevAll(":visible:first"),a=s.nextAll(":visible:first");n.length>0&&n.is("."+t.listHeaderItemClass)&&(0==a.length||a.is("."+t.listHeaderItemClass))&&n.hide(),s.remove(),h=m.find("li"),b=-1,0==h.length&&(this.hide(),e(i).trigger("selectListEmpty"))}},getSelected:function(t){var i=e();return $_listItems=h&&h.length?h:m&&m.find("li"),t=(t||"").toLowerCase(),$_listItems&&$_listItems.each(function(){var o=e(this),s=o.attr("data-term");return s&&s.toLowerCase()===t?(i=o,!1):void 0}),i},getData:function(e){var t=this.getSelected(e);return t.length?t.data("ac_data"):!1},getShowTime:function(){return _}}},e.Autocompleter.NoResultsItem=function(t,i){var o,s,n;return o=e("<div/>").hide().addClass(t.resultsClass).appendTo(document.body).css("position","absolute"),s=e("<ul/>").appendTo(o),t.noResultsHtml?s.html(t.noResultsHtml):e("<li/>").addClass("oBad").html("no results found").appendTo(s)[0],{show:function(){if(!n){n=!0,t.onNoResults&&t.onNoResults(e(i),t,s),t.noResultsHtml&&s.html(t.noResultsHtml);var a=e(i).data("container"),r=a.length?a:e(i),l=r.offset(),d="string"==typeof t.width||t.width>0?t.width:r.width()+parseInt(r.css("padding-left"),10)+parseInt(r.css("padding-right"),10),c=parseInt(o.css("border-left-width"),10)+parseInt(o.css("border-right-width"),10);isNaN(c)||(d-=c),o.css({minWidth:d,top:l.top+r[0].offsetHeight,left:l.left}).show()}},hide:function(){n=!1,t.onNoResultsHide&&t.onNoResultsHide(e(i),t,s),o.hide()}}},e.fn.selection=function(t,i){if(void 0!==t)return this.each(function(){if(this.offsetWidth)if(this.createTextRange){var o=e(this).attr("maxlength");e(this).attr("maxlength",1e4);var s=this.createTextRange();void 0===i||t==i?(s.move("character",t),s.select()):(s.collapse(!0),s.moveStart("character",t),s.moveEnd("character",i),s.select()),e(this).attr("maxlength",o)}else this.setSelectionRange?this.setSelectionRange(t,i):this.selectionStart&&(this.selectionStart=t,this.selectionEnd=i)});var o=this[0];if(o.createTextRange){if(o!=document.activeElement)return{start:0,end:0};var s=this.attr("maxlength");this.attr("maxlength",1e4);var n=document.selection.createRange(),a=o.value,r="<->",l=n.text.length;n.text=r;var d=o.value.indexOf(r);return o.value=a,this.selection(d,d+l),this.attr("maxlength",s),{start:d,end:d+l}}return void 0!==o.selectionStart?{start:o.selectionStart,end:o.selectionEnd}:void 0}}(jQuery),function(e){new odesk.Class("odesk.FP2345LinkedPromoLogging","odesk.AbstractWidget",{options:{sublocation:"linkedContractsSMF",tryItNowLinkName:"Try now",learnMoreLinkName:"Learn More",selectors:{tryItNowLink:"#smfFp2342TryNow",learnMoreLink:"#smfFp2342LearnMore"},data:{}},init:function(t){var i=this;e(this.options.selectors.tryItNowLink).length>0&&odesk.logging.log("impression",t,this.options.sublocation),e(this.options.selectors.tryItNowLink).click(function(){odesk.logging.logCustomData("click",t,i.options.sublocation,[{type:"link",id:1,link:i.options.tryItNowLinkName}])}),e(this.options.selectors.learnMoreLink).click(function(){odesk.logging.logCustomData("click",t,i.options.sublocation,[{type:"link",id:2,link:i.options.learnMoreLinkName}])})}})}(jQuery),function(e){new odesk.Class("odesk.PreviewDialog","odesk.AbstractWidget",{options:{dialog:{contentClass:"",autoOpen:!1,modal:!0,resizable:!1,draggable:!1,width:"auto",height:"auto",position:{my:"center",at:"center",of:window,using:function(t){var i=e(this),o=i.data("wrapper"),s=e(window),n=50;if(o){var a=Math.max(n,s.height()/2-i.height()/2);i.css("top",a)}else{n=s.scrollTop()+n;var r=i.css(t).offset(),l=t.top;0>r.top&&(l-=r.top),n>l&&i.css("top",n)}i.css("left",s.width()/2-i.width()/2)}}}},init:function(t,i){t&&(this.$element=e(t)),e.extend(!0,this.options,i),this.options.wrapper&&(this.options.dialog.appendTo=this.$wrapper=e(this.options.wrapper)),this.addEvents()},getDialog:function(){return this.$element||(this.$element=e("<div />")),this._dialogInit||(this._dialogInit=!0,this.$element.dialog(this.options.dialog).addClass(this.options.dialog.contentClass)),this.$element},setContent:function(e){return this.getDialog().html(e),this},open:function(){var t=this,i=this.getDialog();if(!this.isOpen()){var o=i.dialog("option","close");o&&i.dialog("option","close",null),i.dialog("open"),this.options.wrapper?(i.dialog("option","close",function(){t.$wrapper.detach(),e("body").css("overflow","auto"),o&&o.apply(this,arguments)}),this.$wrapper.appendTo("body"),i.parent().data("wrapper",this.$wrapper),e("body").css("overflow","hidden")):(o&&i.dialog("option","close",o),i.data("uiDialog").overlay.on("click",this.close.bind(this)))}e("body").trigger("resize")},close:function(){this.getDialog().dialog("close")},isOpen:function(){return this.getDialog().dialog("isOpen")},addEvents:function(){var t=this,i=this.getDialog();i.dialog("widget").on("click",this.options.selectors.close,this._closeHandler.bind(this)),e(window).on("keydown",function(e){t.isOpen()&&(27==e.which&&t.close(),t.options.hideArrows||(37==e.which?t.openPrevious():39==e.which&&t.openNext()))}),this.$wrapper.on("click",function(i){var o=e(i.target);o.find(".oPreviewDialogMain").length&&t.close()}),e(window).on("resize",this._fixPosition.bind(this))},_fixPosition:function(){if(this.isOpen()){var e=this.getDialog();e.dialog("option","position",e.dialog("option","position"))}},getPreviewContainer:function(){return this.getDialog().find(".oProjectPreview")},getRelatedData:function(){return this.getPreviewContainer().data("project-data")},getRelatedElement:function(){return this.getPreviewContainer().data("project-item")},setRelatedData:function(e){return this.getPreviewContainer().data("project-data",e),this},setRelatedElement:function(e){return this.getPreviewContainer().data("project-item",e),this},_getLeftArrow:function(){return this.getDialog().find(".oPreviewDialogLeft")},_getRightArrow:function(){return this.getDialog().find(".oPreviewDialogRight")},toggleLeftArrow:function(e){this._getLeftArrow().prop("disabled",!e)},toggleRightArrow:function(e){this._getRightArrow().prop("disabled",!e)},openPrevious:function(){var e=this._getLeftArrow();e.length&&!e.prop("disabled")&&(e.trigger("mouseup"),this.ctx.mediator.publish(this.events.left))},openNext:function(){var e=this._getRightArrow();e.length&&!e.prop("disabled")&&(e.trigger("mouseup"),this.ctx.mediator.publish(this.events.right))},_closeHandler:function(e){e.preventDefault(),e.stopPropagation(),this.close()},_onClose:function(){this.ctx.mediator.publish(this.events.close)}})}(jQuery),function(e){new odesk.Class("odesk.Flagging","odesk.AbstractWidget",{options:{submitBtn:".oBtnPrimary",error:".oFormWarning",successMessage:"Thanks for flagging!",hiddenClass:"isHidden"},init:function(t,i){this.$element=e(t),this.$container=this.$element.next(),e.extend(!0,this.options,i),this.$successMessage=e('<span class="oRight oMute"  id="successfulFlaggingMessage" />').text(this.options.successMessage).height(this.$element.height()).addClass(this.options.hiddenClass),this.$element.before(this.$successMessage),this.$container.on("click",this.options.submitBtn,this._submit.bind(this))},_submit:function(){var e=[],t=[];return this.$container.find(":checkbox").each(function(){(this.checked?e:t).push(this.value)}),odesk.ajax({url:odesk.env.API_ROOT+"hr/v1/flagging.json",type:"post",data:{flagged_item:"user",http_method:"put",func:"toggleFlag",type_id:e,unset_type_id:t,flagged_subitem:this.$element.attr("data-flaggedSubitem"),flagged_subitem_id:this.$element.attr("data-flaggedSubitemId"),flagged_item_id:this.$element.attr("data-userId")},error:this._onError.bind(this)}),this.$element.addClass(this.options.hiddenClass),this.$successMessage.removeClass(this.options.hiddenClass),this.$element.flyout("hide"),!1},_onError:function(){this.$container.find(this.options.error).removeClass(this.options.hiddenClass),this.$successMessage.addClass(this.options.hiddenClass),this.$element.removeClass(this.options.hiddenClass).flyout("show")}})}(jQuery),function(e){new odesk.Class("odesk.FileUploader","odesk.AbstractWidget",{options:{selectors:{submitButton:".oBtnPrimary",cancelButton:".oBtnCancel"},template:{choose:"",tooLarge:"",unknownFormat:""},support:{types:".*",accept:"",extensions:[]},dialog:{resizable:!1,minHeight:140,width:660,autoOpen:!1,modal:!0},maxFileSize:odesk.env.USER_MAX_FILE_UPLOAD,documentDropping:!1,translates:{}},init:function(t,i){this.$element=e(t),e.extend(!0,this.options,i),this.setProperties()},destroy:function(){this.uploader.destroy();for(var e in this._dialogs)this._dialogs[e].dialog("isOpen")&&this._dialogs[e].dialog("close"),this._dialogs[e].remove()},setProperties:function(){this._fileName="",this._fileElement=!1,this._dialogs={},this._dialogInits={choose:this._initChooseDialog,unknown:this._initUnknownDialog,tooLarge:this._initTooLargeDialog},this.uploader=new odesk.Uploader,this.support=this.uploader.getSupport()},renderTemplate:function(t,i){return e.tmpl(odesk.templates[this.options.template[t]],i)},isElement:function(e){return"object"==typeof e&&e.tagName},getElementFile:function(e){var t=this.isElement(e)?e.files&&e.files.length&&e.files[0]:e;return"object"==typeof t&&t.name?t:!1},isFileSelected:function(e){return!(!e||!(this.getElementFile(e)||this.isElement(e)&&e.value))},isElementFile:function(t){var i=new e.Deferred,o=this.getElementFile(t);if(o){var s=(o.size||o.fileSize,this.uploader.getSupport());s.fileReader?o.type||o.size||o.fileSize?this.uploader.readAsDataURL(o,{error:function(e,t){"ABORT"!==t&&i.reject()},loadstart:function(){this.abort(),i.resolve()},load:function(){this.abort(),i.resolve()}}):i.reject():i.resolve()}else this.isElement(t)?i.resolve():i.reject();return i.promise()},checkFileElement:function(e){var t=this.getElementFile(e);if(t){if("string"==typeof t.type&&this.options.support.types&&!t.type.match(this.options.support.types))return this.showError("unknown"),!1;if((t.size||t.fileSize)>this.options.maxFileSize)return this.showError("tooLarge"),!1}else if(this.isElement(e)&&e.value&&this.options.support.extensions&&this.options.support.extensions.length&&!e.value.match(RegExp("\\.("+this.options.support.extensions.join("|")+")$","i")))return this.showError("unknown"),!1;return!0},createFileElement:function(t,i){var o=this;return this.uploader.createFileElement(t,e.extend({},{name:this._fileName,accept:this.options.support.accept,inputClass:"ignored"},i)).bind("change",function(){o.onFileChange&&o.onFileChange(this)})},resetFileElement:function(t){if(t=t||this._fileElement,t&&this.isElement(t)){var i=e(t);i.wrap("<form/>").closest("form").get(0).reset(),i.unwrap()}this._fileElement=!1},setFileElement:function(e){e&&e===this._fileElement||this.resetFileElement(this._fileElement),this._fileElement=e||!1},getChangedFileElement:function(){return this._fileElement},showError:function(e){this.closeDialogs(),this.openDialog(e)},initDialog:function(e){var t=!1;return this._dialogs[e]?!0:this._dialogInits[e]&&(t=this._dialogInits[e].call(this))?(this._dialogs[e]=t,!0):!1},openDialog:function(e){return this.initDialog(e)?this._dialogs[e].dialog("open"):!1},closeDialogs:function(){for(var e in this._dialogs)this._dialogs[e].dialog("isOpen")&&this._dialogs[e].dialog("close")},initCommonDialog:function(t,i,o){var s=this.renderTemplate(t,e.extend(i,this.options.translates));return s.dialog(e.extend({},this.options.dialog,{title:s.data("title")},o||{})),s.find(this.options.selectors.cancelButton).bind("click",function(e){e.preventDefault(),s.dialog("close")}),s},_initChooseDialog:function(){var e=this.initCommonDialog("choose",{extensions:this.options.support.extensions,formattedMaxSize:odesk.string.fmtSize(this.options.maxFileSize)});return this.createFileElement(e.find(this.options.selectors.submitButton)),e},_initUnknownDialog:function(){var e=this.initCommonDialog("unknownFormat",{extensions:this.options.support.extensions});return this.createFileElement(e.find(this.options.selectors.submitButton)),e},_initTooLargeDialog:function(){var e=this.initCommonDialog("tooLarge",{formattedMaxSize:odesk.string.fmtSize(this.options.maxFileSize)});return this.createFileElement(e.find(this.options.selectors.submitButton)),e}})}(jQuery),function(e){new odesk.Class("odesk.InterviewOverlayEventLogging","odesk.EventLogging",{options:{qtAlocation:"F2737_InterviewOverlay",contactContractorWidget:".jsContactContractorWidget",formSelector:"#jsInviteContractorForm",location:"invitation",logQueryString:!1,modal:!1,defaultJob:-1},loggingMethod:odesk.logging.logAtsEventToProxy,impressionSublocations:{invitation_overlay:{container:"body",element:".jsContactContractorWidget",type:"comecustomtype"}},selectedJob:-1,init:function(t){var i=this;e.extend(i.options,t),i.options.modal||(i.options.jobs=[],e(i.options.formSelector).find("#jsOpening option").each(function(t,o){i.options.jobs.push({name:e(o).prop("label"),ref:e(o).prop("value")})}));var o=function(){return i._getFormData(e(i.options.formSelector))};i.logEventTriggeredSublocations("post_job","mouseup",{invitation_overlay:{element:".jsSaveAndPostJob",container:"body",sync:!0,extendData:o}});var s={invitation_confirmation:{id:"p_id",element:".jsSimilarContractors .jsEpitome",parent:".oMed",container:"body",type:"contractor",sync:!0}};e.extend(i.impressionSublocations.invitation_overlay,{extendData:function(){return i._getFormData(e(i.options.formSelector))}});var s={invitation_confirmation:{id:"p_id",element:".jsSimilarContractors .jsEpitome",parent:".oMed",container:"body",type:"contractor",sync:!0}};this.logEventTriggeredSublocations("view_contractor_profile","mouseup",s),this.logEventTriggeredSublocations("view_sent_invitation","mouseup",{invitation_confirmation:{element:".jsMsgSuccess ul li a:not(.jsJobApplications)",container:"body",type:"contractor",sync:!0,extendData:function(){return{id:i._getUserId(),selected_job:i.selectedJob}}}}),this.logEventTriggeredSublocations("view_opening","mouseup",{invitation_confirmation:{element:".jsMsgSuccess ul li a.jsJobApplications",container:"body",type:"contractor",sync:!0,extendData:function(){return{id:i._getUserId(),selected_job:i.selectedJob}}}}),this.initDismissEvents(),this.initChangeEvents()},initChangeEvents:function(){var t=this;e("body").on("change","#jsOpening",function(){if(e(t.options.formSelector+" #jsOpening").val()!=t.options.defaultJob){var i={extendData:function(){return t._getFormData(e(t.options.formSelector))}};t.doLogging("select_opening",i,"invitation_overlay")}})},setLocation:function(e){this.options.location=e},initDismissEvents:function(){var t=this,i=".jsInviteContractorDialog .ui-widget-overlay, .jsInviteContractorDialog .oBtnCancel, .jsInviteContractorDialog .ui-dialog-titlebar-close";e("body").on("mouseup",i,function(){var i={extendData:function(){var e=[];
if(t.options.contractors.length>1)for(var i=0;t.options.contractors.length>i;i++)e.push(t.options.contractors[i].dev_recno);else e=t.options.contractors[0].dev_recno;return{type:"contractor",id:e}}},o=1==e("#jsMessage").length?"invitation_overlay":"invitation_confirmation";t.doLogging("dismiss_overlay",i,o)})},setSelectedJob:function(e){this.selectedJob=e},setAtsData:function(t){e.extend(this.options,t)},logErrorEvent:function(e,t){t||(t="invitation_overlay");var i=this,o={extendData:function(){return{error_message:e,type:"contractor",id:i._getUserId()}}};this.doLogging("impression",o,t)},logSendInvitationEvent:function(e){var t=this,i={extendData:function(){return{type:"contractor",id:t._getUserId(),selected_job:e.job_key}}};this.doLogging("send_invitation",i,"invitation_overlay")},logSuccessEvent:function(t,i){var o=this,s={extendData:function(){return{type:"contractor",id:o._getUserId(),selected_job:t.job_key,mlt:i}}};this.doLogging("impression",s,"invitation_confirmation"),i&&e(".jsContactContractorWidget .jsSimilarContractor").each(function(t,i){var s=e(i).attr("p_id");o.doLogging("impression",{extendData:function(){return{type:"contractor",id:s}}},"invitation_confirmation")})},_getFormData:function(e){var t=this._getJobFormData(e.find("#jsOpening"));return t.id=this._getUserId(),t},_getUserId:function(){var e=[];if(this.options.contractors.length>1)for(var t=0;this.options.contractors.length>t;t++)e.push(this.options.contractors[t].dev_recno);else e=this.options.contractors[0].dev_recno;return e},_getJobFormData:function(e){for(var t={},i=[],o=0;this.options.jobs.length>o;o++)i.push(this.options.jobs[o].ref);return t.type="contractor",t.selected_job=e.val(),t.jobs_list=i,t.num_opening=this.options.jobs.length,t}})}(jQuery),function(e){new odesk.Class("odesk.ProfilePreview","odesk.Lightbox",{options:{itemsSelector:"",itemLinkSelector:"",itemDialogTitleSelector:"",itemContentSelector:"",primaryKey:"key",cyclicFlipping:!0,enableCache:!0,hasPager:!0},init:function(t,i){this.$element=e(t),e.extend(this.events,odesk.events.makeMap(this.name,["lessBlock"])),this._super(i),this._initItems(),this._addItemEvents()},_initItems:function(){var t=this.options;t.items=[],this.$element.find(t.itemsSelector).each(function(i,o){t.items[i]={key:i,$element:e(o).data("viewerKey",i)}}),t.totalCount=t.items.length},_addItemEvents:function(){var t=this;this.$element.on("click",this.options.itemLinkSelector,function(i){i.preventDefault();var o=e(i.target);if(o.length){var s=o.closest(t.options.itemsSelector);s.length&&t.renderByRef(s.data("viewerKey"))}return!1})},_preProcessing:function(e){var t=this.options;t.itemDialogTitleSelector&&e.$element&&(e.dialogTitle=e.$element.find(t.itemDialogTitleSelector).html()),t.itemContentSelector&&e.$element&&(e.content=e.$element.find(t.itemContentSelector).removeClass("isHidden")),this._super(e)},rescanItems:function(){this._initItems()}})}(jQuery),function(e){new odesk.Class("odesk.InviteInterviewSubmitLogging","odesk.EventLogging",{options:{location:"post_invitation",logQueryString:!1},clickSubLocations:{interview_invitation_sent_link:{element:"article.jsMsgSuccess ul li a:first",container:"body",sync:!0},view_all_candidates:{element:"a.jsJobApplications",container:"body",sync:!0},search_more_contractors:{element:"a.jsBackSearch",container:"body",sync:!0},similar_contractors:{element:"div.jsSimilarContractors a.jsEpitome",container:"body",parent:".jsSimilarContractor",type:"contractor",id:"p_id",position:"position",sync:!0}},mouseOverSublocations:{similar_contractors:{element:"div.jsSimilarContractors a.jsEpitome",container:"body",parent:".jsSimilarContractor",type:"contractor",id:"p_id",position:"position"}},init:function(){var t=e("body");this.options.qtAlocation="",odesk.pageConfig.AUSER&&t.hasClass("F2416_MoreLikeThis-TreatmentOld")?this.options.qtAlocation="F2416-TreatmentOld":odesk.pageConfig.AUSER&&t.hasClass("F2416_MoreLikeThis-TreatmentNew")&&(this.options.qtAlocation="F2416-TreatmentNew"),this.logEventTriggeredSublocations("click","mouseup",this.clickSubLocations),this.logEventTriggeredSublocations("mouseover","mouseenter",this.mouseOverSublocations,1e3)}})}(jQuery),function(e){new odesk.Class("odesk.ShareToSocial","odesk.AbstractWidget",{init:function(t){this.$element=e(t),odesk.social.facebook&&odesk.social.facebook.register(function(e){var t=e.data;return t.caption||(t.caption="{*actor*}'s profile has been updated on oDesk"),t.name||(t.name="View my profile"),t.description=t.description.replace(/\\n/g,"<br />"),t},this.$element),odesk.social.twitter&&odesk.social.twitter.register("I'm ready to work on @oDesk #oDesk",this.$element)}})}(jQuery),function(e){new odesk.Class("odesk.ProjectPreviewDialog","odesk.PreviewDialog",{options:{selectors:{reportLink:".jsReportProjectLink",close:".jsDialogClose"},wrapper:'<div class="oPopupWrapper"></div>',dialog:{dialogClass:"oPopupEmpty",width:700},hideArrows:!1,contractorKey:null},init:function(t,i){this.options.dialog.open=this._uiFix.bind(this),this.options.dialog.close=this._onClose.bind(this),e.extend(this.options,i),this._super(t,i),e.extend(this.events,odesk.events.makeMap(this.name,["left","right","close"]))},_formatPrice:function(e,t){return e?e.replace(/[\d.]+/,function(e){return odesk.string.groupDigits(e,t)}):null},loadProject:function(t,i,o){var s=this,n=e.Deferred();return(o=s.options.contractorKey||o)?(i||odesk.loading.show("Loading..."),odesk.ajax({rawValues:[-1],url:"/fwh-api/project/id/"+t+"/key/"+o,success:function(t){if(i||odesk.loading.hide(),!t||!t.projects)return n.reject(t&&t.error&&t.error.message?t.error.message:null),void 0;var o=t.projects;if(o.completionDate){var a=odesk.date.sparse(o.completionDate);o.completionDate=odesk.date.format(a,"%b %Y")}if(o.attachments&&o.attachments.length&&e.each(o.attachments,function(e,t){t.attachmentSize&&(t.attachmentSize=odesk.string.fmtSize(t.attachmentSize))}),o.skills.length&&(o.skillsString=o.skills.reverse().join()),odesk.pageConfig.subcategories20&&(o.subcategory=odesk.pageConfig.subcategories20[o.categoryRid]),o.assignment){var r=o.assignment;r.feedback&&(r.feedback.comment&&(r.feedback.comment=odesk.string.nl2br(odesk.string.procEntity(r.feedback.comment))),r.feedback.scorePercent=20*r.feedback.score,r.feedback.score=odesk.string.groupDigits(r.feedback.score,{decimalZeros:2})),r.hourlyRate=s._formatPrice(r.hourlyRate,{round:2}),r.totalHours=s._formatPrice(r.totalHours,{round:0}),r.totalFixed=s._formatPrice(r.totalFixed,{round:2})}n.resolve(o)},error:n.reject}),n.promise()):!1},_onLoadImage:function(e,t,i){i&&e.show(),e.data("loaded",!0).parent().removeClass("oLoadingSpinner"),this._uiFix(!this._isAllImagesLoaded()),this._fixPosition(),t.remove()},_isAllImagesLoaded:function(){var t=!0;return this.$images.each(function(){return e(this).data("loaded")?void 0:(t=!1,!1)}),t},open:function(){var t=this,i=this.getDialog();this._super();var o=i.find(".oProjectPreview");return o.hasClass("isImagesLoaded")?this._uiFix():(o.addClass("isImagesLoaded"),this.$images=i.find(".oAttachmentItem img").each(function(){var i=e(this),o=e("<img>").on("load",function(){t._onLoadImage(i,o,!0)}).on("error",function(){t._onLoadImage(i,o,!1)}).attr("src",i.attr("src"));if(o[0].height)return i.data("loaded",!0),o.remove(),void 0;i.hide().parent().addClass("oLoadingSpinner");var s=setInterval(function(){(!o.length||o[0].height)&&(clearInterval(s),t._onLoadImage(i,o,!0))},20)}),this._uiFix(!this._isAllImagesLoaded())),this._fixPosition(),this.options.hideArrows||(this._getLeftArrow().length||e('<button class="oBtn jsProjectDialogLeft oPreviewDialogLeft oProjectPreviewDialogLeft"/>').prependTo(i).on("click",function(e){e.preventDefault(),t.ctx.mediator.publish(t.events.left)}),this._getRightArrow().length||e('<button class="oBtn jsProjectDialogRight oPreviewDialogRight oProjectPreviewDialogRight"/>').appendTo(i).on("click",function(e){e.preventDefault(),t.ctx.mediator.publish(t.events.right)})),i.find(this.options.selectors.reportLink).on("click",function(i){i.preventDefault(),t.reportProjectByLink(e(this))}),this},_bottomError:function(e,t){e.addClass("oFormErrorBottom").appendTo(t.closest(".oFormField"))},reportProjectByLink:function(t){var i=this,o=t.data("flyout");if(o)return o[o.visible?"hide":"show"](),void 0;var s=e.tmpl(odesk.templates.reportProjectFlyout,i.getRelatedData());t.flyout({placement:"left",trigger:"manual",className:"oFlyoutTop",content:s}),s.find("form").oFormValidation({ignore:":hidden,.ignored",focusCleanup:!0,rules:{reason:{required:!0},comment:{maxlength:4e3}},messages:{reason:{required:"Please choose report reasons"},comment:{maxlength:"Must be less than 4,000 characters"}},errorPlacements:{reason:i._bottomError,comment:i._bottomError},callback:function(){var e=i.getDialog();return i.reportProject(s,i.getRelatedData(),{onError:function(){e.find(".jsFlaggingSuccessMessage").addClass("isHidden"),t.removeClass("isHidden").flyout("hide"),i._uiFix()}}),t.addClass("isHidden").flyout("hide"),e.find(".jsFlaggingSuccessMessage").removeClass("isHidden"),i._uiFix(),!1}}),t.flyout("show"),this.$wrapper.on("scroll",function(){t.flyout("hide")})},showReportFlyout:function(){return this.reportProjectByLink(this.getDialog().find(this.options.selectors.reportLink)),this},reportProject:function(e,t,i){var o=e.find(":checked").map(function(){return this.value}).toArray();odesk.loading.show("Reporting..."),odesk.ajax({url:"/fwh-api/report-project",type:"post",data:{project:t.uid,contract:t.projectContractUid||"",userKey:t.userKey,flagUid:t.flagUid,comment:e.find("[name=comment]").val(),reasons:o},success:function(){odesk.loading.hide()},error:function(){odesk.loading.flash("Can not save reasons",2e3),i.onError&&i.onError()}})},renderProject:function(t){var i=t.thumbnailOriginal,o=t.attachments;if(i&&o&&o.length)for(var s in o)if("image"==o[s].type){i="";break}return t.thumbnailSource=i,t.isClient=t.isClient||!1,t.preview=!0,e.tmpl(odesk.templates.projectDetails,t)},close:function(){var e=this.getDialog().find(this.options.selectors.reportLink);e.length&&e.flyout("hide"),this._super()},preLoadImages:function(t){var i=e(t),o=i.find(".oAttachmentItem img"),s=0,n=o.length;o.each(function(){e(this).on("load error",function(){e(this).data("loaded",!0),s++,n==s&&i.addClass("isImagesLoaded")})})},_uiFix:function(e){var t=this.getDialog(),i=t.find(".oProjectMain").height("auto"),o=t.find(".oProjectSide"),s=i.outerHeight(),n=o.outerHeight();e&&this.minHeight>s&&(i.css("height",this.minHeight),s=this.minHeight),n>s?i.height(i.height()+n-s).addClass("oProjectMainLow"):i.removeClass("oProjectMainLow"),this.minHeight=i.outerHeight()},_fixPosition:function(){if(this._super(),this.isOpen()){var e=this.getDialog().find(this.options.selectors.reportLink).data("flyout");e&&e.visible&&(e.visible=!1,e.show())}}})}(jQuery),odesk.templates.projectFeedbackInfo='<article class="cols oProjectFeedbackInfo oTxtMed{{if preview}} oPanel{{/if}}"><div class="col col6of8">{{if !preview && assignment.link}}<a class="oRowTitle p" href="${assignment.link}" target="_blank">${assignment.title}</a>{{else}}<h3 class="oRowTitle">${assignment.title}</h3>{{/if}}{{if assignment.completionDate=="Present"}}<div class="oNull p">Job in progress</div>{{else assignment.feedback}}{{if assignment.feedback.commentIsPublic}}{{if assignment.feedback.comment}}{{if preview}}<div class="p">&ldquo;{{html assignment.feedback.comment}}&rdquo;</div>{{else}}<cite class="p">{{html assignment.feedback.comment}}</cite>{{/if}}{{else}}<div class="oNull p">No feedback comment</div>{{/if}}{{else}}<div class="oNull p">The freelancer has made this comment private</div>{{/if}}{{else}}<div class="oNull p">No feedback comment</div>{{/if}}{{if preview && assignment.link}}<a href="${assignment.link}" target="_blank">View this job post</a>{{/if}}</div><ul class="col col2of8 oPlainList txtRight nowrap">{{if assignment.jobType == "Fixed"}}<li>$${assignment.totalFixed} <span class="oNull">earned</span></li>{{else}}{{if assignment.hourlyRate}}<li>${assignment.hourlyRate} <span class="oNull">/ hr</span></li>{{/if}}{{if assignment.totalHours}}<li>${assignment.totalHours} <span class="oNull">hr{{if assignment.totalHours != 1}}s{{/if}}</span></li>{{/if}}{{/if}}{{if assignment.feedback && assignment.feedback.score}}<li class="nowrap"><div class="oStarsContainer oStarsMedium"><div style="width:${assignment.feedback.scorePercent}%" class="oStarsValue"></div></div> ${assignment.feedback.score}</li>{{else}}<div class="oNull p nowrap">No feedback score</div>{{/if}}</ul></article>',odesk.templates.projectDetails='<div class="oProjectPreview oPortfolioProjectPreview" data-id="${uid}"><section class="oPreviewDialogMain oProjectMain"><div>{{if completionDate}}<span class="oSupportInfo"><strong class="oUppercase oMute">${completionDate}</strong></span>{{/if}}{{if reportReasons && reportReasons.length}}<div class="oRight"><a class="jsReportProjectLink oMute" href="#"><i class="oIconFlag oIcon oIconTiny oIconLight"></i> Report</a><span class="oMute jsFlaggingSuccessMessage isHidden">{{if isClient}}This portfolio project has been removed and will not longer be visible to oDesk users. {{/if}}Thanks for your feedback!</span></div> {{/if}}</div> <h1 class="np">${title}</h1><hr/>{{if subcategory}}<div class="p"><strong>{{html subcategory}}</strong> {{if skillsString}}<span class="oMute">${skillsString}</span>{{/if}}</div>{{/if}}<div class="p">{{if descriptionTruncated}}<div class="jsTruncated">{{html descriptionTruncated}} <span class="oMore oMoreSmall">more</span></div><div class="jsFull isHidden">{{html descriptionFormatted}}<div class="oMore oMoreSmall">less</div></div>{{else}}{{html descriptionFormatted}}{{/if}}</div>{{if projectUrl}}<div class="p"><i class="oIconNewWindow oIcon oIconTiny"></i> <a target="_blank" href="/leaving-odesk?ref=${projectUrl}">${projectUrl}</a></div>{{/if}}{{if assignment}}<hr/><strong>This was made on oDesk:</strong>{{tmpl odesk.templates.projectFeedbackInfo}}{{/if}}{{if thumbnailSource || (attachments && attachments.length)}}<ul class="oAttachmentsList">{{if thumbnailSource}}<li data-caption="${title}" class="jsThumbnail"><div class="oAttachmentItem txtCenter"><a href="${thumbnailSource}" target="_blank"><img src="${thumbnailSource}" alt="${title}"/></a></div></li>{{/if}}{{if attachments && attachments.length}}{{each attachments}}<li data-caption="${$value.title}">{{if $value.type == "image"}}<div class="oAttachmentItem txtCenter"><a href="${$value.originalAttachment}" target="_blank"><img src="{{if $value.imageLarge}}${$value.imageLarge}{{else}}${$value.imageLarge}{{/if}}" alt="${$value.title}"/></a></div>{{else}}{{if $value.attachmentName && $value.attachmentSize}}<div class="oAttachmentItem oInfoBar"><i class="oAttachmentIcon"></i><a href="${$value.originalAttachment}" rel="nofollow">${$value.attachmentName} (${$value.attachmentSize})</a></div>{{/if}}{{/if}}<i class="oAttachmentCaption oMute{{if !$value.title}} oHidden{{/if}}">${$value.title}</i></li>{{/each}}{{/if}}</ul>{{/if}}</section></div><button class="oPreviewDialogCloseBtn oRight jsDialogClose"></button>',odesk.templates.reportProjectFlyout='<aside class="jsFlaggingContainer"><p class="oFormWarning isHidden">Sorry, reporting is temporarily unavailable</p><form class="oFormTop oFilterPanel np jsFlagsList"><fieldset class="oFormField"><legend class="oLabel">What\'s the problem?</legend><div class="oOptGrp oFormMed block">{{each reportReasons}}<label class="oOpt oOptLbl"><input type="checkbox" name="reason" value="${$value.id}"{{if $value.checked}} checked="checked"{{/if}}/>${$value.name}</label>{{/each}}</div></fieldset><div class="oFormField p"><label class="oLabel">Please tell us more</label><textarea class="oFormMed oFormShort block" name="comment" data-countdown="false">${flagComment}</textarea></div><footer><button class="oBtn oBtnPrimary">Report project</button> <a class="oBtn oBtnCancel jsFlyoutHide">Cancel</a></footer></form></aside>',function(e){new odesk.Class("odesk.ProfileProjectList","odesk.AbstractWidget",{options:{pagination:{perPage:4,previous:"Â«",next:"Â»",animation:"none",delay:0,fallback:2e3},classes:{pagination:"oJpPagination",activeItem:"isActive"},selectors:{categories:".jsProjectCategories",projectList:".jsProfileProjectList",projectItem:".oProjectTile",pagination:"",linkingFeedbackBoxClose:".jsPortfolioFeedbackInt button.oBtnCloseSmall",linkingFeedbackPointer:".oProjectFeedbackInfo"},isMultipleContractorsOnPage:!1},init:function(t,i){this.$element=e(t),e.extend(!0,this.options,i),e.extend(this.events,odesk.events.makeMap(this.name,["projectOpen","projectClose"])),this._setProperties(),this._registerWidgets(),this._subscribeToEvents(),this._updatePagination(),this._addEvents(),this._preLoadNextNProjects(4)},_setProperties:function(){this.activeItemSelector="."+this.options.classes.activeItem,this.$categories=this.$element.find(this.options.selectors.categories),this.$projectList=this.$element.find(this.options.selectors.projectList),this.$projectItems=this.$projectList.find(this.options.selectors.projectItem),this.$activeItems=this.$projectItems.filter(this.activeItemSelector),this.$pagination=this.$element.find(this.options.selectors.pagination),this.$pagination.length||(this.$pagination=e('<div class="'+this.options.classes.pagination+'">').insertAfter(this.$projectList));var t=this.$projectList.data("count");t&&(this.options.pagination.perPage=parseInt(t,10))},_registerWidgets:function(){this.registerWidget({projectPreviewDialog:new odesk.ProjectPreviewDialog(null,{contractorKey:odesk.pageConfig.contractorKey})})},_subscribeToEvents:function(){var e=this,t=this.widgets.projectPreviewDialog;this.subscribe(this.widgets.projectPreviewDialog.events.left,function(){e._openOffset(t,-1)}),this.subscribe(this.widgets.projectPreviewDialog.events.right,function(){e._openOffset(t,1)}),this.subscribe(this.widgets.projectPreviewDialog.events.close,function(){e.openProjectId=null,e.ctx.mediator.publish(e.events.projectClose)})},_updatePagination:function(){if(!this.options.isMultipleContractorsOnPage){var t=this;this.$pagination.data("jPages")&&this.$pagination.jPages("destroy"),this.$pagination.jPages(e.extend(!0,{container:this.$projectList,itemsFilter:this.activeItemSelector,callback:function(e){1===e.count?t.$pagination.hide():t.$pagination.show()}},this.options.pagination)),this.$pagination.find(".jp-previous").insertBefore(this.$pagination.find(".jp-next")),this.$projectItems.removeClass("isHidden")}},filterByCategory:function(t){var i=this;t?this.$projectItems.each(function(){var o=e(this),s=o.data("category")==t;o.toggleClass(i.options.classes.activeItem,s).css("display",s?"inline-block":"none")}):this.$projectItems.addClass(this.options.classes.activeItem).css("display","inline-block"),this.$projectItems.removeClass("isLast"),this.$activeItems=this.$projectItems.filter(this.activeItemSelector),this.$activeItems.filter(":odd").addClass("isLast"),this._preLoadNextNProjects(4),this._updatePagination()},_loadProject:function(e,t,i){return this.widgets.projectPreviewDialog.loadProject(e,t,i)},_toggleArrows:function(e,t){var i=this.widgets.projectPreviewDialog;if(t){var o=this.$activeItems.index(e);i.toggleLeftArrow(this._isItemInRange(o-1)),i.toggleRightArrow(this._isItemInRange(o+1))}},_openProjectPreview:function(e,t,i){var o=this.widgets.projectPreviewDialog;!t&&i&&(t=o.renderProject(i),e.data("preview-data",i)),e.data("preview-content",t),o.setContent(t).setRelatedElement(e).setRelatedData(e.data("preview-data")).open(),this._toggleArrows(e,!0)},_openProjectItem:function(t){var i=this,o=e(t),s=o.data("preview-content"),n=o.data("project-id"),a=o.data("contractor-key");i.options.isMultipleContractorsOnPage&&a&&(this.$activeItems=this.$projectItems.filter(this.activeItemSelector).filter('[data-contractor-key="'+a+'"]')),this.openProjectId!=n&&(this.openProjectId=n,this.ctx.mediator.publish(this.events.projectOpen,n),this._toggleArrows(o,!1),s?(this._openProjectPreview(o,s),this._showFeedbackTooltip(o),i._preLoadNextNProjects(4)):n&&this._loadProject(n,!1,a).done(function(e){i._openProjectPreview(o,!1,e),i._showFeedbackTooltip(o),i._preLoadNextNProjects(4)}).fail(function(){odesk.loading.flash("Sorry, we weren't able to display this project",2e3),i._toggleArrows(o,!0),i._preLoadNextNProjects(4)}))},_showFeedbackTooltip:function(t){var i=".jsPortfolioFeedbackInt",o=new odesk.FeedbackTooltip("feedBackTooltipProjectList",this.options.selectors.linkingFeedbackPointer,{location:"contractor_profile_page",sub_location:"portfolio_list_project_view",className:i,text:"This portfolio piece was completed on oDesk. Here is more info on the project, including the job details and feedback.",closeBtn:this.options.selectors.linkingFeedbackBoxClose,voteLinks:this.options.selectors.linkingFeedbackBoxVoteLink,placement:"left",container:".oPopupEmpty"});e(this.options.selectors.linkingFeedbackPointer).length>0?o.showFeedbackTooltip(t):o.hide(i)},_addEvents:function(){var t=this;this.widgets.projectPreviewDialog,this.$categories.length&&this.$categories.on("change keyup",function(){t.filterByCategory(e(this).val())}),this.$element.find(this.options.selectors.projectItem).on("click",function(e){e.preventDefault(),t._openProjectItem(this)})},_isItemInRange:function(e){return e>=0&&this.$activeItems.length>e},_openOffset:function(e,t){var i=e.getRelatedElement(),o=this.$activeItems.index(i),s=o+t;this._isItemInRange(s)&&(this._openProjectItem(this.$activeItems.get(s)),this.options.isMultipleContractorsOnPage||this.$pagination.jPages(Math.ceil((s+1)/this.options.pagination.perPage)))},_preLoadNextNProjects:function(e){if(odesk.featureFlags.FP902PortofolioProjectsAutoLoaded){var t=this.widgets.projectPreviewDialog,i=t.getRelatedElement(),o=i?this.$activeItems.index(i):-1;this._preLoadProject(t,o+1,o+e)}},_preLoadProject:function(e,t,i){var o=this;if(o._isItemInRange(t)){var s=o.$activeItems.eq(t);if(s.data("preview-content"))i>t&&o._preLoadProject(e,t+1,i);else{var n=s.data("project-id");n&&o._loadProject(n,!0).done(function(t){var i=e.renderProject(t);s.data("preview-data",t),s.data("preview-content",i),e.preLoadImages(i)}).always(function(){i>t&&o._preLoadProject(e,t+1,i)})}}},openProject:function(e){this.$element.find('[data-project-id="'+e+'"]').click()},startEditing:function(){this.$element.hide()},doneEditing:function(){this.$element.show()}}),e.extend(odesk.ProfileProjectList.prototype,odesk.mediator)}(jQuery),function(e,t,i,o){function s(o,s){this.options=e.extend({},r,s),this._container=e(this.options.container),this._container.length&&(this.jQwindow=e(t),this.jQdocument=e(i),this._holder=e(o),this._nav={},this._first=e(this.options.first),this._previous=e(this.options.previous),this._next=e(this.options.next),this._last=e(this.options.last),this._items=this._container.children(this.options.itemsFilter),this._itemsShowing=e([]),this._itemsHiding=e([]),this._numPages=Math.ceil(this._items.length/this.options.perPage),this._currentPageNum=this.options.startPage,this._clicked=!1,this._cssAnimSupport=this.getCSSAnimationSupport(),this.init())}var n="jPages",a=null,r={container:"",itemsFilter:":visible",first:!1,previous:"â† previous",next:"next â†’",last:!1,links:"numeric",startPage:1,perPage:10,midRange:5,startRange:1,endRange:1,keyBrowse:!1,scrollBrowse:!1,pause:0,clickStop:!1,delay:50,direction:"forward",animation:"",fallback:400,minHeight:!0,callback:o};s.prototype={constructor:s,getCSSAnimationSupport:function(){var e=!1,t="animation",i="",s="Webkit Moz O ms Khtml".split(" "),n="",a=this._container.get(0);if(a.style.animationName&&(e=!0),e===!1)for(var r=0;s.length>r;r++)if(a.style[s[r]+"AnimationName"]!==o){n=s[r],t=n+"Animation",i="-"+n.toLowerCase()+"-",e=!0;break}return e},init:function(){this.setStyles(),this.setNav(),this.paginate(this._currentPageNum),this.setMinHeight()},setStyles:function(){var t="<style>.jp-invisible { visibility: hidden !important; } .jp-hidden { display: none !important; }</style>";e(t).appendTo("head"),this._cssAnimSupport&&this.options.animation.length?this._items.addClass("animated jp-hidden"):this._items.hide()},setNav:function(){var t=this.writeNav();this._holder.each(this.bind(function(i,o){var s=e(o);s.html(t),this.cacheNavElements(s,i),this.bindNavHandlers(i),this.disableNavSelection(o)},this)),this.options.keyBrowse&&this.bindNavKeyBrowse(),this.options.scrollBrowse&&this.bindNavScrollBrowse()},writeNav:function(){var e,t=1;for(e=this.writeBtn("first")+this.writeBtn("previous");this._numPages>=t;t++){switch(1===t&&0===this.options.startRange&&(e+="<span>...</span>"),e+=t>this.options.startRange&&this._numPages-this.options.endRange>=t?"<a href='#' class='jp-hidden'>":"<a>",this.options.links){case"numeric":e+=t;break;case"blank":break;case"title":var i=this._items.eq(t-1).attr("data-title");e+=i!==o?i:""}e+="</a>",(t===this.options.startRange||t===this._numPages-this.options.endRange)&&(e+="<span>...</span>")}return e+=this.writeBtn("next")+this.writeBtn("last")+"</div>"},writeBtn:function(t){return this.options[t]===!1||e(this["_"+t]).length?"":"<a class='jp-"+t+"'>"+this.options[t]+"</a>"},cacheNavElements:function(t,i){this._nav[i]={},this._nav[i].holder=t,this._nav[i].first=this._first.length?this._first:this._nav[i].holder.find("a.jp-first"),this._nav[i].previous=this._previous.length?this._previous:this._nav[i].holder.find("a.jp-previous"),this._nav[i].next=this._next.length?this._next:this._nav[i].holder.find("a.jp-next"),this._nav[i].last=this._last.length?this._last:this._nav[i].holder.find("a.jp-last"),this._nav[i].fstBreak=this._nav[i].holder.find("span:first"),this._nav[i].lstBreak=this._nav[i].holder.find("span:last"),this._nav[i].pages=this._nav[i].holder.find("a").not(".jp-first, .jp-previous, .jp-next, .jp-last"),this._nav[i].permPages=this._nav[i].pages.slice(0,this.options.startRange).add(this._nav[i].pages.slice(this._numPages-this.options.endRange,this._numPages)),this._nav[i].pagesShowing=e([]),this._nav[i].currentPage=e([])},bindNavHandlers:function(t){var i=this._nav[t];i.holder.bind("click.jPages",this.bind(function(t){var o=this.getNewPage(i,e(t.target));this.validNewPage(o)&&(this._clicked=!0,this.paginate(o)),t.preventDefault()},this)),this._first.length&&this._first.bind("click.jPages",this.bind(function(){this.validNewPage(1)&&(this._clicked=!0,this.paginate(1))},this)),this._previous.length&&this._previous.bind("click.jPages",this.bind(function(){var e=this._currentPageNum-1;this.validNewPage(e)&&(this._clicked=!0,this.paginate(e))},this)),this._next.length&&this._next.bind("click.jPages",this.bind(function(){var e=this._currentPageNum+1;this.validNewPage(e)&&(this._clicked=!0,this.paginate(e))},this)),this._last.length&&this._last.bind("click.jPages",this.bind(function(){this.validNewPage(this._numPages)&&(this._clicked=!0,this.paginate(this._numPages))},this))},disableNavSelection:function(e){e.onselectstart!==o?e.onselectstart=function(){return!1}:e.style.MozUserSelect!==o?e.style.MozUserSelect="none":e.onmousedown=function(){return!1}},bindNavKeyBrowse:function(){this.jQdocument.bind("keydown.jPages",this.bind(function(e){var t=e.target.nodeName.toLowerCase();if(this.elemScrolledIntoView()&&"input"!==t&&"textarea"!=t){var i=this._currentPageNum;37==e.which&&(i=this._currentPageNum-1),39==e.which&&(i=this._currentPageNum+1),this.validNewPage(i)&&(this._clicked=!0,this.paginate(i))}},this))},elemScrolledIntoView:function(){var e,t,i,o;return e=this.jQwindow.scrollTop(),t=e+this.jQwindow.height(),i=this._container.offset().top,o=i+this._container.height(),o>=e&&t>=i},bindNavScrollBrowse:function(){this._container.bind("mousewheel.jPages DOMMouseScroll.jPages",this.bind(function(e){var t=(e.originalEvent.wheelDelta||-e.originalEvent.detail)>0?this._currentPageNum-1:this._currentPageNum+1;return this.validNewPage(t)&&(this._clicked=!0,this.paginate(t)),e.preventDefault(),!1},this))},getNewPage:function(e,t){return t.is(e.currentPage)?this._currentPageNum:t.is(e.pages)?e.pages.index(t)+1:t.is(e.first)?1:t.is(e.last)?this._numPages:t.is(e.previous)?e.pages.index(e.currentPage):t.is(e.next)?e.pages.index(e.currentPage)+2:o},validNewPage:function(e){return e!==this._currentPageNum&&e>0&&this._numPages>=e},paginate:function(t){var i,o;i=this.updateItems(t),o=this.updatePages(t),this._currentPageNum=t,e.isFunction(this.options.callback)&&this.callback(t,i,o),this.updatePause()},updateItems:function(e){var t=this.getItemRange(e);return this._itemsHiding=this._itemsShowing,this._itemsShowing=this._items.slice(t.start,t.end),this._cssAnimSupport&&this.options.animation.length?this.cssAnimations(e):this.jQAnimations(e),t},getItemRange:function(e){var t={};return t.start=(e-1)*this.options.perPage,t.end=t.start+this.options.perPage,t.end>this._items.length&&(t.end=this._items.length),t},cssAnimations:function(e){clearInterval(this._delay),this._itemsHiding.removeClass(this.options.animation+" jp-invisible").addClass("jp-hidden"),this._itemsShowing.removeClass("jp-hidden").addClass("jp-invisible"),this._itemsOriented=this.getDirectedItems(e),this._index=0,this._delay=setInterval(this.bind(function(){this._index===this._itemsOriented.length?clearInterval(this._delay):this._itemsOriented.eq(this._index).removeClass("jp-invisible").addClass(this.options.animation),this._index=this._index+1},this),this.options.delay)},jQAnimations:function(e){clearInterval(this._delay),this._itemsHiding.addClass("jp-hidden"),this._itemsShowing.fadeTo(0,0).removeClass("jp-hidden"),this._itemsOriented=this.getDirectedItems(e),this._index=0,this._delay=setInterval(this.bind(function(){this._index===this._itemsOriented.length?clearInterval(this._delay):this._itemsOriented.eq(this._index).fadeTo(this.options.fallback,1),this._index=this._index+1},this),this.options.delay)},getDirectedItems:function(t){var i;switch(this.options.direction){case"backwards":i=e(this._itemsShowing.get().reverse());break;case"random":i=e(this._itemsShowing.get().sort(function(){return Math.round(Math.random())-.5}));break;case"auto":i=t>=this._currentPageNum?this._itemsShowing:e(this._itemsShowing.get().reverse());break;default:i=this._itemsShowing}return i},updatePages:function(e){var t,i,o;t=this.getInterval(e);for(i in this._nav)this._nav.hasOwnProperty(i)&&(o=this._nav[i],this.updateBtns(o,e),this.updateCurrentPage(o,e),this.updatePagesShowing(o,t),this.updateBreaks(o,t));return t},getInterval:function(e){var t,i,o,s;return t=Math.ceil(this.options.midRange/2),i=this._numPages-this.options.midRange,o=e>t?Math.max(Math.min(e-t,i),0):0,s=e>t?Math.min(e+t-(this.options.midRange%2>0?1:0),this._numPages):Math.min(this.options.midRange,this._numPages),{start:o,end:s}},updateBtns:function(e,t){1===t&&(e.first.addClass("jp-disabled"),e.previous.addClass("jp-disabled")),t===this._numPages&&(e.next.addClass("jp-disabled"),e.last.addClass("jp-disabled")),1===this._currentPageNum&&t>1&&(e.first.removeClass("jp-disabled"),e.previous.removeClass("jp-disabled")),this._currentPageNum===this._numPages&&this._numPages>t&&(e.next.removeClass("jp-disabled"),e.last.removeClass("jp-disabled"))},updateCurrentPage:function(e,t){e.currentPage.removeClass("jp-current"),e.currentPage=e.pages.eq(t-1).addClass("jp-current")},updatePagesShowing:function(e,t){var i=e.pages.slice(t.start,t.end).not(e.permPages);e.pagesShowing.not(i).addClass("jp-hidden"),i.not(e.pagesShowing).removeClass("jp-hidden"),e.pagesShowing=i},updateBreaks:function(e,t){t.start>this.options.startRange||0===this.options.startRange&&t.start>0?e.fstBreak.removeClass("jp-hidden"):e.fstBreak.addClass("jp-hidden"),t.end<this._numPages-this.options.endRange?e.lstBreak.removeClass("jp-hidden"):e.lstBreak.addClass("jp-hidden")},callback:function(e,t,i){var o={current:e,interval:i,count:this._numPages},s={showing:this._itemsShowing,oncoming:this._items.slice(t.start+this.options.perPage,t.end+this.options.perPage),range:t,count:this._items.length};o.interval.start=o.interval.start+1,s.range.start=s.range.start+1,this.options.callback(o,s)
},updatePause:function(){if(this.options.pause&&this._numPages>1){if(clearTimeout(this._pause),this.options.clickStop&&this._clicked)return;this._pause=setTimeout(this.bind(function(){this.paginate(this._currentPageNum!==this._numPages?this._currentPageNum+1:1)},this),this.options.pause)}},setMinHeight:function(){this.options.minHeight&&!this._container.is("table, tbody")&&setTimeout(this.bind(function(){this._container.css({"min-height":this._container.css("height")})},this),1e3)},bind:function(e,t){return function(){return e.apply(t,arguments)}},destroy:function(){this.jQdocument.unbind("keydown.jPages"),this._container.unbind("mousewheel.jPages DOMMouseScroll.jPages"),this.options.minHeight&&this._container.css("min-height",""),this._cssAnimSupport&&this.options.animation.length?this._items.removeClass("animated jp-hidden jp-invisible "+this.options.animation):this._items.removeClass("jp-hidden").fadeTo(0,1),this._holder.unbind("click.jPages").empty()}},e.fn[n]=function(t){var i=e.type(t);return"object"===i?(this.length&&!e.data(this,n)&&(a=new s(this,t),this.each(function(){e.data(this,n,a)})),this):"string"===i&&"destroy"===t?(a.destroy(),this.each(function(){e.removeData(this,n)}),this):"number"===i&&0===t%1?(a.validNewPage(t)&&a.paginate(t),this):this}}(jQuery,window,document),function(e){new odesk.Class("odesk.ProfileJobHistoryPreviewDialog","odesk.PreviewDialog",{options:{selectors:{close:".jsDialogClose"},wrapper:'<div class="oPopupWrapper"></div>',dialog:{dialogClass:"oPopupEmpty",width:700},hideArrows:!1},init:function(t,i){this.options.dialog.open=this._uiFix.bind(this),this.options.dialog.close=this._onClose.bind(this),e.extend(this.options,i),this._super(t,i),e.extend(this.events,odesk.events.makeMap(this.name,["left","right","close"]))},loadJob:function(t){var i=e.Deferred();return odesk.loading.show("Loading..."),odesk.ajax({rawValues:[-1],url:"/job-description/"+t,success:function(e){return e?(odesk.loading.hide(),i.resolve(e),void 0):(i.reject(),void 0)},error:i.reject}),i.promise()},open:function(){var t=this,i=this.getDialog();this._super(),i.find(".oProjectPreview"),this.options.hideArrows||(this._getLeftArrow().length||e('<button class="oBtn jsJobDialogLeft oPreviewDialogLeft"/>').prependTo(i).on("click",function(e){e.preventDefault(),t.ctx.mediator.publish(t.events.left)}),this._getRightArrow().length||e('<button class="oBtn jsJobDialogLeft oPreviewDialogRight"/>').appendTo(i).on("click",function(e){e.preventDefault(),t.ctx.mediator.publish(t.events.right)}))},renderPreview:function(t){return e.tmpl(odesk.templates.previewDetails,t)},close:function(){this._super()},_uiFix:function(e){var t=this.$element.find(".oProjectMain").height("auto"),i=this.$element.find(".oProjectSide"),o=t.outerHeight(),s=i.outerHeight();e&&this.minHeight>o&&(t.css("height",this.minHeight),o=this.minHeight),s>o?t.height(t.height()+s-o).addClass("oProjectMainLow"):t.removeClass("oProjectMainLow"),this.minHeight=t.outerHeight()}})}(jQuery),odesk.templates.previewDetails='<div class="cols oProjectPreview" data-id="${enc_job_key}"><section class="oPreviewDialogMain"><button class="oXIcon oRight jsDialogClose"></button><h1 class="oH1Huge">{{if as_to != "Present" }}{{if as_opening_title_original}}${as_opening_title_original}{{else}}${as_opening_title}{{/if}}{{else}}${as_opening_title}{{/if}}</h1><p>{{if jobDetails && jobDetails.category}}<span class="oH4">${jobDetails.category}</span> | {{/if}}<span class="oMute">${as_from}{{if as_from != as_to}} - ${as_to}{{/if}}</span></p><h2 class="oH2Lite">Feedback</h1><h4>Client\'s feedback</h4><div class="p"><div class="cols"><div class="col2of3 col">{{if typeof feedback !== "undefined" && feedback.score > 0}}{{if feedback.comment_is_public}}{{if feedback.comment}}<p class="oTxtMed">"{{html feedback.comment}}"</p>{{if feedback.response_for_client_feedback}}<h4>Freelancer\'s Response </h4><p class="oTxtMed oNote">"{{html feedback.response_for_client_feedback}}"</p>{{/if}}{{/if}}{{else}}<div>The freelancer has made this comment private</div>{{/if}}<table class="oDescTable"><tbody><tr>{{each(i, item) feedback.scores}}<th class="oTxtEnlarged">${item.label}</th><td class="oTxtEnlarged"><strong>${item.score}.0</strong> </td>{{if i % 2 != 0}}</tr><tr>{{/if}}{{/each}}</tr></tbody></table>{{else}}<div class="p">{{if as_to=="Present"}}Job in progress{{else}}<span class="oNull">No feedback given</span>{{/if}}</div>{{/if}}</div><div class="col1of3 col txtRight"><ul class="oTightList p">{{if typeof feedback !== "undefined" && feedback.score > 0}}<li ><div class="oStarsContainer txtMiddle"><div class="oStarsValue" style="width:${100 * feedback.score / 5}%"></div></div> <strong class="oTxtMed txtMiddle">${feedback.score}</strong></li>{{/if}}{{if as_job_type == "Fixed"}}{{if as_total_charge}}<li class="oTxtMed"><strong class="oTxtMed">{{= odesk.currency.format(as_total_charge, {round: 2, decimalZeros: 2})}}</strong> <span class="oMute">earned</span></li><li class="oTxtMed"><span class="oMute">Fixed Price</span></li>{{else}}<li class="oTxtMed">Fixed Price Project</li>{{/if}}{{else}}{{if as_total_charge}}{{if as_total_hours}}<li class="oTxtMed"><strong class="oTxtMed">${odesk.string.groupDigits(odesk.math.roundToPrecision(as_total_hours))}</strong> <span class="oMute">hour{{if odesk.math.roundToPrecision(as_total_hours) != 1}}s{{/if}}</span></li>{{/if}}{{if as_rate}}<li class="oTxtMed"><strong class="oTxtMed">${as_rate}</strong> <span class="oMute">/hr</span></li>{{/if}}<li class="oTxtMed"><strong class="oTxtMed">{{= odesk.currency.format(as_total_charge, {round: 2, decimalZeros: 2})}}</strong> <span class="oMute">earned</span></li>{{else}}{{if as_total_hours}}<li class="oTxtMed"><strong class="oTxtMed">${odesk.string.groupDigits(odesk.math.roundToPrecision(as_total_hours))}</strong> <span class="oMute">hour{{if odesk.math.roundToPrecision(as_total_hours) != 1}}s{{/if}}</span></li>{{/if}}{{/if}}{{/if}}</ul></div></div>{{if typeof feedback_given !== "undefined" && feedback_given.score > 0}}<div{{if feedback_given.comment_is_public}} class="p"{{/if}}><h4>Freelancer\'s feedback to the client</h4>{{if feedback_given.comment_is_public}}{{if feedback_given.comment}}<div class="oTxtMed p">"{{html feedback_given.comment}}"</div>{{/if}}{{else}}<p>The client has made this comment private</p>{{/if}}<div class="txtMiddle"><div class="oStarsContainer txtMiddle"><div class="oStarsValue" style="width:${100 * feedback_given.score / 5}%"></div></div> <span class="txtMiddle">${feedback_given.score} stars</span></div></div>{{if feedback_given.comment_is_public && feedback_given.response_for_freelancer_feedback}}<strong>Client\'s Response </strong> <p class="oTxtMed oNote">"{{html feedback_given.response_for_freelancer_feedback}}"</p>{{/if}}{{/if}}</div><h2 class="oH2Lite">Job Details</h2><div class="oLayout oLayoutInfo"><div class="oMain"><h4>Job description</h4><section>{{if jobDetails && jobDetails.description}}<div class="jsTruncated"><p>${jobDetails.description}{{if typeof jobDetails.fullDescription !== "undefined"}}... <span class="oMore oMoreSmall">more</span>{{/if}}</p></div><div class="jsFull isHidden"><p>${jobDetails.fullDescription}</p><span class="oMore oMoreSmall">less</span></div>{{else}}<div>The job description is private</div>{{/if}}</section>{{if jobDetails.skills}}<section><h4>Skills required</h4><ul class="oInlineList p">{{each(i, item) jobDetails.skills}}<li class="oTag oSkill">${item}</li>{{/each}}</ul></section>{{/if}}<div class="cols"><div class="col1of2 col oJobHeaderBlock p">{{if as_job_type == "Fixed"}}<i class="oFixedPriceIcon oIconLight oLeft"></i><div class="oJobHeaderContent"><span class="oH4">Fixed Price Job</span>{{if jobDetails.endDate}}<div class="oNull">Deliver by - ${jobDetails.endDate}</div>{{/if}}</div>{{else}}<i class="oHourlyIcon oIconLight oLeft"></i><div class="oJobHeaderContent"><span class="oH4">Hourly Job</span><div class="oNull">{{if jobDetails.engagement}}<div>${jobDetails.engagement}</div>{{/if}}{{if jobDetails.duration}}<div>${jobDetails.duration}</div>{{/if}}</div></div>{{/if}}</div><div class="col1of2 col oJobHeaderBlock p">{{if as_job_type == "Fixed" && !jobDetails.isPrivate}}<i class="oIconBeginner oIconLight oLeft"></i><div class="oJobHeaderContent"><span class="oH4">{{= odesk.currency.format(jobDetails.amount, {round: 2, decimalZeros: 2, showZero: true})}}</span><div class="oNull">Budget</div></div>{{/if}}{{if as_job_type != "Fixed" && jobDetails.contractorTier}}{{if jobDetails.contractorTier == 1}}<i class="oIconBeginner oIconLight oLeft"></i><div class="oJobHeaderContent"><span id="jobsJobsHeaderTier" class="oH4">Entry Level</span><div class="oNull">I am looking for freelancers with the lowest rates</div></div>{{/if}}{{if jobDetails.contractorTier == 2}}<i class="oIconIntermediate oIconLight oLeft"></i><div class="oJobHeaderContent"><span id="jobsJobsHeaderTier" class="oH4">Intermediate</span><div class="oNull">I am looking for a mix of experience and value</div></div>{{/if}}{{if jobDetails.contractorTier == 3}}<i class="oIconExpert oIconLight oLeft"></i><div class="oJobHeaderContent"><span id="jobsJobsHeaderTier" class="oH4">Expert</span><div class="oNull">I am willing to pay higher rates for the most experienced freelancers</div></div>{{/if}}{{/if}}</div></div></div>{{if jobDetails.client}}<div class="oSide"><h2 class="oH2Low p">About the client</h2>{{if jobDetails.client.profile}}<article class="oContractorInfo oContractorInfoCompact"><div class="oMed">{{if jobDetails.client.profile.logo}}<img src="${jobDetails.client.profile.logo}" class="oImg oPortraitSmall">{{/if}}<div><h5>${jobDetails.client.profile.name}</h5>{{if (jobDetails.client.profile.url && jobDetails.client.profile.url != "http://")}}<a target="_blank" class="oCompanyLink" href="/leaving-odesk?ref=${jobDetails.client.profile.url}">${jobDetails.client.profile.url}</a>{{/if}}<div>${jobDetails.client.profile.summary}</div></div></div></article>{{/if}}<div class="p"><div class="oStarsContainer oStarsSmall"><div class="oStarsValue" style="width:${100 * jobDetails.client.score / 5}%"></div></div> <span>({{= odesk.string.groupDigits(jobDetails.client.score, {round: 2, decimalZeros: 2} )}}) ${jobDetails.client.totalFeedback} review{{if jobDetails.client.totalFeedback > 1}}s{{/if}}</span></div><ul class="oListLite np"><li><h5>${jobDetails.client.country}</h5><span class="oMute">${jobDetails.client.city} ${jobDetails.client.time}</span></li><li><div><span class="oH5">{{if jobDetails.client.totalCharge >= 10000}}Over {{/if}}{{if jobDetails.client.totalCharge >= 10000}}{{if jobDetails.client.totalCharge >= 50000}}$50,000{{else}}{{= odesk.currency.format(odesk.math.roundToPrecision(jobDetails.client.totalCharge / 10000) * 10000, {round: 0, decimalZeros: 0})}}{{/if}}{{else}}{{= odesk.currency.format(jobDetails.client.totalCharge, {round: 0, showZero: 1, decimalZeros: 0})}}{{/if}}</span> TOTAL SPENT</div><span class="oMute">${jobDetails.client.totalHires} Hire{{if jobDetails.client.totalHires > 1}}s{{/if}}, ${jobDetails.client.activeContract} Active</span></li><li class="oLast"><strong>Member Since</strong> ${jobDetails.client.memberSince}</li></ul></div>{{/if}}</div>{{if jobDetails.ciphertext}}<div><a href="/jobs/${jobDetails.ciphertext}" class="oAwayLink">View entire job post</a></div>{{/if}}</section></div>',function(e){new odesk.Class("odesk.ProfilesProfileJobHistoryAndFeedback","odesk.AbstractWidget",{options:{selectors:{item:"article",itemLink:".oBtnPopup",itemDialogTitle:".oBtnPopup",itemDetails:".jsDetails",jobsInProgressButton:".jsJobsInProgress",jobsMoreButton:"footer button",activeSection:"#jsAssignmentsActive",closedSection:"#jsAssignmentsClosed",tabCtrl:"#skillsTabCtrl",tabPage:".jsSkillTab",feedbackVote:".jsFeedbackVote",feedbackThanks:".jsFeedbackThanks",assignmentDetails:".jsAssignment",assignmentTitle:".jsWorkHistoryJobTitle",assignmentLinkedProject:".jsAssignment .oProjectTile",linkingFeedbackBox:".jsAssignmentProjectFeedback",linkingFeedbackBoxClose:".jsAssignmentProjectFeedback button.oBtnCloseSmall",linkingFeedbackBoxVoteLink:".jsAssignmentProjectFeedback a",linkingFeedbackProjectPointer:".oProjectFeedbackInfo"},messages:{itemNotFound:"Item is not found.",loading:"Loading...",viewCompleteJobDescription:"View complete job description",jobDescriptionMissing:"The job description is missing",requestError:"Request Error"},renderJobs:!0},init:function(t,i,o){e.extend(!0,this.options,o),this.$element=e(i),0!==this.$element.length&&(e.extend(this.events,odesk.events.makeMap(this.name,["jobInProgressToggle"])),this.options.renderJobs&&this._showJobs(),this._registerWidgets()._addEvents()._subscribeEvents())},_showJobs:function(){var t=this.$element.find(".oLoading");e(this.options.selectors.assignmentLinkedProject).flyout("hide"),this.$element.find(this.options.selectors.item).remove();var i=this.$element.find(this.options.selectors.activeSection),o=this.$element.find(this.options.selectors.closedSection),s=o.find("footer.oMoreRow").length>0;for(var n in odesk.pageConfig.assignments){var a=odesk.pageConfig.assignments[n];if(a.order=n,a.as_cny_status||(a.as_cny_status=""),a.as_job_status||(a.as_job_status=""),a.linkedProject&&a.linkedProject.pi_completed){var r=odesk.date.sparse(a.linkedProject.pi_completed);a.linkedProject.pi_completed=odesk.date.format(r,"%B %D, %Y")}var l=e.tmpl(odesk.templates.jobsList,a);"Present"==a.as_to?i.append(l):(s?l.insertBefore(o.find("footer.oMoreRow")):o.append(l),a.as_skills&&a.as_skills.trim().length&&this._pushAssignmentToTab(a))}if(i.append("<span></span>"),odesk.featureFlags.portfolioLinkingContractFeedback&&odesk.pageConfig.showLinkedFeedbackBox){var d=e(this.options.selectors.assignmentLinkedProject).first();d.closest(this.options.selectors.assignmentDetails).is(":visible")&&this._showFeedbackTooltip(d,{location:"contractor_profile_page",sub_location:"work_history",className:".jsAssignmentProjectFeedback",text:"Get the full story of this project, by now seeing the actual work delivered.",closeBtn:this.options.selectors.linkingFeedbackBoxClose,voteLinks:this.options.selectors.linkingFeedbackBoxVoteLink,container:"#workHistoryList",width:"230px",placement:"right"},d)}return t.remove(),this.$activeItems=this.$element.find(this.options.selectors.assignmentDetails),this},_pushAssignmentToTab:function(t){var i=t.as_skills.split(",");for(var o in i){var s=this.$element.find(this.options.selectors.tabPage).filter('[data-id="'+i[o]+'"]');if(s.length>0){var n=t.isHidden;t.isHidden=!1,s.find("section").append(e.tmpl(odesk.templates.jobsList,t)),t.isHidden=n}}},_compareDates:function(e,t){var i=e.split("/"),o=t.split("/");return Date.UTC(i[2],i[0],i[1])<Date.UTC(o[2],o[0],o[1])?1:-1},_sortWorkHistory:function(e,t){var i=this;odesk.pageConfig.assignments.sort(function(o,s){if("Present"==o.as_to&&"Present"!=s.as_to)return-1;if("Present"==s.as_to&&"Present"!=o.as_to)return 1;if(e.indexOf(".")>-1){var n=e.split(".");return o[n[0]]||s[n[0]]?o[n[0]]?s[n[0]]?parseFloat(o[n[0]][n[1]])<parseFloat(s[n[0]][n[1]])?1:-1:-1:1:("asc"==t?-1:1)*i._compareDates(o.as_from_full,s.as_from_full)}return o[e]||s[e]?o[e]?s[e]?"as_from_full"===e?i._compareDates(o.as_from_full,s.as_from_full):parseFloat(o[e])<parseFloat(s[e])?1:-1:-1:1:("asc"==t?-1:1)*i._compareDates(o.as_from_full,s.as_from_full)}),"asc"===t&&odesk.pageConfig.assignments.reverse()},_subscribeEvents:function(){if(this.widgets.assignmentsTab&&this.subscribe(this.widgets.assignmentsTab.events.selectedTabChanged,function(e,t){var i=t.selectedTabIndex-1,o={},s=odesk.pageConfig.assignmentsBySkills[i];o[s.ref]=i,o.count=s.count,odesk.logging.logCustomData("click_skill_filter","contractor_profile_page","work_history",[o],""),this.widgets.workHistory.options.itemsSelector=this.options.selectors.tabPage+'[data-id="'+s.ref+'"] '+this.options.selectors.item,this.widgets.workHistory._initItems()}),!odesk.pageConfig.oldWorkHistoryWidget&&(odesk.qt["FP1117_ProfileV2Client-Treatment"]||odesk.qt["FP1117_ProfileV2Freelancer-Treatment"]||odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"])){var e=this,t=this.widgets.profileJobHistoryPreviewDialog;this.subscribe(this.widgets.profileJobHistoryPreviewDialog.events.left,function(){e._openOffset(t,-1)}),this.subscribe(this.widgets.profileJobHistoryPreviewDialog.events.right,function(){e._openOffset(t,1)})}},_openOffset:function(e,t){var i=e.getRelatedElement(),o=this.$activeItems.index(i),s=o+t;this._isItemInRange(s)&&this._openJobHistoryItem(this.$activeItems.get(s))},_addEvents:function(){this.$element.find(this.options.selectors.jobsMoreButton).removeClass("isHidden");var t=this;!odesk.pageConfig.oldWorkHistoryWidget&&(odesk.qt["FP1117_ProfileV2Client-Treatment"]||odesk.qt["FP1117_ProfileV2Freelancer-Treatment"]||odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"])&&this.$element.delegate(this.options.selectors.assignmentTitle,"click",function(i){i.preventDefault();var o=e(this).closest(t.options.selectors.assignmentDetails);t._openJobHistoryItem(o)}),this.$element.find(".oProjectTile").on("click",function(e){e.preventDefault(),e.stopPropagation(),t._openProjectItem(this)}),this.$element.on("click",this.options.selectors.jobsInProgressButton,function(){e(this).toggleClass("isCollapsed"),e(t.options.selectors.assignmentLinkedProject).flyout("hide"),t.$element.find(t.options.selectors.activeSection).children(".jsInProgress").toggleClass("isHidden"),t.ctx.mediator.publish(t.events.jobInProgressToggle,{})}).find(this.options.selectors.jobsInProgressButton).removeClass("isHidden"),e("#jsSort").change(function(){var i=e(this).val(),o=[{option_id:e(this).prop("selectedIndex"),option_name:e(this).find("option:selected").text()}];odesk.logging.logCustomData("sort_options","contractor_profile_page","work_history",o,"");var s=i.split(" ")[0],n=i.split(" ")[1];t._sortWorkHistory(s,n);for(var a=t.$element.find(t.options.selectors.tabPage+'[data-id="allAssignments"] '+t.options.selectors.item+":not(.jsInProgress):not(.isHidden)").length,r=t.$element.find(t.options.selectors.jobsInProgressButton).hasClass("isCollapsed"),l=0,d=0;odesk.pageConfig.assignments.length>d;d++){var c=odesk.pageConfig.assignments[d];"Present"!=c.as_to?a>l?(l++,c.isHidden=!1):c.isHidden=!0:c.isHidden=r}t._showJobs().widgets.workHistory._initItems()});var i=this.$element.find(this.options.selectors.feedbackVote);return i.on("click","button",function(i){var o=e(this),s=o.closest(t.options.selectors.feedbackVote),n=s.closest("article"),a=n.data("rel"),r=o.data("value");return i.stopPropagation(),a?(s.find("button").prop("disabled",!0),odesk.ajax({type:"POST",url:"/fwh-api/feedback-vote/id/"+a,data:{vote:r},success:function(){s.hide(),n.find(t.options.selectors.feedbackThanks).removeClass("isHidden")},error:function(){s.find("button").prop("disabled",!1),new odesk.Showbox({type:"error",title:"Error",message:"Service is temporarily unavailable.",timeout:5e3}).show()}}),void 0):!1}),this},_openProjectItem:function(t){var i=this,o=e(t),s=o.data("preview-content"),n=o.data("project-id"),a=odesk.pageConfig.contractorKey,r={location:"contractor_profile_page",sub_location:"work_history_project_view",className:".jsPortfolioFeedbackHist",text:"This portfolio piece was completed on oDesk. Here is more info on the project, including the job details and feedback.",closeBtn:this.options.selectors.linkingFeedbackBoxClose,voteLinks:this.options.selectors.linkingFeedbackBoxVoteLink,placement:"left right",container:"this"};n&&(s?(this._openProjectPreview(o,s),i._showFeedbackTooltip(o,r,i.options.selectors.linkingFeedbackProjectPointer)):n&&this._loadProject(n,!1,a).done(function(e){i._openProjectPreview(o,!1,e),i._showFeedbackTooltip(o,r,i.options.selectors.linkingFeedbackProjectPointer)}).fail(function(){odesk.loading.flash("Sorry, we weren't able to display this project",2e3)}))},_showFeedbackTooltip:function(e,t,i){var o=new odesk.FeedbackTooltip("feedBackTooltipProjectHist",i,t);o.showFeedbackTooltip(e)},_loadProject:function(e,t,i){return this.widgets.projectPreviewDialog.loadProject(e,t,i)},_openProjectPreview:function(e,t,i){var o=this.widgets.projectPreviewDialog;!t&&i&&(t=o.renderProject(i),e.data("preview-data",i)),e.data("preview-content",t),o.setContent(t).setRelatedElement(e).setRelatedData(e.data("preview-data")).open()},_toggleArrows:function(e,t){var i=this.widgets.profileJobHistoryPreviewDialog;if(t){var o=this.$activeItems.index(e);i.toggleLeftArrow(this._isItemInRange(o-1)),i.toggleRightArrow(this._isItemInRange(o+1))}else i.toggleLeftArrow(!1),i.toggleRightArrow(!1)},_isItemInRange:function(e){return e>=0&&this.$activeItems.length>e},_openJobHistoryItem:function(t){var i=this,o=e(t),s=o.data("preview-content");if(this._toggleArrows(o,!1),s)this._openJobPreview(o,s);else{var n=o.data("rel"),a=o.data("order"),r=odesk.pageConfig.assignments[a];r.jobDetails={},n?this._loadJob(n).done(function(e){e&&e.description&&(e.description=e.description,e.description.length>500&&(e.fullDescription=e.description,e.description=e.description.substring(0,500)+"...")),e.description||(e.description=i.options.messages.jobDescriptionMissing),r.jobDetails=e,i._openJobPreview(o,!1,r)}).fail(function(){odesk.loading.flash("Sorry, we weren't able to display this job",2e3),i._toggleArrows(o,!0)}):this._openJobPreview(o,!1,r)}},_loadJob:function(e){return this.widgets.profileJobHistoryPreviewDialog.loadJob(e)},_openJobPreview:function(e,t,i){var o=this.widgets.profileJobHistoryPreviewDialog;!t&&i&&(t=o.renderPreview(i),e.data("preview-data",i)),e.data("preview-content",t),o.setContent(t).setRelatedElement(e).setRelatedData(e.data("preview-data")).open(),this._toggleArrows(e,!0)},_workHistoryPreProcessing:function(t){var i=this,o=this.widgets.workHistory;if(!t.$element)return t.content="<div>"+i.options.messages.itemNotFound+"</div>",void 0;if(t.loading=!0,t.$element.data("rel"))odesk.ajax({url:"/job-description/"+t.$element.data("rel"),beforeSend:function(){odesk.loading.show(i.options.messages.loading,!1)},success:function(e){this._workHistoryAjaxSuccess(e,t)}.bind(this),error:function(e){o.data={error:!0};var t=odesk.json.parse(e.responseText);t&&t.error&&(403==t.error.code||404==t.error.code)&&(t.error.message="Details for this job are not available at this time."),new odesk.Showbox({title:i.options.messages.requestError,message:t&&t.error&&t.error.message?t.error.message:"server response error",type:"error",timeout:5e3}).show()},complete:function(){odesk.loading.hide(),t.loading=!1}});else{var s=e.tmpl(odesk.templates.jobDetail,{description:"<span>The job description is private</span>",assignment:this.getAssignment(t.$element.data("order"))});t.loading=!1,t.content=t.$element.find(this.options.selectors.itemDetails).clone().html(s).removeClass("isHidden"),this.widgets.workHistory.openDialogItem(t)}},_workHistoryAjaxSuccess:function(t,i){i.description=!1,t&&t.description&&(i.description=t.description,i.description.length>500&&(i.description=i.description.substring(0,500)+"..."),t.ciphertext&&(i.description=i.description+'<div class="txtRight"><a href="/jobs/'+t.ciphertext+'" class="oAwayLink">'+this.options.messages.viewCompleteJobDescription+"</a></div>")),i.description||(i.description=this.options.messages.jobDescriptionMissing);var o=e.tmpl(odesk.templates.jobDetail,{description:i.description,assignment:this.getAssignment(i.$element.data("order"))});i.content=i.$element.find(this.options.selectors.itemDetails).clone().html(o).removeClass("isHidden"),i.loading=!1,this.widgets.workHistory.openDialogItem(i)},_registerWidgets:function(){if(odesk.pageConfig.assignmentsBySkills&&odesk.pageConfig.assignmentsBySkills.length>1){this.registerWidget({assignmentsTab:new odesk.Tabs("assignmentsTab",this.$element.find(this.options.selectors.tabCtrl),{inPageTab:!0})});for(var e=[],t=0;odesk.pageConfig.assignmentsBySkills.length>t;t++){var i=odesk.pageConfig.assignmentsBySkills[t];e[t]={},e[t][i.ref]=i.count}odesk.logging.logAtsEventToProxy("impression","contractor_profile_page","work_history",[{skills:e}],!0,"")}return!odesk.pageConfig.oldWorkHistoryWidget&&(odesk.qt["FP1117_ProfileV2Client-Treatment"]||odesk.qt["FP1117_ProfileV2Freelancer-Treatment"]||odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"])?this.registerWidget({profileJobHistoryPreviewDialog:new odesk.ProfileJobHistoryPreviewDialog}):this.registerWidget({workHistory:new odesk.ProfilePreview(this.$element,{itemsSelector:(this.widgets.assignmentsTab?this.options.selectors.tabPage+'[data-id="allAssignments"] ':"")+" "+this.options.selectors.item,itemLinkSelector:this.options.selectors.itemLink,itemDialogTitleSelector:this.options.selectors.itemDialogTitle,preProcessing:this._workHistoryPreProcessing.bind(this),dialog:{dialogClass:"oLightbox jsJobHistoryDialog",width:840}})}),this.registerWidget({projectPreviewDialog:new odesk.ProjectPreviewDialog(null,{contractorKey:odesk.pageConfig.contractorKey,hideArrows:!0})}),this},getAssignment:function(e){return e!==void 0?odesk.pageConfig.assignments[e]:this._assignment},setAssignment:function(e){odesk.escapeRawData(e),this._assignment=e,this.widgets.workHistory.rescanItems()}}),e.extend(!0,odesk.ProfilesProfileJobHistoryAndFeedback.prototype,odesk.mediator)}(jQuery),odesk.templates.jobsList='<article class="cols jsAssignment {{if as_to=="Present"}} jsInProgress{{/if}}{{if isHidden}} isHidden{{/if}}" data-rel="${enc_job_key}" data-order="${order}"><div class="cols p"><div class="col col3of5{{if odesk.qt["FP1117_ProfileV2Client-Treatment"] || odesk.qt["FP1117_ProfileV2Freelancer-Treatment"] || odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]}} oTxtEnlarged{{/if}}">{{if odesk.qt["FP1117_ProfileV2Client-Treatment"] || odesk.qt["FP1117_ProfileV2Freelancer-Treatment"] || odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]}}<div class="p"><a class="jsWorkHistoryJobTitle oTxtMed oBtnPopup" href="#"><strong>{{if as_to != "Present" }}{{if as_opening_title_original}}${as_opening_title_original}{{else}}${as_opening_title}{{/if}}{{else}}${as_opening_title}{{/if}}</strong></a></div>{{else}}<h1 class="oRowTitle"><a href="#" class="oBtnPopup">{{if as_opening_title_original}}${as_opening_title_original}{{else}}${as_opening_title}{{/if}}</a></h1>{{/if}}{{if as_to == "Present"}}{{if odesk.qt["FP1117_ProfileV2Client-Treatment"] || odesk.qt["FP1117_ProfileV2Freelancer-Treatment"] || odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]}}<span class="oMute">Job in progress</span>{{else}}Job in progress{{/if}}{{else typeof feedback !== "undefined" && feedback.score > 0}}{{if !odesk.qt["FP1117_ProfileV2Client-Treatment"] && !odesk.qt["FP1117_ProfileV2Freelancer-Treatment"] && !odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]}}<div class="oStarsContainer oStarsSmall" data-content="${feedback.score} stars" data-class-name="oHelpTip" data-delay="{show: 300, hide: 400}" data-rel="flyout"><div class="oStarsValue" style="width:${100 * feedback.score / 5}%"></div></div> {{/if}}{{if feedback.comment_is_public}}{{if feedback.comment}}{{if odesk.qt["FP1117_ProfileV2Client-Treatment"] ||odesk.qt["FP1117_ProfileV2Freelancer-Treatment"] ||odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]}}"{{html feedback.comment}}"{{else}}{{html feedback.comment}}{{/if}}{{/if}}{{if feedback.response_for_client_feedback}}<div class="p"></div><div class="oNote"><strong>Freelancer\'s Response: </strong>{{html feedback.response_for_client_feedback}}</div>{{/if}}{{else feedback.comment}}<span class="oNull">The freelancer has made this comment private</span>{{/if}}{{else}}<span class="oNull">No feedback given</span>{{/if}}</div>{{if odesk.qt["FP1117_ProfileV2Client-Treatment"] || odesk.qt["FP1117_ProfileV2Freelancer-Treatment"] || odesk.qt["FA682_ProfileEditorWYSIWYG-Treatment"]}}<div class="col col2of5 txtRight"><ul class="oTightList p">{{if typeof feedback !== "undefined" && feedback.score > 0}}<li><div class="oStarsContainer"><div class="oStarsValue" style="width:${100 * feedback.score / 5}%"></div></div> <strong class="oTxtMed">${feedback.score}</strong></li>{{/if}}{{if as_job_type == "Fixed"}}<li class="oTxtMed">{{if as_total_charge}}<strong>{{= odesk.currency.format(as_total_charge, {round: 2, decimalZeros: 2})}}</strong> <span class="oMute">earned</span>{{else}}Fixed Price Project{{/if}}</li>{{if as_total_charge}}<li class="oTxtMed"><span class="oMute">Fixed Price</span></li>{{/if}}{{else}}{{if as_total_charge}}{{if as_total_hours}}<li class="oTxtMed"><strong>${odesk.string.groupDigits(odesk.math.roundToPrecision(as_total_hours))}</strong> <span class="oMute">hour{{if odesk.math.roundToPrecision(as_total_hours) != 1}}s{{/if}}</span></li>{{/if}}{{if as_rate}}<li class="oTxtMed"><strong>${as_rate}</strong> <span class="oMute">/hr</span></li>{{/if}}<li class="oTxtMed"><strong>{{= odesk.currency.format(as_total_charge, {round: 2, decimalZeros: 2})}}</strong> <span class="oMute">earned</span></li>{{if typeof as_rate === "undefined" && typeof as_total_hours === "undefined"}}<li class="oTxtMed"><span class="oMute">Hourly</span></li>{{/if}}{{else}}{{if as_total_hours}}<li class="oTxtMed"><strong>${odesk.string.groupDigits(odesk.math.roundToPrecision(as_total_hours))}</strong> <span class="oMute">hour{{if odesk.math.roundToPrecision(as_total_hours) != 1}}s{{/if}}</span></li>{{/if}}{{/if}}{{/if}}<li><div class="oMute">${as_from}{{if as_from != as_to}} - ${as_to}{{/if}}</div></li></ul></div>{{else}}<div class="col col2of5 txtRight oSupportInfo"><div>${as_from}{{if as_from != as_to}} - ${as_to}{{/if}}</div>{{if as_job_type == "Fixed"}}<div>{{if as_total_charge}}Fixed Price {{if !odesk.pageConfig.isBillingInfoExperiment}}<strong>{{= odesk.currency.format(as_total_charge, {round: 2, decimalZeros: 2})}}</strong>{{else}}<div>{{= odesk.currency.format(as_total_charge, {round: 2, decimalZeros: 2})}}</div>{{/if}}{{else}}Fixed Price Project{{/if}}</div>{{else}}{{if as_total_charge}}<div>{{if as_total_hours}}${odesk.string.groupDigits(odesk.math.roundToPrecision(as_total_hours))} hours{{/if}}{{if as_rate}} @ <strong>${as_rate}/hr</strong>{{/if}}</div><div>Earned {{= odesk.currency.format(as_total_charge, {round: 2, decimalZeros: 2})}}</div>{{else}}{{if as_total_hours}}<div>${odesk.string.groupDigits(odesk.math.roundToPrecision(as_total_hours))} hours</div>{{/if}}{{/if}}{{/if}}</div>{{/if}}<div class="jsDetails isHidden"{{if as_opening_access != "private" && !as_job_status}} data-rel="${enc_job_key}"{{/if}} data-order="${order}"></div>{{if can_vote_for_feedback && as_opening_access != "private" && !as_job_status}}<div class="jsFeedbackVote oNull">Was this feedback helpful to you?&nbsp; <button class="oBtn oBtnSecondary oBtnTiny" data-value="yes">Yes</button> <button class="oBtn oBtnSecondary oBtnTiny" data-value="no">No</button></div><div class="jsFeedbackThanks oNull isHidden">Thanks for your feedback!</div>{{/if}}</div>{{if linkedProject}}<div><div class="p oTxtEnlarged"><strong class="txtTop">Related portfolio item </strong>  </div><div class="oProjectTile isActive" data-project-id="${linkedProject.pi_recno}" data-contract="${vrid}">{{if linkedProject.pi_thumbnail}}<div class="oProjectThumbnail"><img src="${linkedProject.pi_thumbnail}"></div>{{/if}}<div class="oProjectTileInfo oTxtEnlarged{{if linkedProject.pi_thumbnail}} oImageOver{{/if}}"><a class="oRowTitle oProjectTitle oEllipsis">${linkedProject.pi_title}</a>{{if !linkedProject.pi_thumbnail}}<div class="oProjectComment break">${linkedProject.pi_description}</div><div class="oProjectCategory">{{if linkedProject.pi_category && linkedProject.pi_category.pi_category_level2}}<strong>${linkedProject.pi_category.pi_category_level2}</strong>{{/if}}{{if linkedProject.pi_completed}} | <strong>${linkedProject.pi_completed}</strong>{{/if}}</div>{{/if}}</div></div></div>{{/if}}</article>',odesk.templates.jobDetail='<h1 class="oH2">Job Description</h1><section>{{html description}}</section>{{if typeof assignment.feedback !== "undefined" && assignment.feedback.score > 0}}<h1 class="oH2">Feedback</h1><div class="cols"><div class="col1of3 col"><table class="oDescTable"><tbody>{{each(i, item) assignment.feedback.scores}}<tr><th>${item.label}</th><td><div class="oStarsContainer oStarsSmall" data-content="${item.score} stars" data-class-name="oHelpTip" data-delay="{show: 300, hide: 400}" data-rel="flyout"><div class="oStarsValue" style="width:${100 * item.score / 5}%"></div></div> </td></tr>{{/each}}</tbody></table></div><div class="col2of3 col">{{if assignment.feedback.comment_is_public}}<div class="p">{{html assignment.feedback.comment}}</div>{{if assignment.feedback.response_for_client_feedback}}<div class="oNote p"><strong>Freelancer\'s Response: </strong>{{html assignment.feedback.response_for_client_feedback}}</div>{{/if}}{{else}}<div>The freelancer has made this comment private</div>{{/if}}</div></div>{{else}}<div>{{if assignment.as_to=="Present"}}Job in progress{{else}}<span class="oNull">No feedback given</span>{{/if}}</div>{{/if}}{{if typeof assignment.feedback_given !== "undefined" && assignment.feedback_given.score > 0}}<div{{if assignment.feedback_given.comment_is_public}} class="p"{{/if}}><h2 class="oH3">Freelancer\'s feedback to the client</h2><div class="oStarsContainer oStarsSmall" data-content="${assignment.feedback_given.score} stars" data-class-name="oHelpTip" data-delay="{show: 300, hide: 400}" data-rel="flyout"><div class="oStarsValue" style="width:${100 * assignment.feedback_given.score / 5}%"></div></div> {{if assignment.feedback_given.comment_is_public}}{{html assignment.feedback_given.comment}}{{else}}The client has made this comment private{{/if}}</div>{{if assignment.feedback_given.comment_is_public && assignment.feedback_given.response_for_freelancer_feedback}}<div class="oNote p"><strong>Client\'s Response:</strong> {{html assignment.feedback_given.response_for_freelancer_feedback}}</div>{{/if}}{{/if}}',function(e){new odesk.Class("odesk.PortraitUploader","odesk.ImageUploader",{options:{url:{change:"/user/change-portrait",remove:"/user/remove-portrait"},template:{edit:"portraitUploaderEdit"},aspectRatio:1,translates:{imageAlt:"Portrait",imageRestriction:"Logos, clip-art, group pictures, and digitally-altered images not allowed",chooseTitle:"Choose Portrait",chooseDescription:"Must be an actual picture of you!",chooseAnotherButton:"Choose Another Portrait",removeTitle:"Delete Portrait?",removeDescription:"Remember, contractors with a friendly, professional-looking portrait are hired <strong>5 times more often</strong> than those without a photo.",tooLargeDescription:"Sorry, your photo is too large."}},init:function(t,i){e.extend(!0,this.options,i),this._super(t,this.options)
}})}(jQuery),odesk.templates.portraitUploaderEdit='<div class="oImageUploaderDialog jsUploaderEditDialog" data-add-title="Add Portrait" data-edit-title="Edit Portrait"><header class="oFormHeader isHidden"><div class="oMsg oMsgError"></div></header><div class="cols"><div class="col col3of4 oColSplit"><div class="oLoadingLrg isHidden"></div><div class="jsFullImageBlock"><div class="oImageUploaderFull"><img/></div>{{if useSquareCheckbox}}<div class="oRight"><label class="oOptLbl"><input type="checkbox" class="jsKeepSquare"{{if aspectRatio==1}} checked{{/if}}/> Keep it square</label></div>{{/if}}<div>Drag frame to adjust portrait.</div><a class="jsChooseFile" href="#">Upload a different photo &rsaquo;</a></div></div><div class="col col1of4 txtCenter"><h2 class="oH2High">Your profile portrait</h2><div class="oPortraitLarge oImagePreview"><div class="oImagePreviewArea"><img/></div></div><section><div><button class="oBtn oBtnPrimary jsUseImage">Save Image</button></div><a class="oBtn oBtnCancel" href="#">Cancel</a></section><div class="oSupportInfo">{{html chooseDescription}} {{html imageRestriction}}</div></div></div></div>',function(e){new odesk.Class("odesk.ContractorVideo","odesk.ContractorSection",{options:{profileSection:"video",templates:{section:odesk.pageConfig.profileWysiwyg?"videoWysiwyg":"video",addNewDialog:"addVideo",removeDialog:"removeVideo"},section:{info:{addDialogTitle:"Add Video"}}},init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(this.options,o),e.extend(!0,this.options.section,odesk.pageConfig.contractorVideoSection),e.extend(this.events,odesk.events.makeMap(this.name,["update"])),this.addTemplates(),this.addEvents()},addEvents:function(){this.$element.delegate("a.jsAdd","click",function(e){return e.preventDefault(),e.stopPropagation(),this.openAddDialog(),!1}.bind(this)),this.$element.delegate("a.jsRemove","click",function(e){return e.preventDefault(),e.stopPropagation(),this.openRemoveDialog(),!1}.bind(this))},loadSection:function(t){this.ajaxRequest({rawValues:[-1],success:e.proxy(function(e){var i=this.options.section;i.data.videoUrl=e.video_url||"",i.data.videoOrig=e.video_orig||"",i.view=this.getPreparedView(i.data),t&&this.ctx.mediator.publish(this.events.update,i),odesk.pageConfig.contractorVideoUrl=i.data.videoUrl,this.$element.html(this._renderTemplate(this.options.templates.section))},this)})},openAddDialog:function(){var t=this,i=this.options.section;this.$addDialog?(this.$addDialog.find(".jsVideoUrl").prop("readonly",!1).val("").removeClass("oErrorField").siblings(".oFormError").remove(),this.$addDialog.dialog("open")):(e.validator.addMethod("youtubeUrl",function(e){var t=/^(?:(?:https?:)?\/\/)?(?:www\.)?(?:youtu\.be\/|(?:youtube-nocookie\.com|youtube\.(?:com|[a-z]{2}))\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return!!e.match(t)},"Please enter a valid YouTube URL."),this.$addDialog=this.openDialog(!1,{action:"add",title:i.info.addDialogTitle,dialogTemplate:this.options.templates.addNewDialog,width:540,onOpen:function(i){var o=e("form",i),s=o.find(".jsVideoUrl");if(t.$element.find(".oVideo").addClass("isInactive"),!o.data("validator")){o.oFormValidation({ignore:".ignore,input[type=hidden],:hidden",rules:{video_url:{required:!0,uri:!0,youtubeUrl:!0},video_tag:{required:odesk.featureFlags.FP608ProfileVideoTagQuestion?!0:!1}},errorPlacements:{video_url:function(e,t){e.addClass("oFormErrorBottom").appendTo(t.closest(".oFormField"))}},callback:function(){return!1}});var n=s.val();s.on("keyup",function(){var t=e(this),i=t.val();n!==i&&t.hasClass("oErrorField")&&t.valid(),n=i})}},onClose:e.proxy(this._activeVideo,this),close:e.proxy(this._activeVideo,this),onSubmit:function(i,o){var s=e("form",i);t.isFormValid(s)&&t.saveAjaxForm(s,{urlKey:t.options.urlKey||!1,success:function(){t.loadSection(!0),o()}})}}))},openRemoveDialog:function(){var t=this;this.options.section,this.$removeDialog?this.$removeDialog.dialog("open"):this.$removeDialog=this.openDialog(!1,{action:"remove",title:"Remove Video",dialogTemplate:this.options.templates.removeDialog,width:500,onOpen:function(){t.$element.find(".oVideo").addClass("isInactive")},onClose:e.proxy(this._activeVideo,this),close:e.proxy(this._activeVideo,this),onSubmit:function(i,o){var s=e("form",i);t.saveAjaxForm(s,{urlKey:t.options.urlKey||!1,loadingMessage:"Removing...",onSave:function(){t.loadSection(!0),o()}})}})},_activeVideo:function(){this.$element.find(".oVideo").removeClass("isInactive")},doneEditing:function(){this.$element.html("")}}),e.extend(!0,odesk.ContractorVideo.prototype,odesk.mediator)}(jQuery),odesk.templates.video='<section><h2>Video{{if !data.videoUrl}}<a class="oRight jsAdd" data-action="add-video" href="#">Add</a>{{else}}<a class="oRight jsRemove" data-action="remove-video" href="#">Remove</a>{{/if}}</h2><ul class="oList">{{if data.videoUrl}}<li class="txtCenter"><div class="oVideo oVideoLrg"><iframe class="jsVideoIFrame" src="${data.videoUrl}" frameborder="0" allowfullscreen="true"></iframe><ul class="oPlainList"><li class="oNull">${data.videoOrig}</li><li><p>{{html info.learnMoreLink}}</p></li></ul></div></li>{{else}}<li><a class="oTxtMega jsAdd" href="#">Add a Video</a><p class="oNull">Give prospective clients confidence in you by providing a concise, well articulated video introduction</p><div class="cols"><div class="col col2of3"><section><header class="oNull">Here are some example videos to get you inspired:</header><article><div class="cols"><div class="col col1of3 oVideo"><iframe src="${info.videoSamplesUrl1}"></iframe></div><div class="col col1of3 oVideo"><iframe src="${info.videoSamplesUrl2}"></iframe></div><div class="col col1of3 oVideo"><iframe src="${info.videoSamplesUrl3}"></iframe></div></div></article><footer>{{html info.learnMoreLink}}</footer></section></div><div class="col col1of3 oVideoHelpfulTips"><section><header><h1 class="oH5 oHInline">Helpful Tips:</h1></header><article><ul class="oPlainList oTxtSmall nowrap"><li class="oGood"><i class="oDot oDotGood"></i> Keep the video short (&lt; 1 minute)</li><li class="oGood"><i class="oDot oDotGood"></i> Describe your skills and experience</li><li class="oBad"><i class="oDot oDotError"></i> Don\'t upload someone else\'s video</li><li class="oBad"><i class="oDot oDotError"></i> Don\'t use copyrighted material/music</li></ul></article></section></div></div></li>{{/if}}</ul></section>',odesk.templates.videoWysiwyg='<section><h2 class="oH2Lite">Video{{if !data.videoUrl}}<a class="oRight jsAdd oRight oBtnEditSmall" data-action="add-video" href="#">Add</a>{{else}}<a class="oRight jsRemove oRight oBtnEditSmall" data-action="remove-video" href="#">Remove</a>{{/if}}</h2><ul class="oList">{{if data.videoUrl}}<li class="txtCenter"><div class="oVideo oVideoMid"><iframe class="jsVideoIFrame" src="${data.videoUrl}" frameborder="0" allowfullscreen="true"></iframe><ul class="oPlainList"><li class="oNull">${data.videoOrig}</li><li><p>{{html info.learnMoreLink}}</p></li></ul></div></li>{{else}}<li><a class="oTxtMega jsAdd" href="#">Add a Video</a><p class="oNull">Give prospective clients confidence in you by providing a concise, well articulated video introduction. Here are some example videos to get you inspired:</p><div class="cols"><section class="p"><header class="oNull"></header><article><div class="cols"><div class="col col1of3 oVideo"><iframe src="${info.videoSamplesUrl1}"></iframe></div><div class="col col1of3 oVideo"><iframe src="${info.videoSamplesUrl2}"></iframe></div><div class="col col1of3 oVideo"><iframe src="${info.videoSamplesUrl3}"></iframe></div></div></article></section><section><div class="col col1of2 oVideo"><ul class="oPlainList"><li><i class="oDot oDotGood"></i> Keep the video short (&lt; 1 minute)</li><li><i class="oDot oDotGood"></i> Describe your skills and experience</li></ul></div><div class="col col1of2 oVideo"><ul class="oPlainList"><li><i class="oDot oDotError"></i> Don\'t upload someone else\'s video</li><li><i class="oDot oDotError"></i> Don\'t use copyrighted material/music</li></ul></div></section><footer>{{html info.learnMoreLink}}</footer></div></li>{{/if}}</ul></section>',odesk.templates.addVideo='<form class="oFormTop np"><input type="hidden" name="http_method" value="put" /><div class="oFormField"><p>Paste the link to your YouTube video here:</p><input class="oFormLrg jsVideoUrl" type="text" name="video_url" maxlength="512" value="${data.videoUrl}"><p>{{html info.addVideoGuidelinesLink}}</p></div>{{if odesk.featureFlags.FP608ProfileVideoTagQuestion}}<div class="oFormField"><select name="video_tag" class="oFormLrg p"><option value="">-What type of video is this?-</option>{{each(i,option) info.addVideoTagOptions}}~<option value="${i}">${option}</option>{{/each}}</select></div>{{/if}}<footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Submit</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',odesk.templates.removeVideo='<form><input type="hidden" name="http_method" value="delete" /><p>Remove this video?</p><footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Remove</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',function(e){e.validator.addMethod("uri",function(t,i){return t!=i.defaultValue&&t?(/:\/\//.test(t)||(t="http://"+t),e.validator.methods.url.call(this,t,i)):!0},"Please enter a valid URL.")}(jQuery),function(e){new odesk.Class("odesk.ContractorTitle","odesk.AbstractWidget",{options:{profileSection:"otherexp",templates:{editDialog:"addOtherExperience",removeDialog:"removeOtherExperience"},data:odesk.pageConfig.contractorTitleData},init:function(t,i,o){this.$element=e(i),e.extend(this.options,o);var s=this;this.$element.delegate("a.jsEditTitle","click",function(e){e.preventDefault(),s.openEditDialog()})},openEditDialog:function(){var t=this,i=e("<div></div>");i.html(e.tmpl(odesk.templates.editContractorTitle,this.options.data));var o=e("form",i);i.dialog({title:"Edit Name & Title",autoOpen:!0,modal:!0,resizable:!1,width:600}),o.oFormValidation({rules:{Title:{contractorTitle:!0}}}).valid(),e(".oBtnPrimary",i).off("click").on("click",function(s){s.preventDefault(),o.valid()&&(e(".oBtn",o).prop("disabled",!0),odesk.loading.show("Saving..."),o.ajaxSubmit({type:"POST",cache:!1,dataType:"json",url:"/fwh-api/set-name-title/",complete:function(o){odesk.loading.hide();var s=odesk.json.parse(o.responseText);e.extend(t.options.data,s),t.$element.html(e.tmpl(odesk.templates.contractorTitle,t.options.data)),i.dialog("close")}}))}),e(".oBtnCancel",i).off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),i.dialog("close")})},startEditing:function(){this.options.data.editing=!0,this.$element.html(e.tmpl(odesk.templates.contractorTitle,this.options.data))},doneEditing:function(){this.options.data.editing=!1,this.$element.html(e.tmpl(odesk.templates.contractorTitle,this.options.data))}})}(jQuery),odesk.templates.contractorTitle='<h1 class="oH1Huge oTightText p" {{if shortName!=displayName}}title="$shortName"{{/if}}>{{if link}}<a href="${link}">${displayName}</a>{{else}}${displayName}{{/if}}</h1>{{if titleHtml}}<h2 class="oH2High oContractorInfoTitle p">{{html titleHtml}}</h2>{{/if}}{{if editing}}<p><a href="#" class="jsEditTitle"><i class="oEditIcon"></i>Edit name and title</a></p>{{/if}}',odesk.templates.editContractorTitle='<form><input type="hidden" name="http_method" value="put"><fieldset class="oFormField "><legend class="oLabel">Display Name</legend><div class="oOptGrp oFormMed"><label class="oOpt oOptLbl"><input type="radio" name="ExposeFullName" value="1"{{if exposeFullName}} checked="checked"{{/if}}>Show my full name (e.g. John Smith)</label><label class="oOpt oOptLbl"><input type="radio" name="ExposeFullName" value=""{{if !exposeFullName}} checked="checked"{{/if}}>Show only my first name and last initial (e.g., John S.)</label></div></fieldset><div class="oFormField oOptional"><label class="oLabel">Title</label><input class="oFormMed" type="text" name="Title" maxlength="70" value="${title}"><aside class="oFormHelp isHidden" id="oFormHelp-Title">Enter a single sentence description of your professional skills/experience (e.g. Expert Web Designer with Ajax experience)</aside></div><footer class="oFormFooter"><div class="oFieldValue"><button class="oBtn oBtnPrimary">Save</button><a class="oBtn oBtnCancel" href="#">Cancel</a></div></footer></form>',function(e){new odesk.Class("odesk.ContractorSkills","odesk.ContractorSection",{options:{profileSection:"skills",templates:{section:odesk.pageConfig.profileWysiwyg?"skillsListWysiwyg":"skillsList",addDialog:"addSkills",removeDialog:"removeSkill"},section:{info:{addDialogTitle:"Add Skills",removeDialogTitle:"Delete Skill",deprecatedSkillText:"This skill will soon be retired and removed from your profile.",replaceItNow:"Replace it now",termsUrl:"https://www.odesk.com/info/terms/"}},deprecatedUrl:odesk.env.OCA_ROOT+"ext/v1/ods/wrapper/temp_deprecated_skills_pa/[USER_RID].json",reorderUrl:odesk.env.API_ROOT+"profiles/v1/providers/"+(odesk.pageConfig.userKey||odesk.pageConfig.contractorKey)+"/skills.json",skillsLimit:10},init:function(t,i,o){if(this.name=t,this.$element=e(i),e.extend(this.options,o),e.extend(this.events,odesk.events.makeMap(this.name,["update","add"])),this.addTemplates(),this.addedSkills={},!odesk.pageConfig.profileWysiwyg)if(this.options.section.items===void 0)this.loadSection();else{var s=this.options.section.items;for(var n in s)this.addedSkills[s[n].name]=!0}this.addEvents()},loadSection:function(){this.options.section.items!==void 0&&(odesk.pageConfig.toReloadAfterEditing=!0);var t=e.Deferred(),i=e.Deferred();odesk.ajax({type:"GET",url:this.options.deprecatedUrl.replace("[USER_RID]",odesk.pageConfig.userId),success:t.resolve,complete:t.resolve}),this.ajaxRequest({rawValues:["skills.skill"],success:i.resolve}),e.when(i,t).then(e.proxy(function(e,t){this.updateDataFromResponse(e[0],t[0]),this.widgets.babelSkills&&this.widgets.babelSkills.setExcludes(this.addedSkills),this.updateSection()},this))},updateSection:function(){var t=this,i=this.options.section;this.$element.html(this._renderTemplate(this.options.templates.section));var o=this.$element.is("tbody")?this.$element:e("tbody",this.$element);o.hasClass("ui-sortable")&&o.sortable("destroy"),i.items&&!e.isEmptyObject(i.items)&&1!==i.items.length&&o.sortable({helper:function(t,i){return i.children().each(function(){var t=e(this);t.width(t.width())}),i},update:function(e,s){for(var n=s.item.index(),a=s.item.data("id"),r=!1,l=0,d=i.items.length;d>l;l++)if(i.items[l].recordId==a){r=i.items.splice(l,1)[0];var c=i.items.splice(n,d);i.items.push(r),[].push.apply(i.items,c);break}var p=o.find("tr");for(l=0;d>l;l++)i.items[l].rank=l+1,p.eq(l).find("td:eq(0)").html(l+1);odesk.pageConfig.toReloadAfterEditing=!0,odesk.ajax({type:"POST",url:t.options.reorderUrl,data:{http_method:"put",skill:r.name,rank:n+1}})},change:function(e,t){var i=t.placeholder.index(),o=t.item.index();i>o&&i--,t.helper.find("td:eq(0)").html(i+1)}})},addEvents:function(){e("#jsMySkills").delegate("a.jsAdd","click",function(e){return e.preventDefault(),this.openAddDialog(),!1}.bind(this));var t=this;this.addRemoveEvent(function(){t.loadSection(),t.ctx.mediator.publish(t.events.update,t.options.section)},!0),this.$element.delegate("a.jsRemoveDeprecated","click",function(i){i.preventDefault();var o=e(this).closest("tr").data("id"),s=t.findItemById(o);if(s){var n=e.tmpl(t.options.templates.removeDialog,{data:s});t.saveAjaxForm(n,{loadingMessage:"Removing...",onSave:function(){t.loadSection(),t.ctx.mediator.publish(t.events.update,t.options.section),t.openAddDialog()}})}return!1})},openAddDialog:function(){var t=this,i=this.options.section;this.openDialog(this.$addDialog,{action:"add",dialogTemplate:this.options.templates.addDialog,title:i.info.addDialogTitle,onOpen:function(o){return i.items&&i.items.length>=t.options.skillsLimit?(t._showLimitMessage(o,!0),void 0):(t._showLimitMessage(o,!1),t.registerWidget("babelSkills",new odesk.BabelSkills("babelSkills",o.find(".jsBabelSkills"),{max:1,showLimitAlert:!1,lineHeight:23,input:o.find('[name="skill"]'),separator:",",draggable:!1,ignoreCase:!0,excludeItems:t.addedSkills,hideDeprecated:!0,focusOnDisable:!0})),t.registerWidget("suggestSkill",new odesk.SuggestSkill),t.subscribe(t.widgets.suggestSkill.events.skillAdded,function(){t.loadSection(),t.setFormError(e("form",t.$addDialog),{msgClass:"oMsgSuccess",message:"Thank you, we've received your suggestion"})}),e(".jsSuggestSkill",o).click(function(e){return e.preventDefault(),t.widgets.suggestSkill.showSuggestDialog(),!1}),e(document.activeElement).blur(),e("form",o).oFormValidation({rules:{skill:{required:!0}},errorPlacements:{skill:function(e,t){e.addClass("oFormErrorBottom").appendTo(t.closest(".oFormField"))}},callback:function(){return!1}}),void 0)},close:function(){t.widgets.babelSkills&&(t.widgets.babelSkills.destroy(),t.removeWidget("babelSkills"))},onSubmit:function(i,o,s,n,a){if(n.items&&n.items.length>=t.options.skillsLimit)return t._showLimitMessage(i,!0),void 0;var r=e("form",i);t.isFormValid(r)&&t.saveAjaxForm(r,{onSave:function(){t.loadSection(),t.ctx.mediator.publish(t.events.update,t.options.section),a||t.ctx.mediator.publish(t.events.add,t.options.profileSection),o()}})}})},_showLimitMessage:function(e,t){e.find(".jsAddSkillsFormBody").toggle(!t),e.find(".jsSkillsLimitExceeded").toggle(t)},updateDataFromResponse:function(t,i){this.addedSkills={},this.deprecatedSkills=[];var o=i&&i.data&&i.data[odesk.pageConfig.userId];if(o&&o.one_to_many&&1==o.one_to_many&&o.one_to_many_skills&&(this.deprecatedSkills=o.one_to_many_skills),"0"!==t.total_items&&t.skills&&t.skills.skill){this.options.section.items=[];var s=this.options.section.items,n="1"!==t.total_items?t.skills.skill:[t.skills.skill],a=new odesk.TestScore,r=0;for(var l in n){var d=n[l];if(!d.type){var c="",p=null;1==d.has_tests?(d.exams&&d.exams.exam&&(e.isArray(d.exams.exam)?p=d.exams.exam:(p=[],p[0]=d.exams.exam)),c=p?e("<div>").append(a.getHtml(p)).html():'<a href="/tests/index/skill/'+encodeURIComponent(d.skill)+'">Take a Skills Test for '+d.skill+"</a>"):c=d.description,s.push({recordId:d.skill,rank:++r,name:d.skill,deprecated:-1!==e.inArray(d.skill,this.deprecatedSkills),skillInfo:c,verificationClass:p?"isVerified":""}),this.addedSkills[d.skill]=!0}}}else this.options.section.items=!1},startEditing:function(){this.options.section.items===void 0&&this.loadSection(),this.$element.show()},doneEditing:function(){this.$element.hide()}}),e.extend(!0,odesk.ContractorSkills.prototype,odesk.mediator)}(jQuery),odesk.templates.skillsList='{{if items}}{{each items}}<tr data-id="${$value.name}"><td class="jsRank">${$value.rank}</td><td class="jsName oSkillWrapper"><span class="oTag oSkill ${$value.verificationClass}" data-contractor="${odesk.pageConfig.userKey}">${$value.name}</span></td>{{if $value.deprecated}}<td class="jsDescription"><span class="oBad">${info.deprecatedSkillText}</span><br/><a class="jsRemoveDeprecated" href="#">${info.replaceItNow}</a>{{else}}<td class="jsInfo">{{html $value.skillInfo}}{{/if}}</td><td class="oActionsCell"><a class="oBtnDeleteSmall" href="#">Remove</a></td></tr>{{/each}}{{else}}<tr><td colspan="5"><span class="oNullBig">No Skills</span></td></tr>{{/if}}',odesk.templates.skillsListWysiwyg='<section><h2 class="oH2Lite">Skills<a class="oRight jsAdd oRight oBtnEditSmall" href="#">Add</a></h2><p>Reorder your skills by dragging them up or down.</p><table class="oTable"><thead><tr><th>Rank</th><th>Skill</th></tr></thead><tbody class="jsTableBody">{{if items}}{{each items}}<tr data-id="${$value.name}"><td class="jsRank">${$value.rank}</td><td class="jsName oSkillWrapper"><span class="oTag oSkill ${$value.verificationClass}" data-contractor="${odesk.pageConfig.userKey}">${$value.name}</span></td>{{if $value.deprecated}}<td class="jsDescription"><span class="oBad">${info.deprecatedSkillText}</span><br/><a class="jsRemoveDeprecated" href="#">${info.replaceItNow}</a>{{else}}<td class="jsInfo">{{html $value.skillInfo}}{{/if}}</td><td class="oActionsCell"><a class="oBtnDeleteSmall" href="#">Remove</a></td></tr>{{/each}}{{else}}<tr><td colspan="5"><span class="oNullBig">No Skills</span></td></tr>{{/if}}</tbody></table></section>',odesk.templates.addSkills='<form><div class="jsAddSkillsFormBody"><div class="oFormField"><label class="oLabel">Skill</label><div class="oFormLrg jsBabelSkills"></div><input type="hidden" name="skill" value=""></div><footer class="oFormFooter"><div class="oFieldValue oFormNote"><a class="jsSuggestSkill" href="#">Don\'t see a skill listed? Suggest a skill to oDesk</a></div><div class="oFieldValue"><button class="oBtn oBtnPrimary jsSubmit">Save</button> <button class="oBtn oBtnSecondary jsSubmitMore">Save and Add More</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></div></footer></div><div class="jsSkillsLimitExceeded oHidden"><p>You can add only 10 skills to your profile. Try deleting an existing skill before adding a new one.</p><footer class="oFormFooter txtCenter"><buton class="oBtn oBtnPrimary jsCancel" href="#">Ok</a></footer></div></form>',odesk.templates.removeSkill='<form><input type="hidden" name="http_method" value="delete" /><input type="hidden" name="skill" value="${data.name}" /><p>Are you sure you want to delete the skill "${data.name}" from your profile?</p><footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Yes, delete it!</button> <buton class="oBtn oBtnSecondary jsCancel">Cancel</button></footer></form>',function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var o=null,s=!1,n=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,n.widgetName+"-item")===n?(o=e(this),!1):undefined}),e.data(t.target,n.widgetName+"-item")===n&&(o=e(t.target)),o?!this.options.handle||i||(e(this.options.handle,o).find("*").addBack().each(function(){this===t.target&&(s=!0)}),s)?(this.currentItem=o,this._removeCurrentsFromItems(),!0):!1:!1)},_mouseStart:function(t,i,o){var s,n,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(n=this.document.find("body"),this.storedCursor=n.css("cursor"),n.css("cursor",a.cursor),this.storedStylesheet=e("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(n)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!o)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,o,s,n,a=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(t.pageY-e(document).scrollTop()<a.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed)),t.pageX-e(document).scrollLeft()<a.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(o=this.items[i],s=o.item[0],n=this._intersectsWithPointer(o),n&&o.instance===this.currentContainer&&s!==this.currentItem[0]&&this.placeholder[1===n?"next":"prev"]()[0]!==s&&!e.contains(this.placeholder[0],s)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],s):!0)){if(this.direction=1===n?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(o))break;this._rearrange(t,o),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var o=this,s=this.placeholder.offset(),n=this.options.axis,a={};n&&"x"!==n||(a.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),n&&"y"!==n||(a.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){o._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),o=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&o.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!o.length&&t.key&&o.push(t.key+"="),o.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),o=[];return t=t||{},i.each(function(){o.push(e(t.item||this).attr(t.attribute||"id")||"")}),o},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,o=this.positionAbs.top,s=o+this.helperProportions.height,n=e.left,a=n+e.width,r=e.top,l=r+e.height,d=this.offset.click.top,c=this.offset.click.left,p=o+d>r&&l>o+d&&t+c>n&&a>t+c;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:t+this.helperProportions.width/2>n&&a>i-this.helperProportions.width/2&&o+this.helperProportions.height/2>r&&l>s-this.helperProportions.height/2},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),o="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=i&&o,n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return s?this.floating?a&&"right"===a||"down"===n?2:1:n&&("down"===n?2:1):!1},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),o=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),s=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"===n&&o||"left"===n&&!o:s&&("down"===s&&i||"up"===s&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,o,s,n,a=[],r=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(s=e(l[i]),o=s.length-1;o>=0;o--)n=e.data(s[o],this.widgetFullName),n&&n!==this&&!n.options.disabled&&r.push([e.isFunction(n.options.items)?n.options.items.call(n.element):e(n.options.items,n.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),n]);for(r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=r.length-1;i>=0;i--)r[i][0].each(function(){a.push(this)
});return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;t.length>i;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,o,s,n,a,r,l,d,c=this.items,p=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(s=e(u[i]),o=s.length-1;o>=0;o--)n=e.data(s[o],this.widgetFullName),n&&n!==this&&!n.options.disabled&&(p.push([e.isFunction(n.options.items)?n.options.items.call(n.element[0],t,{item:this.currentItem}):e(n.options.items,n.element),n]),this.containers.push(n));for(i=p.length-1;i>=0;i--)for(a=p[i][1],r=p[i][0],o=0,d=r.length;d>o;o++)l=e(r[o]),l.data(this.widgetName+"-item",a),c.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,o,s,n;for(i=this.items.length-1;i>=0;i--)o=this.items[i],o.instance!==this.currentContainer&&this.currentContainer&&o.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?e(this.options.toleranceElement,o.item):o.item,t||(o.width=s.outerWidth(),o.height=s.outerHeight()),n=s.offset(),o.left=n.left,o.top=n.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)n=this.containers[i].element.offset(),this.containers[i].containerCache.left=n.left,this.containers[i].containerCache.top=n.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,o=t.options;o.placeholder&&o.placeholder.constructor!==String||(i=o.placeholder,o.placeholder={element:function(){var o=t.currentItem[0].nodeName.toLowerCase(),s=e(t.document[0].createElement(o)).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===o?s.append("<td colspan='99'>&#160;</td>"):"img"===o&&s.attr("src",t.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(e,s){(!i||o.forcePlaceholderSize)&&(s.height()||s.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(o.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),o.placeholder.update(t,t.placeholder)},_contactContainers:function(o){var s,n,a,r,l,d,c,p,u,h,f=null,g=null;for(s=this.containers.length-1;s>=0;s--)if(!e.contains(this.currentItem[0],this.containers[s].element[0]))if(this._intersectsWith(this.containers[s].containerCache)){if(f&&e.contains(this.containers[s].element[0],f.element[0]))continue;f=this.containers[s],g=s}else this.containers[s].containerCache.over&&(this.containers[s]._trigger("out",o,this._uiHash(this)),this.containers[s].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[g].containerCache.over||(this.containers[g]._trigger("over",o,this._uiHash(this)),this.containers[g].containerCache.over=1);else{for(a=1e4,r=null,h=f.floating||i(this.currentItem),l=h?"left":"top",d=h?"width":"height",c=this.positionAbs[l]+this.offset.click[l],n=this.items.length-1;n>=0;n--)e.contains(this.containers[g].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(!h||t(this.positionAbs.top+this.offset.click.top,this.items[n].top,this.items[n].height))&&(p=this.items[n].item.offset()[l],u=!1,Math.abs(p-c)>Math.abs(p+this.items[n][d]-c)&&(u=!0,p+=this.items[n][d]),a>Math.abs(p-c)&&(a=Math.abs(p-c),r=this.items[n],this.direction=u?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[g])return;r?this._rearrange(o,r,null,!0):this._rearrange(o,null,this.containers[g].element,!0),this._trigger("change",o,this._uiHash()),this.containers[g]._trigger("change",o,this._uiHash(this)),this.currentContainer=this.containers[g],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[g]._trigger("over",o,this._uiHash(this)),this.containers[g].containerCache.over=1}},_createHelper:function(t){var i=this.options,o=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return o.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(o[0]),o[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!o[0].style.width||i.forceHelperSize)&&o.width(this.currentItem.width()),(!o[0].style.height||i.forceHelperSize)&&o.height(this.currentItem.height()),o},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,o,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),("document"===s.containment||"window"===s.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===s.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===s.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(t=e(s.containment)[0],i=e(s.containment).offset(),o="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(o?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(o?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var o="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*o+this.offset.parent.top*o-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop())*o,left:i.left+this.offset.relative.left*o+this.offset.parent.left*o-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())*o}},_generatePosition:function(t){var i,o,s=this.options,n=t.pageX,a=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((a-this.originalPageY)/s.grid[1])*s.grid[1],a=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,o=this.originalPageX+Math.round((n-this.originalPageX)/s.grid[0])*s.grid[0],n=this.containment?o-this.offset.click.left>=this.containment[0]&&o-this.offset.click.left<=this.containment[2]?o:o-this.offset.click.left>=this.containment[0]?o-s.grid[0]:o+s.grid[0]:o)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,i,o){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!o)})},_clear:function(e,t){this.reverting=!1;var i,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||o.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(o.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),i=0;o.length>i;i++)o[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(i=0;o.length>i;i++)o[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){new odesk.Class("odesk.ContractorSkillCertifications","odesk.ContractorSection",{options:{profileSection:"certificates",section:{info:{addDialogTitle:"Add Certification",editDialogTitle:"Edit Certification",removeDialogTitle:"Remove Certification"},editing:!1,visibleCount:3},certificationContainer:"#jsMySkillCertificatesTable",certificationSelect:"#jsSkillCertificationContainer",addCertificationHintSelector:".jsAddCertificateHint",templates:{section:odesk.pageConfig.profileWysiwyg?"certificationsListWysiwyg":"skillCertificationsList",emptyList:"skillCertificationsListEmpty",editDialog:"editSkillCertifications",removeDialog:"removeSkillCertifications",removeV1Dialog:"removeV1Certifications",addNewDialog:"addNewCertificate",addVerifiedDialog:"addVerifiedCertificate"},approvedCertificates:{},addNewUsersCertificateUrl:odesk.env.API_ROOT+"profiles/v1/certifications/[USER_RID].json",addCertificateUrl:odesk.env.API_ROOT+"profiles/v1/certifications/[USER_RID]/[CERT_ID]/users.json",removeCertificateUrl:odesk.env.API_ROOT+"profiles/v1/certifications/[USER_RID]/[CERT_ID]/certificates/actions.json",removeTestUrl:odesk.env.API_ROOT+"profiles/v1/providers/[KEY]/tests.json",removeOldCertUrl:odesk.env.API_ROOT+"profiles/v1/providers/[KEY]/certificates.json",suggestUrl:"/fwh-api/get-certifications",getUserCertificatesUrl:odesk.env.API_ROOT+"profiles/v1/certifications/[USER_RID]/certificates/users.json"},$addDialog:!1,init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(!0,this.options,o),e.extend(this.events,odesk.events.makeMap(this.name,["update","add"])),this.addTemplates(),odesk.pageConfig.contractorCertifications&&(e.extend(!0,this.options.section,odesk.pageConfig.contractorCertifications),odesk.pageConfig.contractorCertifications.items!==void 0&&(this._updateItems(odesk.pageConfig.contractorCertifications.items),this._updateTests(odesk.pageConfig.contractorCertifications.tests),this._updateCertification(odesk.pageConfig.contractorCertifications.certifications),this.$element.html(this._renderTemplate(this.options.templates.section)))),this.options.section.items===void 0&&this.loadSection(),this.addEvents()},_resetSelector:function(){e(this.options.certificationSelect).val("")},_addUnrecognized:function(){var t=this;t.openDialog("",{title:"Add certification",dialogTemplate:t.options.templates.addNewDialog,onOpen:function(i){t.$addDialog.dialog("close"),t.$addUnrecognizedDialog=i,e("form",i).oFormValidation({ignore:".ignore,input[type=hidden],:hidden",rules:{cert_name:{required:!0},provider:{required:!0},description:{required:!0},date_earned:{required:!0}},callback:function(){return!1}});var o=e(".oDatePicker",i),s=odesk.date.now(),n=odesk.date.formatDate(s,"yymmdd"),a="mm/dd/yy",r=new odesk.DateSelector("datePicker",o,{beforeShowDay:function(e){return[n>=odesk.date.formatDate(odesk.date.localToUtc(e),"yymmdd"),""]},onSelect:function(e){o.val(odesk.date.formatDate(e,a)).keyup()}});r.$input.datepicker("option","dateFormat",a),t.registerWidget("datePicker",r)},onSubmit:function(i,o){var s=e("form",i);t.isFormValid(s)&&t.saveAjaxForm(s,{loadingMessage:"Adding certification...",url:t.options.addNewUsersCertificateUrl.replace("[USER_RID]",odesk.pageConfig.userId),onSave:function(){t.loadSection(),o()}})},onCancel:e.proxy(this._resetSelector(),this)})},_parseCertificates:function(e){if(e.certificates){var t=e.certificates.certificate,i=t.rid?[t]:t;for(var o in i){var s=i[o].rid;this.options.approvedCertificates[s]=i[o]}}},loadSection:function(){var t=this;this.ajaxRequest({url:this.options.getUserCertificatesUrl.replace("[USER_RID]",odesk.pageConfig.userId),rawValues:["users"],success:e.proxy(function(e){this.updateDataFromResponse(e);var i="";odesk.pageConfig.profileWysiwyg?i=this.options.templates.section:this.options.section.items&&this.options.section.items.length?i=this.options.templates.section:this.options.templates.emptyList&&(i=this.options.templates.emptyList),i&&this.$element.html(this._renderTemplate(i)),t.ctx.mediator.publish(t.events.update,t.options.section)},this)})},addEvents:function(){this.$element.delegate("a.jsAdd","click",function(e){return e.preventDefault(),this.openAddDialog(),!1}.bind(this)),this.removeEvent()},removeEvent:function(){var t=this;this.$element.delegate("a.oBtnDeleteSmall, a.oDeleteIcon","click",function(i){i.preventDefault();var o,s,n=t.options.section,a=e(this).closest("tr, article"),r=a.data("id"),l=a.data("type");"test"==a.data("type")?(s=t.options.removeTestUrl.replace("[KEY]",r),o=t.options.templates.removeV1Dialog):"old-cert"==a.data("type")?(s=t.options.removeOldCertUrl.replace("[KEY]",r),o=t.options.templates.removeV1Dialog):(s=t.options.removeCertificateUrl.replace("[USER_RID]",odesk.pageConfig.userId).replace("[CERT_ID]",r),o=t.options.templates.removeDialog);var d=t.findItemById(r,null,l);return d&&(n.data=d,t.openDialog("",{urlKey:r,title:n.info.removeDialogTitle,dialogTemplate:o,width:500,onSubmit:function(i,o){var n=e("form",i);t.saveAjaxForm(n,{url:s,loadingMessage:"Removing...",onSave:function(){var e="test"==a.data("type")?t.options.section.tests:"old-cert"==a.data("type")?t.options.section.certifications:null;if(e){for(var i in e)if(e[i].recordId==r){e.splice(i,1),t.$element.html(t._renderTemplate(t.options.templates.section));break}}else t.loadSection();o()}})}})),!1})},findItemById:function(e,t,i){var o;switch(i){case"test":o=this.options.section.tests;break;case"old-cert":o=this.options.section.certifications;break;default:o=this.options.section.items}if(e&&o){t=t||"recordId";for(var s in o){var n=o[s];if(n[t]&&n[t]==e)return n}}return!1},_fillCertificationsSelect:function(t){var i=[];for(var o in t)t.hasOwnProperty(o)&&i.push(t[o]);i.sort(function(e,t){return e.name>t.name?1:e.name<t.name?-1:0});var s=['<option value=""> - Select your certification - </option>'];i.forEach(function(e){s.push('<option value="'+e.rid+'">'+e.name+"</option>")}),s.push('<option value="other">Other</option>'),e(this.options.certificationSelect).html(s.join(""))},_loadCertifications:function(e){var t=this;odesk.loading.show("Loading..."),odesk.ajax({url:this.options.suggestUrl,success:function(i){i&&i.certificates&&i.certificates.certificate&&(t._parseCertificates(i),t._fillCertificationsSelect(t.options.approvedCertificates),odesk.loading.hide(),e&&e())},error:function(){odesk.loading.hide()}})},openAddCertificationDialog:function(t){var i=this;e.isEmptyObject(this.options.approvedCertificates)?this._loadCertifications(function(){i.openCertificationDialog({action:"add",rid:t})}):this.openCertificationDialog({action:"add",rid:t})},openAddDialog:function(){var t=this,i=this.options.section;this.$addDialog?this.$addDialog.dialog("open"):this.$addDialog=this.openDialog(!1,{action:"add",title:i.info.addDialogTitle,dialogTemplate:this.options.templates.editDialog,width:540,onOpen:function(){e(t.options.certificationSelect).off("change").on("change",function(){var i=e(this).val();"other"==i?t._addUnrecognized():t.openAddCertificationDialog(i)}),e.isEmptyObject(t.options.approvedCertificates)?t._loadCertifications():e(t.options.certificationSelect).find("option").length||t._fillCertificationsSelect(t.options.approvedCertificates),e(t.options.certificationInputContainer).find("select").focus()}})},openCertificationDialog:function(t){var i=this;if(this.options.section,t.rid&&!e.isEmptyObject(i.options.approvedCertificates)&&void 0!==i.options.approvedCertificates[t.rid]){var o=i.options.approvedCertificates[t.rid];o.verification_guideline=odesk.string.decodeEntity(o.verification_guideline),this.openDialog(this.$editDialog,e.extend({title:"Add certification",width:540,data:o,dialogTemplate:this.options.templates.addVerifiedDialog,onOpen:function(t){i.$addDialog&&i.$addDialog.dialog("close"),e("#submission_code").keyup(function(){e(this).valid()}),i.$addCertificateDialog=t,e("form",t).oFormValidation({ignore:".ignore,input[type=hidden],:hidden",rules:{submission_code:{required:!0}},callback:function(){return!1}}),e(".jsDuoligoTestCenter").click(function(){t.dialog("close"),window.open("http://testcenter.duolingo.com","_blank")})},onSubmit:function(t,s,n){var a=e("form",t);i.isFormValid(a)&&i.saveAjaxForm(a,{urlKey:n.urlKey||!1,url:i.options.addCertificateUrl.replace("[USER_RID]",odesk.pageConfig.userId).replace("[CERT_ID]",n.rid),onSave:function(e){i._submitTicket(e.users.id,odesk.pageConfig.userId,o.name,a.find("#submission_code").val()),i.loadSection(),i.$addDialog&&i.$addDialog.dialog("close"),"add"===n.action&&i.ctx.mediator.publish(i.events.add,i.options.profileSection),s()}})},onCancel:e.proxy(this._resetSelector(),this)},t))}},_submitTicket:function(e,t,i,o){odesk.ajax({type:"POST",url:"/api/tickets/v2/tickets.json",data:{topic_api_ref:o?"API_F2727_CERTIFICATION_REQUEST":"API_F2727_TOKENLESS_CERTIFICATION_REQUEST",message:"Thanks for submitting a certification verification request. We will review your request shortly.\n\nRequestID: "+e+"\nUserId: "+t+"\nCertificationType: "+i+(o?"\nDetails: "+o:"")}})},updateDataFromResponse:function(t){if(t.users&&t.users.length){var i=t.users;i&&i.length&&e(this.options.addCertificationHintSelector).remove(),this._updateItems(i),this.sortItems(this.options.section.items,{isVerified:!1,recordId:!0})}else this.options.section.items=[],this._updateVisibleItems()},_updateItems:function(e){var t=[];for(var i in e){var o=e[i],s=o.date_earned?odesk.date.sparse(o.date_earned):!1,n=o.logo_url?odesk.string.procXssEntity(o.logo_url):"",a=o.description,r="",l=a?a.match(/^(.*) \[([^\[]*)\]$/):null;l&&(a=l[1],r=l[2]),o.cert_url&&(r=o.cert_url);var d={recordId:o.rid,logoUrl:n,score:o.score,customData:o.customData,externalUrl:r,name:o.name,isVerified:o.is_verified===!0||"1"===o.is_verified,isCertVerified:o.logo_url?"1":"0",provider:o.provider,skills:o.skills,description:a?odesk.string.decodeEntity(a):"",descriptionHtml:a?odesk.string.formatTeaser(a,475):"",date:s?odesk.date.format(s,"%m/%d/%Y"):""};t.push(d)}this.options.section.items=t,this._updateVisibleItems()},_updateVisibleItems:function(){var e=[];this.options.section.verifiedItemLength=0;for(var t in this.options.section.items){var i=this.options.section.items[t];("1"==i.isVerified||"1"!=i.isCertVerified)&&(this.options.section.verifiedItemLength++,e.push(i))}this.options.section.visibleCount=Math.max(this.options.section.verifiedItemLength,3),this.options.section.visibleItems=e},_updateTests:function(e){var t=[];for(var i in e){var o=e[i],s=o.percentile?parseFloat(o.percentile):"",n=o.url?odesk.string.procXssEntity(o.url):"";isNaN(s)&&(s=0),n&&!n.match("://")&&(n="http://"+n),t.push({recordId:o.record_id,id:o.id?odesk.string.decodeEntity(o.id):"",when:o.when,name:o.test_name||"",url:n,score:o.score||"",percentile:odesk.string.groupDigits(100*s,{groupDigits:!1,round:2}),provider:o.test_provider||"",testRef:o.test_ref})}this.options.section.tests=t},_updateCertification:function(e){var t=[];for(var i in e){var o=e[i],s=o.url?odesk.string.procXssEntity(o.url):"";s&&!s.match("://")&&(s="http://"+s),t.push({recordId:o.record_id,certId:o.cert_id,year:o.cert_year_earned,name:o.cert_name,url:s,organization:o.organization,comments:o.comments?odesk.string.decodeEntity(o.comments):""})}this.options.section.certifications=t}}),e.extend(!0,odesk.ContractorSkillCertifications.prototype,odesk.mediator)}(jQuery),odesk.templates.skillCertificationsList='<table class="oTable">{{each items}}<tr data-id="${$value.recordId}"><td class="jsLogo">{{if $value.logoUrl}}<div class="oTag oTagCertificate oImg{{if $value.isVerified}} isVerified{{/if}}"><div class="oCertificate">{{if $value.externalUrl}}<a href="${$value.externalUrl}" target="_blank"><img src="${$value.logoUrl}" title="${$value.name}"></a>{{else}}<img src="${$value.logoUrl}" title="${$value.name}">{{/if}}</div>{{if $value.isVerified}}Verified{{else}}Pending Verification{{/if}}</div>{{else}}&nbsp;{{/if}}</td><td class="jsName"><h3 class="oH3">{{if $value.externalUrl}}<a href="${$value.externalUrl}" target="_blank">${$value.name}</a>{{else}}${$value.name}{{/if}}</h3><strong>${$value.provider}</strong>{{if $value.isVerified}}{{if $value.skills}}<div class="p">{{/if}}{{/if}}<div>${$value.description}</div>{{if $value.date}}<div class="oMute">Earned: ${$value.date}</div>{{/if}}{{if $value.isVerified}}{{if $value.skills}}</div><ul class="oInlineList">{{each $value.skills}}<li class="oTag oSkill isCertified">${$value.skill}</li>&nbsp;{{/each}}</ul>{{/if}}{{/if}}</td><td class="oActionsCell"><a class="oBtnDeleteSmall" href="#">Remove</a></td></tr>{{/each}}</table>{{if info.showAdditionalAddButton}}<a href="#" class="oBtn oBtnSecondary jsAdd">Add Certification</a>{{/if}}',odesk.templates.certificationsListWysiwyg='{{if editing || verifiedItemLength || tests.length || certifications.length}}<section class="oListLite"><h2 class="oH2Lite">{{if editing}}<a class="jsAdd oRight oBtnEditSmall" href="#">Add</a>{{/if}}Certifications</h2>{{each editing ? items : visibleItems}}<article data-id="${$value.recordId}"{{if !editing && $index >= visibleCount}} class="isHidden"{{/if}}><div class="oMed">{{if editing}}<div class="oRight oNormal editControl"><div class="p"><a href="#" class="oDeleteIcon"></a></div></div>{{/if}}{{if $value.logoUrl}}<div class="oTag oTagCertificate{{if $value.isVerified}} isVerified{{/if}} oImg"><div class="oCertificate">{{if $value.externalUrl}}<a href="${$value.externalUrl}" target="_blank"><img src="${$value.logoUrl}" title="${$value.name}"></a>{{else}}<img src="${$value.logoUrl}" title="${$value.name}">{{/if}}</div>{{if $value.isVerified}}Verified{{else}}Pending Verification{{/if}}</div>{{else}}<div class="oTagCertificate oImg"></div>{{/if}}<div class="oBd oCertInfo"><h1 class="oRowTitle">{{if $value.externalUrl}}<a href="${$value.externalUrl}" target="_blank">${$value.name}</a>{{else}}${$value.name}{{/if}}</h1>{{if $value.isCertVerified != "1" && $value.provider}}<strong>${$value.provider}</strong>{{/if}}<div class="oCertDescr"><div data-id="${$value.recordId}">{{html $value.descriptionHtml}}</div>{{if $value.provider && $value.provider.toLowerCase() == "duolingo" && $value.score}}<div class="oCertScore">Score: ${$value.score} / 10{{if $value.customData && $value.customData.rating}} (${$value.customData.rating}){{/if}}</div>{{/if}}</div>{{if $value.date}}<p class="oMute">Earned ${$value.date}</p>{{/if}}{{if $value.skills && $value.isVerified}}<ul class="oInlineList">{{each $value.skills}}{{if $value}}<li class="oTag oSkill isCertified">${$value}</li>{{/if}}{{/each}}</ul>{{/if}}</div></div></article>{{/each}}{{each tests}}<article data-id="${$value.recordId}" data-type="test"{{if !editing && verifiedItemLength + $index >= visibleCount}} class="isHidden"{{/if}}>{{if editing}}<div class="oRight oNormal editControl"><div class="p"><a href="#" class="oDeleteIcon"></a></div></div>{{/if}}<h1 class="oRowTitle"><a href="/leaving-odesk?ref=${encodeURI($value.url)}" target="_blank">${$value.name}</a> <span class="oHMin">${$value.provider}</span></h1><p>${$value.when}<span class="oInlineDivider"></span>${$value.score}</p></article>{{/each}}{{each certifications}}<article data-id="${$value.recordId}" data-type="old-cert"{{if !editing && verifiedItemLength + tests.length + $index >= visibleCount}} class="isHidden"{{/if}}>{{if editing}}<div class="oRight oNormal editControl"><div class="p"><a href="#" class="oDeleteIcon"></a></div></div>{{/if}}<h1 class="oRowTitle">${$value.name} <span class="oHMin">${$value.organization}</span></h1><p>${$value.year}<span class="oInlineDivider"></span>${$value.comments}</p></article>{{/each}}{{if !editing && verifiedItemLength + tests.length + certifications.length > visibleCount}}<footer class="oMoreRow"><button class="oMore oMoreLarge">View More <span class="jsCount oMoreCount">${verifiedItemLength + tests.length + certifications.length - visibleCount}</span></button></footer>{{/if}}{{if !items.length && !tests.length && !certifications.length}}<div class="oBd oMed"><i class="oImg oBulbIcon"></i><div class="oBd"><a href="#" class="jsAdd">Have you earned certifications from Microsoft, Oracle, Zend or another provider? Add and verify them</a></div></div><ul class="oList"><li><span class="oNullBig">No Certifications</span></li></ul>{{/if}}</section>{{/if}}',odesk.templates.skillCertificationsListEmpty='<table class="oTable"><tr><td colspan="3"><span class="oNullBig">No Certifications</span></td></tr></table>',odesk.templates.addVerifiedCertificate='<form>{{if action && action == "edit"}}<input type="hidden" name="http_method" value="put" />{{/if}}<input type="hidden" name="is_active" value="true" /><div class="oFormField"><h2 class="oH5 p">${data.name}</h2><p>{{html data.verification_guideline}} <a href="https://support.odesk.com/entries/23105266" target="_blank">Learn more</a></p>{{if data.is_extra_data_required === "1" }}<input class="oFormLrg" type="text" name="submission_code" id="submission_code" maxlength="400" value="">{{/if}}</div><footer class="oFormFooter txtCenter">{{if data.provider === "Duolingo"}}<a class="oBtn oBtnPrimary jsDuoligoTestCenter">Duolingo Test Center</a> {{else}}<button class="oBtn oBtnPrimary jsSubmit">Add Certification</button> {{/if}}<a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',odesk.templates.editSkillCertifications='<form class="np"><select class="oFormLrg p" name="certifications" id="jsSkillCertificationContainer"></select><footer class="oFormFooter txtCenter"><a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',odesk.templates.removeSkillCertifications='<form><input type="hidden" name="http_method" value="put" /><input type="hidden" name="name" value="disable" /><p>Are you sure you want to remove "${data.name}" from your profile?</p><footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Remove</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',odesk.templates.removeV1Certifications='<form><input type="hidden" name="http_method" value="delete" /><p>Remove item "${data.name}"?</p><footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Remove</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',odesk.templates.addNewCertificate='<form><input type="hidden" name="is_active" value="true" /><div class="oFormField"><label class="oLabel">Certification Name</label><input class="oFormMed" type="text" name="cert_name" maxlength="70" value=""></div><div class="oFormField"><label class="oLabel">Provider</label><input class="oFormMed" type="text" name="provider" maxlength="70" value=""></div><div class="oFormField"><label class="oLabel">Description</label><textarea class="oFormMed oFormShort focus" name="description"></textarea></div><div class="oFormField"><label class="oLabel">Date Earned</label><input class="oInputText oDatePicker" type="text" name="date_earned" value=""></div><div class="oFormField"><label class="oLabel">Submission code or link</label><input class="oFormMed" type="text" name="submission_code" maxlength="400" value=""></div><footer class="oFormFooter"><div class="oFieldValue"><button class="oBtn oBtnPrimary jsSubmit">Add Certification</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></div></footer></form>',odesk.templates.skillCertificationsEmpty='<div class="oWidget oWidgetLink jsAdd"><div class="oBd oMed"><i class="oIconBadge oIconLarge oIconLeft oIconLight"></i><div class="oBd oMute"><a class="oTxtMega" href="#">Add Certification</a> (Optional)<div class="oTxtMed">Have you earned certifications from Microsoft, Oracle, Zend or another provider? Add and verify them</div></div></div></div>',function(e){new odesk.Class("odesk.ContractorRate","odesk.AbstractWidget",{options:{profileSection:"otherexp",templates:{editDialog:"addOtherExperience",removeDialog:"removeOtherExperience"},data:odesk.pageConfig.contractorRateData},init:function(t,i,o){if(this.$element=e(i),e.extend(this.options,o),this.options.data.editable){var s=this;
this.$element.delegate("a.jsEditRate","click",function(e){e.preventDefault(),s.openEditDialog()}),this.registerWidget("rate",new odesk.Rate(".jsRateWidgetContainer"))}},openEditDialog:function(){var t=this;this.$editDialog=e("#jsContractorRateEdit"),this.$form=e("form",this.$editDialog),odesk.qt["FP2188_Subscription-Treatment"]?this.widgets.rate.setEmployerRate(Number(this.options.data.chargeRate)):this.widgets.rate.setContractorRate(Number(this.options.data.rate)),t.$editDialog.dialog({title:"Change Hourly Rate",autoOpen:!0,modal:!0,resizable:!1,width:odesk.qt.hasOwnProperty("FP-1488_NEW_FREELANCER_RATE_WIDGET-Control")?600:850}),this.widgets.rate.onShow(),this._initValidation(),this.$form.valid(),e(".oBtnPrimary",t.$editDialog).off("click").on("click",function(i){i.preventDefault(),i.stopPropagation(),t.$form.valid()&&(e("button",t.$form).prop("disabled",!0),odesk.loading.show("Saving..."),odesk.ajax({type:"POST",cache:!1,dataType:"json",url:"/fwh-api/set-rate/",data:{rate:t.widgets.rate.getContractorRate(),chargeRate:t.widgets.rate.getEmployerRate()},complete:function(i){odesk.loading.hide();var o=odesk.json.parse(i.responseText);e.extend(t.options.data,o),t.options.data.formattedRate=odesk.qt["FP2188_Subscription-Treatment"]?odesk.currency.format(o.chargeRate):odesk.currency.format(o.rate/(1-t.options.data.rentPercent/100)),t.$element.html(e.tmpl(odesk.templates.contractorRate,t.options.data)),e("button",t.$form).prop("disabled",!1),t.$editDialog.dialog("close")}}))}),e(".oBtnCancel",t.$editDialog).off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),t.$editDialog.dialog("close")})},_initValidation:function(){var t=this,i=this.$form.data("minRate"),o=999,s="Your rate must be at least "+odesk.currency.compactFormat(i)+"/hour",n="Please enter a number between "+odesk.currency.compactFormat(i)+" and "+odesk.currency.compactFormat(o)+" .",a={employerRate:{required:!0,number:!0,maxlength:!1,min:i,max:o}},r={employerRate:{min:s,max:n}},l={employerRate:e.proxy(this._rateErrorPlacement,this)};return this.$form.oFormValidation({rules:a,messages:r,errorPlacements:l,ignore:".ignore,:hidden",disabledButtons:""}),e("#contractorRate").keyup(function(){t.$form.valid()}),this},_rateErrorPlacement:function(t,i){i.is(":hidden")||(e(".oFormMsg",this.$form).remove(),t.html()?e(".oFlyout",this.$form).hide():e(".oFlyout",this.$form).show(),t.appendTo(i.parent()))},startEditing:function(){this.options.data.editable&&(this.options.data.editing=!0,this.$element.html(e.tmpl(odesk.templates.contractorRate,this.options.data)))},doneEditing:function(){this.options.data.editing=!1,this.$element.html(e.tmpl(odesk.templates.contractorRate,this.options.data))}}),e.extend(!0,odesk.ContractorRate.prototype,odesk.mediator)}(jQuery),odesk.templates.contractorRate='<span class="${className} oTightText"><strong>${formattedRate}</strong><span class="oRateTime"> / hr</span></span>{{if editing}}<div class="editControl"><a href="#" class="jsEditRate"><i class="oEditIcon"></i>Edit rate</a></div>{{/if}}',function(e){new odesk.Class("odesk.ContractorProjects","odesk.ContractorSection",{options:{projectsLogData:{},profileSection:"projects",sectionUrl:"/fwh-api/projects-list",reorderUrl:"/fwh-api/reorder-projects",removeUrl:"/fwh-api/project-delete",selectors:{itemsList:".jsProjectItemsList",draftsList:".jsProjectDraftsList",sectionContent:"#jsMyProjects .jsTableBody",projectTitle:".jsProjectTitle"},templates:{section:"projectItemsList",projectsDrafts:"projectDraftsList",removeDialog:"removeProject",errorSection:"projectError",projectsLoading:"projectsLoading",emptyList:""},section:{info:{addDialogTitle:"Add Portfolio Project",editDialogTitle:"Edit Portfolio Project",removeDialogTitle:"Remove Portfolio Project",editProjectUrl:"/profile/projects/"},editing:!1}},init:function(t,i){this.$element=e(t),e.extend(this.options,i),e.extend(this.events,odesk.events.makeMap(this.name,["update","loaded"])),this.addTemplates(),this._setProperties(),odesk.pageConfig.profileWysiwyg||void 0!==this.options.section.items||this.loadSection(),this._registerWidgets(),this._addEvents()},_registerWidgets:function(){this.registerWidget({projectPreviewDialog:new odesk.ProjectPreviewDialog(null,{contractorKey:this.options.userKey,hideArrows:!0})})},_setProperties:function(){this.$itemsList=this.$element.find(this.options.selectors.itemsList),this.$draftsList=this.$element.find(this.options.selectors.draftsList)},_onSuccessSectionLoad:function(e){this.updateDataFromResponse(e);var t=this.options.section,i=!(!t.items||!t.items.length),o=!(!t.drafts||!t.drafts.length);this.$itemsList.html(this._renderTemplate(!i&&this.options.templates.emptyList?this.options.templates.emptyList:this.options.templates.section)).toggleClass("isHidden",!i&&o),this.$draftsList.html(this._renderTemplate(this.options.templates.projectsDrafts)).toggleClass("isHidden",!o),this._initSorting(t),this.ctx.mediator.publish(this.events.update,this.options.section)},loadSection:function(){var t=this;e(t.options.selectors.itemsList).html(t._renderTemplate(t.options.templates.projectsLoading)).removeClass("isHidden");var i=new Date;odesk.ajax({url:this.options.sectionUrl,timeout:4e4,success:function(e){t._onSuccessSectionLoad(e),t._logAjaxCallTime({time:new Date-i,projectsCount:e.projects.length,status:"success"})},error:function(){t._logAjaxCallTime({time:new Date-i,status:"fail"}),e(t.options.selectors.sectionContent).html(t._renderTemplate(t.options.templates.errorSection))}})},_logAjaxCallTime:function(e){this.options.projectsLogData=e,this.ctx.mediator.publish(this.events.loaded,this.options.section)},_initSorting:function(t){var i=this;if(this.$element.hasClass("ui-sortable")&&this.$element.sortable("destroy"),t.items&&!e.isEmptyObject(t.items)&&1!==t.items.length){var o=this.$itemsList.find("tbody");o.sortable({helper:function(t,i){return i.children().each(function(){var t=e(this);t.width(t.width())}),i},start:function(e,t){t.placeholder.height(t.item.height())},axis:"y",update:function(e,o){for(var s=o.item.index(),n=o.item.data("id"),a=t.items,r=!1,l=0,d=a.length;d>l;l++)if(a[l].uid==n){r=a.splice(l,1)[0];var c=a.splice(s,d);a.push(r),[].push.apply(a,c);break}for(l=0;d>l;l++)a[l].rank=l+1;var p=[];for(l=0,d=a.length;d>l;l++)p.push(a[l].uid);odesk.ajax({type:"POST",url:i.options.reorderUrl,data:{items:p},dataType:"json",success:i._onSuccessSectionLoad.bind(i)}),odesk.pageConfig.toReloadAfterEditing=!0}})}},_addEvents:function(){var e=this;this.$element.on("click",this.options.selectors.projectTitle,function(t){t.preventDefault(),e._openProjectItem(this)}),this.removeEvent()},_openProjectItem:function(t){var i=this,o=e(t),s=o.data("preview-content");if(s)this._openProjectPreview(o,s);else{var n=o.data("id");n&&this._loadProject(n).done(function(e){i._openProjectPreview(o,!1,e)}).fail(function(){odesk.loading.flash("Sorry, we weren't able to display this project",2e3)})}},_openProjectPreview:function(e,t,i){var o=this.widgets.projectPreviewDialog;!t&&i&&(t=o.renderProject(i),e.data("preview-data",i)),e.data("preview-content",t),o.setContent(t).setRelatedElement(e).setRelatedData(e.data("preview-data")).open()},_loadProject:function(e){return this.widgets.projectPreviewDialog.loadProject(e,!1)},removeEvent:function(){var t=this;this.$element.delegate("a.oBtnDeleteSmall","click",function(i){i.preventDefault();var o=t.options.section,s=e(this).closest("tr").data("id"),n=t.findItemById(s,"uid");return n&&(o.data=n,t.openDialog("",{urlKey:s,title:o.info.removeDialogTitle,dialogTemplate:t.options.templates.removeDialog,width:500,onSubmit:function(i,o){var n=e("form",i);t.saveAjaxForm(n,{url:t.options.removeUrl,data:{id:s},timeout:4e4,loadingMessage:"Removing...",onSave:function(){t.loadSection(),o()}}),odesk.pageConfig.toReloadAfterEditing=!0}})),!1})},findItemById:function(e,t){var i=this.options.section;if(e&&i.items){t=t||"recordId";for(var o in i.items){var s=i.items[o];if(s[t]&&s[t]==e)return s}for(var o in i.drafts){var s=i.drafts[o];if(s[t]&&s[t]==e)return s}}return!1},updateDataFromResponse:function(e){this.options.section.items=[],this.options.section.drafts=[];var t=this.options.section.items,i=this.options.section.drafts;if(odesk.url.parse(window.location).queryParams,e.projects){for(var o in e.projects){var s=e.projects[o],n={uid:s.uid,contractLinkState:s.projectContractLink?s.projectContractLink.state:null,title:s.title?s.title:"",isPublished:s.isPublic||!1,rank:s.rank||0,completionUnixTime:s.completionDate?parseInt(s.completionDate,10):0,thumbnail:s.thumbnail};n.isPublished?t.push(n):i.push(n)}this.sortItems(t,{rank:!1,title:!0}),this.sortItems(i,{completionUnixTime:!1})}else t=!1,i=!1},startEditing:function(){this.$element.show(),this.options.section.items===void 0&&this.loadSection()},doneEditing:function(){this.$element.hide()}}),e.extend(!0,odesk.ContractorProjects.prototype,odesk.mediator)}(jQuery),odesk.templates.projectItemsList='<table class="oTable"><tbody>{{if items && items.length}}{{each items}}<tr data-id="${$value.uid}" data-type="${$value.type}"><td class="oImgCell"><div class="oThumbnail" {{if $value.thumbnail}}style="background-image:url(${$value.thumbnail});"{{/if}}</div></td><td class="jsTitle"{{if $value.contractLinkState != "pendingApproval" && $value.contractLinkState != "denied"}} colspan="2"{{/if}}><a href="#" class="jsProjectTitle" data-id="${$value.uid}">${$value.title}</a></td>{{if $value.contractLinkState == "pendingApproval"}}<td class="oActionsCell txtRight"><span data-width="300px" data-rel="flyout" data-placement="top bottom" data-content="This portfolio project is under review and not yet visible on your profile. It will be published to your profile soon."><i class="oInfoIcon"></i> Under review</span></td>{{/if}}{{if $value.contractLinkState == "denied"}}<td class="oActionsCell txtRight"><i class="oErrorIcon"></i>This project was taken down and<br/> is not visible on your profile</td>{{/if}}<td class="oActionsCell"><a class="oBtnEditSmall" href="${info.editProjectUrl}${$value.uid}">Edit</a> <a class="oBtnDeleteSmall" href="#">Remove</a></td></tr>{{/each}}{{else}}<tr><td colspan="2"><span class="oNullBig">No Portfolio Projects</span></td></tr>{{/if}}</tbody></table>{{if info.showAdditionalAddButton}}<a href="${info.editProjectUrl}" class="oBtn oBtnSecondary jsAdd">Add Portfolio Project</a>{{/if}}',odesk.templates.projectDraftsList='{{if drafts && drafts.length}}<p><strong>Drafts:</strong></p>{{/if}}<table class="oTable"><tbody>{{if drafts && drafts.length}}{{each drafts}}<tr data-id="${$value.uid}" data-type="${$value.type}"><td class="oImgCell"><div class="oThumbnail" {{if $value.thumbnail}}style="background-image:url(${$value.thumbnail});"{{/if}}</div></td><td class="jsTitle"><h5>${$value.title}</h5></td><td class="oActionsCell"><a class="oBtnEditSmall" href="${info.editProjectUrl}${$value.uid}">Edit</a> <a class="oBtnDeleteSmall" href="#">Remove</a></td></tr>{{/each}}</div>{{else}}<tr><td colspan="2"><span class="oNullBig">No Portfolio Drafts</span></td></tr>{{/if}}</tbody></table>',odesk.templates.removeProject='<form><input type="hidden" name="http_method" value="delete" /><p>Remove item "${data.title}"?</p><footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Remove</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',odesk.templates.emptyProfileProjectList='<div class="oWidget oWidgetLink jsAdd"><div class="oBd oMed"><i class="oIconPicture oIconLarge oIconLeft oIconLight"></i><div class="oMute"><a class="oTxtMega" href="${info.editProjectUrl}">Add Portfolio Project</a> (Optional)<div class="oTxtMed">Add visual samples of your work</div></div></div></div>',odesk.templates.projectError="<div>Your portfolio projects can't be changed at this time.</div>",odesk.templates.projectsLoading='<div id="projectsLoadingBlock" class="oWidget"><div class="oBd oMed"><div class="oLoadingSmallInline">Loading</div></div></div>',function(e){new odesk.Class("odesk.ContractorProfileLogging","odesk.EventLogging",{options:{location:"contractor_profile_page",logQueryString:!1,similarContSublocation:{element:"#similarContractors a.jsEpitome",container:".oSide",parent:".jsSimilarContractor",type:"contractor",id:"data-pid",position:"data-position"}},impressionSublocations:{"":{container:".oMain",element:"#contractorInfo",type:"contractor",extendData:function(){return{id:odesk.pageConfig.contractorId,overview_more:e(".jsOverviewSection .oMore").length?"t":"f",actor:odesk.pageConfig.userRole,work_history_expand_jobs_progress:e("#workHistoryList .jsJobsInProgress").length?"t":"f",work_history_view_more:e("#workHistoryList .oMore").length?"t":"f",work_history_num_jobs:e("#workHistoryList article:visible").length,portfolio_num_items:e("#portfolioList li.jsItem").length,portfolio_view_more:e("#portfolioList .oMore").length?"t":"f",recommended_score:e("#jsHireAgainValue").html()||"",recommended_shown:odesk.qt["FP2380_ExposeNss100ToClient-Treatment_1"]?"t":"f",nss_score:e("#jsClientSatisfactionValue").html()||"",nss_score_shown:odesk.qt["FP2380_ExposeNss100ToClient-Treatment_2"]?"t":"f",expand_recent_job_applications:"f",expand_recent_job_applications_status:"collapsed",referrer_url:document.referrer}}},responsiveness:{container:"#profilePageContent",element:".jsResponsiveness",extendData:function(e){return{id:odesk.pageConfig.contractorId+"",resp:e.data("responsiveness")}}},portfolio_v2_items:{container:".oMain",element:".jsProfileProjectList",extendData:function(t){return{type:"contractor",id:odesk.pageConfig.contractorId,num_portfolio_items:t.children("li").length,portfolio_items_visible:t.children("li:visible").map(function(){return e(this).data("project-id")}).toArray().join(",")}}}},logEvents:[{event:"contact_contractor",sublocObj:{container:".oSide",element:"a.jsContactContractor",extendData:function(){return{id:odesk.pageConfig.contractorId,actor:odesk.pageConfig.userRole}}}},{event:"hire_direct_contractor",sublocObj:{container:".oSide",element:"#jsMakeOfferLink",extendData:function(){return{id:odesk.pageConfig.contractorId,actor:odesk.pageConfig.userRole}}}},{event:"save_as_favorite",sublocObj:{container:".oSide",element:"a.oBtnFavoriteAddSmall",extendData:function(){return{id:odesk.pageConfig.contractorId,actor:odesk.pageConfig.userRole}}}},{event:"click_back",sublocObj:{container:".oBreadcrumbBar",element:"a.jsBackToSearch",sync:!0,extendData:function(){return{id:odesk.pageConfig.contractorId,destination:"search",actor:odesk.pageConfig.userRole}}}},{event:"click_prev",sublocObj:{container:".oBreadcrumbBar",element:"a.oBreadcrumbPrev",sync:!0,extendData:function(){return{id:odesk.pageConfig.contractorId,position:odesk.pageConfig.pos,actor:odesk.pageConfig.userRole}}}},{event:"click_next",sublocObj:{container:".oBreadcrumbBar",element:"a.oBreadcrumbNext",id:"data-rel",sync:!0,extendData:function(){return{id:odesk.pageConfig.contractorId,position:odesk.pageConfig.pos,actor:odesk.pageConfig.userRole}}}},{event:"click_work_history_portfolio_v2",sublocation:"work_history",sublocObj:{container:"body",element:".jsAssignment .oProjectTile",sync:!0,extendData:function(e){return{id:odesk.pageConfig.contractorId,type:"contractor",portfolio_item:e.data("project-id"),contract:e.data("contract")}}}},{event:"click_overview_more",sublocation:"overview",sublocObj:{container:".jsOverviewSection .jsTruncated",element:".oMore",extendData:function(){return{id:odesk.pageConfig.contractorId,actor:odesk.pageConfig.userRole}}}},{event:"click_work_history_job_detail",sublocation:"work_history",sublocObj:{container:"#workHistoryList",element:"a.oBtnPopup",extendData:function(t){return{id:odesk.pageConfig.contractorId,position:e("#workHistoryList article:visible").index(t.closest("article")),opening:t.closest("article").data("rel"),actor:odesk.pageConfig.userRole}}}},{event:"expand_jobs_in_progress",sublocation:"work_history",sublocObj:{container:"#workHistoryList",element:".jsJobsInProgress",extendData:function(){return{id:odesk.pageConfig.contractorId,actor:odesk.pageConfig.userRole}}}},{event:"click_work_history_view_more",sublocation:"work_history",sublocObj:{container:"#workHistoryList",element:".oMore",extendData:function(){return{id:odesk.pageConfig.contractorId,num_jobs:e("#workHistoryList article").length,actor:odesk.pageConfig.userRole}}}},{event:"click_portfolio_item",sublocation:"portfolio",sublocObj:{container:"#portfolioList",element:".jsItem",extendData:function(t){return{id:odesk.pageConfig.contractorId,num_portfolio_items:e("#portfolioList li.jsItem").length,position:e("#portfolioList li.jsItem").index(t),portfolio_item:t.find("figure:first figcaption").text().trim(),actor:odesk.pageConfig.userRole}}}},{event:"click_portfolio_view_more",sublocation:"portfolio",sublocObj:{container:"#portfolioList",element:".oMore",extendData:function(){return{id:odesk.pageConfig.contractorId,num_portfolio_items:e("#portfolioList li.jsItem").length,actor:odesk.pageConfig.userRole}}}},{event:"click_expand_recent_job_applications",sublocation:"job_applications",sublocObj:{container:".oSide",element:"#recentApplicationsBtn",extendData:function(e){return{id:odesk.pageConfig.contractorId,expand_status:e.hasClass("isCollapsed")?"expanded":"collapsed",actor:odesk.pageConfig.userRole}}}},{event:"click_recent_job_application",sublocation:"job_applications",sublocObj:{container:"#recentApplicationsContent",element:"a",sync:!0,extendData:function(t){return{id:odesk.pageConfig.contractorId,position:e("#recentApplicationsTbl a").index(t),opening_id:t.data("openingid"),actor:odesk.pageConfig.userRole}}}},{event:"click_portfolio_v2_item",sublocation:"portfolio_v2_items",sublocObj:{container:".jsProfileProjectList",element:"li",extendData:function(e){return{type:"contractor",id:odesk.pageConfig.contractorId,portfolio_id:e.data("project-id"),has_thumbnail:e.find("img").length?"t":"f",cat:e.data("category")}}}},{event:"click_portfolio_v2_items_next",sublocation:"portfolio_v2_items",sublocObj:{container:"#profilePortfolioSection",element:".oJpPagination a:not(.jp-disabled, .jp-current)",extendData:function(e){return{type:"contractor",id:odesk.pageConfig.contractorId,action:e.hasClass("jp-previous")?"prev":e.hasClass("jp-next")?"next":e.text()}}}},{event:"click_portfolio_v2_details_next",sublocation:"portfolio_v2_details",sublocObj:{container:"body",element:".oPreviewDialogLeft.jsProjectDialogLeft, .oPreviewDialogRight.jsProjectDialogRight",extendData:function(t){return{type:"contractor",id:odesk.pageConfig.contractorId,action:t.hasClass("oPreviewDialogLeft")?"prev":"next",portfolio_id:e(".oProjectPreview").data("id")}}}},{event:"click_v2_details_prev_next",sublocation:"work_history_details",sublocObj:{container:"body",element:".oPreviewDialogLeft.jsJobDialogLeft, .oPreviewDialogRight.jsJobDialogLeft",extendData:function(t){return{type:"contractor",id:odesk.pageConfig.contractorId,action:t.hasClass("oPreviewDialogLeft")?"prev":"next",opening:e(".oProjectPreview:visible").data("id")}}}},{event:"click_prev",sublocation:"work_history_details",sublocObj:{container:"body",element:".jsJobHistoryDialog div.oLightboxPrev",extendData:function(){var t=e(".jsJobHistoryDialog:visible .jsDetails");return{id:odesk.pageConfig.contractorId,position:t.data("order"),opening:t.data("rel"),actor:odesk.pageConfig.userRole}}}},{event:"click_next",sublocation:"work_history_details",sublocObj:{container:"body",element:".jsJobHistoryDialog div.oLightboxNext",extendData:function(){var t=e(".jsJobHistoryDialog:visible .jsDetails");return{id:odesk.pageConfig.contractorId,position:t.data("order"),opening:t.data("rel"),actor:odesk.pageConfig.userRole}}}},{event:"click_job_description",sublocation:"work_history_details",sublocObj:{container:"body",element:".jsJobHistoryDialog a.oAwayLink",sync:!0,extendData:function(){var t=e(".jsJobHistoryDialog:visible .jsDetails");return{id:odesk.pageConfig.contractorId,position:t.data("order"),opening:t.data("rel"),actor:odesk.pageConfig.userRole}}}}],clickSubLocations:{},mouseOverSublocations:{},_loggedImpressionJobs:[],init:function(){var t=e("body");this.options.qtAlocation="",odesk.pageConfig.AUSER&&t.hasClass("F2416_MoreLikeThis-TreatmentOld")?this.options.qtAlocation="F2416-TreatmentOld":odesk.pageConfig.AUSER&&t.hasClass("F2416_MoreLikeThis-TreatmentNew")&&(this.options.qtAlocation="F2416-TreatmentNew"),this.mouseOverSublocations.similar_contractors=this.options.similarContSublocation,this.clickSubLocations.similar_contractors=e.extend({},this.options.similarContSublocation,{sync:!0}),this.logEventTriggeredSublocations("click","mouseup",this.clickSubLocations),this.logEventTriggeredSublocations("mouseover","mouseenter",this.mouseOverSublocations,1e3);for(var i in this.logEvents){var o=this.logEvents[i];o.sublocObj.type=o.sublocObj.type||"contractor",this._bindEventTriggeredLogging(o.event,"click",o.sublocation||"",o.sublocObj)}this.logImpressionEvents(""),this.logImpressionEvents("responsiveness"),this.logImpressionEvents("portfolio_v2_items"),this.logWorkHistoryImpression()},logWorkHistoryImpression:function(){var t=this,i=[],o=0;e("#workHistoryList article").each(function(s,n){if(!t._loggedImpressionJobs[s]){var a=e(n);if(!a.hasClass("isHidden")){o++,i.push({type:"opening",key:a.data("rel"),position:o,actor:odesk.pageConfig.userRole}),t._loggedImpressionJobs[s]=!0;var r=a.find(".oProjectTile");0!==r.length&&odesk.logging.logAtsEventToProxy("impression","contractor_profile_page","work_history",{portfolio_item:r.data("project-id"),contract:r.data("contract"),position:o,type:"contractor",id:odesk.pageConfig.contractorId},!0)}}}),0!==i.length&&odesk.logging.logAtsEventToProxy("impression","contractor_profile_page","work_history",i,!0)},logVideoReady:function(e){var t=[{type:"contractor",id:e.id,actor:odesk.pageConfig.userRole}];odesk.logging.logCustomData("impression","contractor_profile_page","overview",t)},logVideoPlay:function(e){var t=[{type:"contractor",id:e.id,actor:odesk.pageConfig.userRole}];odesk.logging.logCustomData("click","contractor_profile_page","overview",t)}})}(jQuery),function(e){new odesk.Class("odesk.ContractorOverview","odesk.AbstractWidget",{options:{templates:{editDialog:"addOtherExperience",removeDialog:"removeOtherExperience"},data:odesk.pageConfig.contractorOverviewData},init:function(t,i,o){this.$element=e(i),e.extend(this.options,o);var s=this;this.$element.delegate("a.jsEdit","click",function(e){e.preventDefault(),s.openEditDialog()}),this.$goodOverviewDialog=this.createOverviewDialog(".jsGoodOverviewDialog"),this.$badOverviewDialog=this.createOverviewDialog(".jsBadOverviewDialog")},openEditDialog:function(){var t=this,i=this.$element.find(".jsOverviewDescription");i.html(e.tmpl(odesk.templates.contractorOverviewForm,this.options.data)),e("form",i).oFormValidation({rules:{overview:{required:!0,contractorOverview:odesk.qt["FP160U_ExtendedBasicProfileUpdated-Treatment"],maxlength:5e3,preventStuffing:!0}},messages:{overview:{preventStuffing:'This isn\'t a valid overview. <a href="https://support.odesk.com/entries/23098347-What-should-I-put-in-my-overview-">Learn more</a>'}},errorPlacements:{overview:function(e,t){e.addClass("oFormErrorBottom").appendTo(t.closest(".oFormField"))}}}),e(".jsGoodExample",this.$element).off("click").click(function(){return t.$goodOverviewDialog.dialog("open"),!1}),e(".jsBadExample",this.$element).off("click").click(function(){return t.$badOverviewDialog.dialog("open"),!1}),e(".oBtnPrimary",i).off("click").on("click",function(o){o.preventDefault();var s=e("form",i);e(".oBtn",s).prop("disabled",!0),odesk.loading.show("Saving..."),s.ajaxSubmit({type:"POST",cache:!1,dataType:"json",url:"/fwh-api/set-overview/",complete:function(o){odesk.loading.hide();var s=odesk.json.parse(o.responseText);e.extend(t.options.data,s),t._renderTemplate(),i.dialog("close")}})}),e(".oBtnCancel",i).off("click").on("click",function(e){e.preventDefault(),t._renderTemplate()})},createOverviewDialog:function(t){var i=(this.options.section,e(t));return i.dialog({title:"Overview Statement",autoOpen:!1,modal:!0,resizable:!1,width:400,open:function(){e(".jsCancel",i).click(function(){return i.dialog("close"),!1})}})},_renderTemplate:function(){void 0!==odesk.pageConfig.contractorVideoUrl&&(this.options.data.videoUrl=odesk.pageConfig.contractorVideoUrl),this.options.data.toShowSection=this.options.data.editing||this.options.data.overview||this.options.data.videoUrl,this.$element.html(e.tmpl(odesk.templates.contractorOverview,this.options.data))},startEditing:function(){this.options.data.editing=!0,this._renderTemplate()},doneEditing:function(){this.options.data.editing=!1,this._renderTemplate()}})}(jQuery),odesk.templates.contractorOverview='{{if toShowSection}}<section class="jsOverviewSection"><h2 class="oH2Lite" id="objectiveJump">{{if editing}}<a class="jsEdit oRight oBtnEditSmall" href="#">{{if overview}}Edit{{else}}Add an Overview{{/if}}</a>{{/if}}Overview</h2>{{if !editing}}{{if videoUrl}}<div class="oVideo oVideoSml oVideoRight txtCenter" data-trackingId="${devRecNo}" data-source="${videoData.source}" data-videoId="${videoData.videoId}"><iframe class="jsVideoIFrame" src="${videoUrl}" frameborder="0" allowfullscreen="true"></iframe></div>{{/if}}{{/if}}<div class="jsOverviewDescription">{{html overviewHtml}}</div></section><div class="oClearBoth"></div>{{/if}}',odesk.templates.contractorOverviewForm='<header class="oFormHeader"><div class="oFormNote">Highlight your strengths and let clients know why they should hire you. Read a <a class="jsGoodExample" href="#">good example</a> and a <a class="jsBadExample" href="#">bad example</a> of an overview statement.</div></header><form class="oFormTop"><div class="oFormField"><textarea name="overview" class=" oInputText">${overview}</textarea><aside id="oFormHelp-overview" class="oFormHelp isHidden"><p>Use this space to show clients you have the skills and experience they\'re looking for.</p><ul class="oBulletList np"><li> Describe your strengths and skills </li><li> Highlight projects, accomplishments, and education </li><li> Keep it short and make sure it is error-free </li></ul></aside></div><footer class="oFormFooter"><div class="oFieldValue"><button class="oBtn oBtnPrimary">Save</button><a class="oBtn oBtnCancel" href="#">Cancel</a></div></footer></form>',function(e){new odesk.Class("odesk.ContractorOtherExperiences","odesk.ContractorSection",{options:{profileSection:"otherexp",getListUrl:odesk.qt["FP2958ProfileOtherExperiences-Treatment"]?"/fwh-api/get-other-experience":void 0,sectionUrl:odesk.qt["FP2958ProfileOtherExperiences-Treatment"]?"/fwh-api/save-other-experience":void 0,templates:{section:odesk.pageConfig.profileWysiwyg?"otherExperiencesListWysiwyg":"otherExperiencesList",editDialog:"addOtherExperience",removeDialog:"removeOtherExperience"},section:{info:{addDialogTitle:"Add Other Experiences",editDialogTitle:"Edit Other Experiences",removeDialogTitle:"Remove Other Experiences"},editing:!1,visibleCount:3}},init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(this.options,o),e.extend(this.options.section,odesk.pageConfig.contractorOtherExperiencesSection),e.extend(this.events,odesk.events.makeMap(this.name,["update","add"])),this.addTemplates(),this.options.section.items===void 0?this.loadSection():this.$element.html(this._renderTemplate(this.options.templates.section)),this.addEvents()},loadSection:function(){this.ajaxRequest({rawValues:[-1],url:this.options.getListUrl,success:e.proxy(function(e){this.updateDataFromResponse(e),this.$element.html(this._renderTemplate(this.options.templates.section))},this)})},addEvents:function(){var e=this;this.addCommonEditEvent(),this.addRemoveEvent(function(){e.loadSection(),e.ctx.mediator.publish(e.events.update,e.options.section)}),this.$element.delegate("a.jsAdd","click",function(t){t.preventDefault(),e.openAddDialog()})},_openCommonDialog:function(t){var i=this;this.options.section,this.openDialog(this.$editDialog,e.extend({dialogTemplate:this.options.templates.editDialog,title:"add"===t.action?"Add Other Experiences":"Edit Other Experiences",onOpen:function(t){e("form",t).oFormValidation({ignore:".ignore,input[type=hidden],:hidden",rules:{Subject:{required:!0},Description:{required:!0,maxlength:10240}},messages:{Description:{maxlength:"Must be less than 10,240 characters"}},callback:function(){return!1}}),e(".oCountdown",t).remove()},onSubmit:function(t,o,s,n,a){var r=e("form",t);i.isFormValid(r)&&(e(".jsSubmit",r).prop("disabled",!0),e(":input",r).prop("readonly",!0),i.saveAjaxForm(r,{urlKey:s.urlKey||!1,onSave:function(){i.loadSection(),i.ctx.mediator.publish(i.events.update,i.options.section),"add"!==s.action||a||i.ctx.mediator.publish(i.events.add,i.options.profileSection),o()}}))}},t))},updateDataFromResponse:function(e){if("0"!==e.total_items&&e.experiences&&e.experiences.experience){this.options.section.items=[];var t=this.options.section.items,i="1"!==e.total_items?e.experiences.experience:[e.experiences.experience];for(var o in i){var s=i[o];odesk.date.sparse(s.year_started),s.end_date?odesk.date.sparse(s.year_ended):!1,t.push({recordId:s.record_id,subject:s.subject||"",description:s.description_raw||"",descriptionHtml:s.description_html||""})}}else this.options.section.items=!1}})}(jQuery),odesk.templates.otherExperiencesList='{{if items}}{{each items}}<tr data-id="${$value.recordId}"><td class="jsSubjec">${$value.subject}</td><td class="jsDescription">${$value.description}</td><td class="oActionsCell"><a class="oBtnEditSmall" href="#">Edit</a> <a class="oBtnDeleteSmall" href="#">Remove</a></td></tr>{{/each}}{{else}}<tr><td colspan="3"><span class="oNullBig">No Other Experiences</span></td></tr>{{/if}}',odesk.templates.otherExperiencesListWysiwyg='{{if items.length || editing}}<section class="oListLite"><h2 class="oH2Lite">{{if editing}}<a class="jsAdd oRight oBtnEditSmall" href="#">Add</a>{{/if}}Other Experiences</h2>{{if items.length}}{{each items}}<article data-id="${$value.recordId}"{{if !editing && $index>=visibleCount}} class="isHidden"{{/if}}>{{if editing}}<div class="oRight oNormal editControl"><div class="p"><a href="#" class="oEditIcon"></a><a href="#" class="oDeleteIcon"></a></div></div>{{/if}}<h1 class="oH4">${$value.subject}</h1><p>{{html $value.descriptionHtml}}</p></article>{{/each}}{{if !editing && items.length>visibleCount}}<footer class="oMoreRow"><button class="oMore oMoreLarge">View More <span class="jsCount oMoreCount">${items.length - visibleCount}</span></button></footer>{{/if}}{{else}}<ul class="oList"><li><span class="oNullBig">No Other Experiences</span></li></ul>{{/if}}</section>{{/if}}',odesk.templates.addOtherExperience='<form>{{if action && action == "edit"}}<input type="hidden" name="http_method" value="put" /><input type="hidden" name="id" value="${data.recordId}">{{/if}}<div class="oFormField"><label class="oLabel">Subject</label><input class="oFormMed" type="text" name="Subject" maxlength="70" value="${data.subject}"></div><div class="oFormField"><label class="oLabel">Description</label><textarea class="oFormMed" name="Description">${data.description}</textarea></div><footer class="oFormFooter"><div class="oFieldValue"><button class="oBtn oBtnPrimary jsSubmit">Save</button> <button class="oBtn oBtnSecondary jsSubmitMore">Save and Add More</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></div></footer></form>',odesk.templates.removeOtherExperience='<form><input type="hidden" name="id" value="${data.recordId}"><input type="hidden" name="http_method" value="delete" /><p>Remove item "${data.subject}"?</p><footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Remove</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',function(e){new odesk.Class("odesk.ContractorLanguages","odesk.ContractorSection",{options:{langFormSelector:"#jsLangForm",langResultClass:"oLangField",profileSection:"languages",fromBasicProfile:!1,sectionUrl:"/fwh-api/profile-languages/",templates:{section:odesk.pageConfig.profileWysiwyg?"languagesListWysiwyg":"languagesList",editDialog:"editLanguages",removeDialog:"removeLanguages"},section:{info:{addDialogTitle:"Add Language",editDialogTitle:"Edit Language",removeDialogTitle:"Remove Language"},editing:!1}},init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(this.options,o),e.extend(!0,this.options.section,odesk.pageConfig.contractorLanguagesSection),e.extend(this.events,odesk.events.makeMap(this.name,["update"])),this.options.fromBasicProfile&&(this.options.sectionUrl="/fwh-api/profile-languages/from/basic-profile"),this.addTemplates(),odesk.pageConfig.profileWysiwyg||void 0!==this.options.section.items||this.loadSection(),this.addEvents()
},loadSection:function(){this.ajaxRequest({success:e.proxy(function(e){this.updateDataFromResponse(e),this.$element.html(this._renderTemplate(this.options.templates.section))},this)})},addEvents:function(){var e=this;this.$element.delegate("a.jsAdd","click",function(e){return e.preventDefault(),this.openAddDialog(),!1}.bind(this)),this.addCommonEditEvent(),this.addRemoveEvent(function(){e.loadSection(),e.ctx.mediator.publish(e.events.update,e.options.section)})},_registerDialogWidgets:function(t){var i=this,o=e("[name=Language]",t);o.val()||this.registerWidget({language:new odesk.AutoComplete("language",o.parent(),{url:"/fwh-api/languages/prefix/{q}",jsonPath:["languages"],resultsClass:"oFieldSuggest "+this.options.langResultClass,matchContains:!1,formatItem:function(e){var t=i.options.section.items;for(var o in t)if(t[o].lang_iso_639_code==e.iso639Code)return!1;return!0},getItemValue:function(e){return odesk.string.decodeEntity(e.languageTitle)},highlight:function(t,i,o){var s=o.data,n=e.Autocompleter.defaults.highlight(s.languageTitle,i);return n}})})},_openCommonDialog:function(t){var i=this;this.options.section,e(this.options.langFormSelector).remove(),this.openDialog(this.$editDialog,e.extend({dialogTemplate:this.options.templates.editDialog,onOpen:function(t){i._registerDialogWidgets(t),e.validator.addMethod("langFromAutosuggestion",function(t){if(e("."+i.options.langResultClass+" li[data-term='"+e("input[name=Language]").val()+"']").size()>0)return!0;var o={};return e.ajax({url:"/fwh-api/languages/prefix/"+encodeURI(t),async:!1,success:function(i){o=e.grep(Object.keys(i.languages),function(e){return i.languages[e].languageTitle.toLowerCase()==t.toLowerCase()})}}),o.length>0},"Language is not valid"),e("form",t).oFormValidation({ignore:".ignore,input[type=hidden],:hidden",rules:{Language:{required:!0,langFromAutosuggestion:!0},level:{required:!0}},validateOnSubmit:{Language:!0},callback:function(){return!1},errorPlacements:{level:function(e,t){e.addClass("oFormErrorBottom").appendTo(t.closest(".oFormField"))}}})},onSubmit:function(o,s){var n=e("form",o);i.isFormValid(n)&&(e(".jsSubmit",n).prop("disabled",!0),e(":input",n).prop("readonly",!0),i._updateRefInput(o),i.saveAjaxForm(n,{urlKey:t.urlKey||!1,onSave:function(){i.loadSection(),i.ctx.mediator.publish(i.events.update,i.options.section),s()}}))}},t))},_updateRefInput:function(t){var i=e("[name=lang_ref]",t);if(!i.val()&&!e.isEmptyObject(this.widgets.language.getCacheData())){var o=this.widgets.language.getSelectedData(),s=o&&o.iso639Code?o.iso639Code:"";i.val(s)}},updateDataFromResponse:function(e){var t=[];for(var i in e){var o=e[i];o.recordId=o.lang_iso_639_code,this.options.section.certVerifiedLanguages&&this.options.section.certVerifiedLanguages[o.lang_iso_639_code]&&(o.lang_is_verified_by_cert="1"),t.push(o)}return this.options.section.items=t,!1},startEditing:function(){this.options.section.editing=!0,this.options.section.showSection=!0,this.options.section.items===void 0?this.loadSection():this.$element.html(this._renderTemplate(this.options.templates.section))},doneEditing:function(){this.options.section.editing=!1,this.options.section.showSection=this.options.section.items.length>0,this.$element.html(this._renderTemplate(this.options.templates.section))}}),e.extend(!0,odesk.ContractorLanguages.prototype,odesk.mediator)}(jQuery),odesk.templates.languagesList='{{if items && items.length > 0}}{{each items}}<tr data-id="${$value.lang_iso_639_code}"><td class="jsSubjec">${$value.lang_title}</td><td class="jsDescription">${$value.lang_proficiency_level}</td><td class="oActionsCell"><a class="oBtnEditSmall" href="#">Edit</a> {{if $value.lang_iso_639_code!="en"}}<a class="oBtnDeleteSmall" href="#">Remove</a>{{/if}}</td></tr>{{/each}}{{else}}<tr><td colspan="3"><span class="oNullBig">No Languages</span></td></tr>{{/if}}',odesk.templates.languagesListWysiwyg='{{if showSection}}<section>{{if editing}}<a href="#" class="jsAdd oRight"><i class="oEditIcon"></i>Add</a>{{/if}}<h3 class="oH3 oMute oH3Lite">Languages</h3><ul class="oPlainList">{{each items}}<li data-id="${$value.lang_iso_639_code}">{{if editing}}<div class="oRight oNormal editControl"><a href="#" class="oEditIcon"></a>{{if $value.lang_iso_639_code!="en"}}<a href="#" class="oDeleteIcon"></a>{{/if}}</div>{{/if}}<strong>${$value.lang_title}</strong><span class="oMute"> - ${$value.lang_proficiency_level}</span>{{if $value.lang_is_verified_by_cert=="1"}}<div class="oLink oTxtSmall"><i class="oIconVerified oIconSmall"></i><strong class="txtTop">Verified</strong></div>{{else}}{{if $value.lang_is_verified_by_feedback=="1"}}<div class="oLink oTxtSmall"><i class="oIconVerified oIconSmall"></i><strong class="txtTop">Verified</strong></div>{{else}}<div class="oMute oTxtSmall"><strong>Self-Assessed</strong></div>{{/if}}{{/if}}</li>{{/each}}</ul></section>{{/if}}',odesk.templates.editLanguages='<form id="jsLangForm"><input type="hidden" name="act" value="${action}" /><input type="hidden" name="lang_ref" value="${data.lang_iso_639_code}" /><input type="hidden" name="rid" value="${data.uid}" /><div class="oFormField"><label class="oLabel">Language</label>{{if action && action == "edit"}}<strong>${data.lang_title}</strong><input type="hidden" name="Language" maxlength="70" value="${data.lang_title}">{{else}}<div class="oFieldValue oFormMed"><div><input class="oFormMed" type="text" name="Language" maxlength="70" value="${data.name}"></div></div>{{/if}}</div><div class="oFormField"><label class="oLabel">Proficiency</label><div class="oOptGrp oFormLrg">{{each languages.proficiencyLevels}}<label class="oOpt oOptLbl"><input type="radio" name="level" value="${$value.code}"{{if data.lang_proficiency_rank == $value.rank}} checked="checked"{{/if}}> <strong>${$value.proficiencyTitle}</strong><br>${$value.description}</label>{{/each}}</div></div><footer class="oFormFooter"><div class="oFieldValue"><button class="oBtn oBtnPrimary jsSubmit">Save</button> <button class="oBtn oBtnSecondary jsSubmitMore">Save and Add More</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></div></footer></form>',odesk.templates.removeLanguages='<form><input type="hidden" name="act" value="delete" /><input type="hidden" name="lang_ref" value="${data.lang_iso_639_code}" /><p>Remove ${data.lang_title}?</p><footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Remove</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',function(e){new odesk.Class("odesk.ContractorEmployments","odesk.ContractorSection",{options:{countries:[],profileSection:"employments",optional:!1,employmentCountryResultsClass:"jsEmplCountry",getListUrl:"/fwh-api/get-employment-records",sectionUrl:"/fwh-api/save-employment-record",templates:{section:odesk.pageConfig.profileWysiwyg?"employmentsListWysiwyg":"employmentsList",editDialog:"editEmployment",removeDialog:"removeEmployment",emptyList:""},section:{info:{addDialogTitle:"Add Employment",editDialogTitle:"Edit Employment",removeDialogTitle:"Remove Employment",roles:odesk.pageConfig.employmentRoles,years:odesk.pageConfig.employmentYears,months:odesk.pageConfig.employmentMonths},editing:!1,visibleCount:3}},init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(!0,this.options,o),e.extend(this.events,odesk.events.makeMap(this.name,["update","add"])),this.options.section.optional=this.options.optional,this.addTemplates(),odesk.pageConfig.employmentSection&&(e.extend(!0,this.options.section,odesk.pageConfig.employmentSection),this.options.section.items!==void 0&&(this.updateDataFromResponseItems(odesk.pageConfig.employmentSection.items),this.publishList())),this.options.section.items===void 0&&this.loadSection(),this.addEvents()},loadSection:function(){var t=this;this.ajaxRequest({url:this.options.getListUrl,rawValues:[-1],success:e.proxy(function(e){this.updateDataFromResponse(e),this.publishList(),t.ctx.mediator.publish(t.events.update,t.options.section),localStorage.setItem("storageKeyEmploymentHistory",odesk.json.stringify(t.options.section.items))},this)})},publishList:function(){var e="";e=this.options.section.items&&this.options.section.items.length||!this.options.templates.emptyList?this.options.templates.section:this.options.templates.emptyList,this.$element.html(this._renderTemplate(e))},addEvents:function(){var e=this;this.addCommonEditEvent(),this.addRemoveEvent(function(){e.loadSection()}),this.$element.delegate("a.jsAdd","click",function(t){t.preventDefault(),e.openAddDialog()})},_initAutocompleteForCounties:function(t){var i=this;e.ajax({url:"/fwh-api/countries/",success:function(t){e.map(t.countries,function(e){i.options.countries.push({value:e.Country})})},async:!1});var o={css:{dropdown:"tt-empl-countries-dropdown"},hideHintField:!0,localData:i.options.countries};this.registerWidget("employmentCountry",new odesk.AutoTypeahead("autoComplete",t,o))},_registerDialogWidgets:function(t){var i=this._getEditFormInputs(e("form",t));this.registerWidget({employmentCompany:new odesk.AutoSuggest("employmentCompany",i.company.parent(),{source:"/fwh-api/companies",queryParam:"prefix",extraParams:"&rows=6",resultsClass:"oFieldSuggest oFieldSuggestDivided",currentItemClass:"isCurrent",minChars:1,emptyText:!1,retrieveComplete:function(e){return e.companies},selectedItemProp:"name",searchObjProps:"name",selectedValuesProp:"uid",formatList:function(e,t){var i=t.html('<div class="ib">'+e.name+'</div><div class="oSupportInfo">'+e.country+"</div>");return i},highlight:function(e,t,i){var o;return o=i?RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","g"):RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","gi"),odesk.string.cutStr(e,70).replace(o,"<strong>$1</strong>")}}),employmentJobTitle:new odesk.AutoComplete("employmentJobTitle",i.jobTitle.parent(),{url:"/fwh-api/job-titles/prefix/{q}",jsonPath:["jobTitles"],resultsClass:"oFieldSuggest",matchContains:!1,getItemValue:function(e){return e.jobTitle?odesk.string.decodeEntity(e.jobTitle):!1},highlight:function(t,i,o){var s=o.data,n=e.Autocompleter.defaults.highlight(s.jobTitle,i);return n}})}),this._initAutocompleteForCounties(i.country.parent())},_getEditFormInputs:function(t,i){if(i||e.isEmptyObject(this.editInputs)){var o={recordId:"id",company:"we_cmp_name",companyId:"StandardizedCompanyID",city:"CompanyCity",country:"CompanyCountry",jobTitle:"we_title",jobTitleId:"StandardizedJobTitleID",role:"we_role",fromMonth:"we_from_month",fromYear:"we_from_year",toMonth:"we_to_month",toYear:"we_to_year",description:"we_description"};this.editInputs={};for(var s in o)this.editInputs[s]=e("[name="+o[s]+"]",t)}return this.editInputs},_updateStandardizedInputs:function(){if(!e.isEmptyObject(this.widgets.employmentCompany.getSelectedData())){var t=this.widgets.employmentCompany.getSelectedData(),i=t&&t.uid?t.uid:"";this.editInputs.companyId.val(i)}if(!e.isEmptyObject(this.widgets.employmentJobTitle.getCacheData())){var o=this.widgets.employmentJobTitle.getSelectedData(),s=o&&o.uid?o.uid:"";this.editInputs.jobTitleId.val(s)}},validateCountry:function(t){return 0!==e.grep(this.options.countries,function(e){return e.value.toLowerCase()==t.toLowerCase()}).length},_openCommonDialog:function(t){var i=this;this.$editDialog=this.openDialog(this.$editDialog,e.extend({keepContent:!0,dialogTemplate:this.options.templates.editDialog,onInit:function(t,o,s){var n=e("form",t),a=s.data,r=i._getEditFormInputs(n);for(var l in r)r[l].val(a&&a[l]||"");r.country.typeahead("val",r.country.val()),r.country.typeahead("close");var d="edit"===o.action?a.fromYear&&!a.toYear:!1;e(".jsCurrentlyWork",n).prop("checked",d).trigger("change"),e("[name=http_method]",n).remove(),"edit"===o.action&&n.append('<input type="hidden" name="http_method" value="put" />')},onOpen:function(t){var o=e("form",t),s=i._getEditFormInputs(o),n=s.fromMonth,a=s.fromYear,r=s.toMonth,l=s.toYear,d=e(".jsCurrentlyWork",t),c=e(".jsWeTo",t),p=e(".jsWeToPresent",t);i._registerDialogWidgets(t),s.country.on("focusout typeahead:selected typeahead:autocompleted",function(){s.country.valid()}),s.country.on("keydown keyup keypress",function(){i.validateCountry(s.country.val())&&s.country.valid()}),e.validator.addMethod("fromBeforeToEmployment",function(){if(!n.val()||!a.val())return!0;if(!(d.prop("checked")||r.val()&&l.val()))return!0;var e=d.prop("checked")?new Date:new Date(l.val(),r.val()-1,1),t=new Date(a.val(),n.val()-1,1);return e>=t},"Please be sure the start date is not after the end date."),e.validator.addMethod("validEndDate",function(){return r.val()&&l.val()?d.prop("checked")||new Date(l.val(),r.val()-1,1)<=new Date:!0},"Be sure the end date is no later than this month. If you are still in this position, click the checkbox."),e.validator.addMethod("periodRequired",function(t,i){switch(e(i).attr("name")){case"we_from_month":case"we_from_year":return t.length>0;default:return d.prop("checked")||t.length>0}},"These fields are required."),e.validator.addMethod("countryFromAutosuggestion",function(e){return i.validateCountry(e)},"Country is not valid"),e("form",t).oFormValidation({ignore:".ignore,input[type=hidden],:hidden",rules:{we_cmp_name:{required:!0},CompanyCity:{required:!0},CompanyCountry:{required:!0,countryFromAutosuggestion:!0},we_title:{required:!0},we_role:{required:!0},we_from_month:{periodRequired:!0},we_from_year:{periodRequired:!0},we_to_month:{periodRequired:!0},we_to_year:{periodRequired:!0},currentlyWork:{validEndDate:!0,fromBeforeToEmployment:!0},we_description:{maxlength:10240,preventStuffing:!0}},validateOnSubmit:{CompanyCountry:!0},messages:{we_description:{maxlength:"Must be less than 10,240 characters"}},errorPlacements:{we_cmp_name:i._errorReplacementForAutoSuggest,we_title:i._errorReplacementForAutoSuggest,CompanyCity:i._errorReplacementForAutoSuggest,CompanyCountry:function(e,t){e.insertAfter(t.parent().parent().parent())},we_from_month:i._errorReplacementForPeriod,we_from_year:i._errorReplacementForPeriod,we_to_month:i._errorReplacementForPeriod,we_to_year:i._errorReplacementForPeriod,currentlyWork:i._errorReplacementForPeriod,we_description:function(e,t){e.addClass("oFormErrorBottom").appendTo(t.closest(".oFormField"))}},callback:function(){return!1}}),e(".oCountdown",t).remove(),d.change(function(){d.prop("checked")?(c.hide(),p.show(),r.val("").valid(),l.val("").valid()):(c.show(),p.hide())}),a.val()||l.val()||d.prop("checked",!1),a.val()&&!l.val()&&d.prop("checked",!0).change(),n.add(a).add(r).add(l).change(function(){d.valid()})},onSubmit:function(t,o,s,n,a){var r=e("form",t);i.isFormValid(r)&&(i._updateStandardizedInputs(),i.saveAjaxForm(r,{urlKey:s.urlKey||!1,onSave:function(){i.loadSection(),i.ctx.mediator.publish(i.events.update,n),"add"!==s.action||a||i.ctx.mediator.publish(i.events.add,i.options.profileSection),o()}}))}},t))},_errorReplacementForAutoSuggest:function(e,t){e.addClass("oFormErrorBottom").appendTo(t.closest(".jsFieldContainer")).wrap("<div />")},_errorReplacementForPeriod:function(e,t){0===t.closest(".oFieldValue").find(".jsPeriodError").length&&e.addClass("oFormErrorBottom jsPeriodError").appendTo(t.closest(".oFieldValue"))},updateDataFromResponse:function(e){"0"!==e.total_items&&e.employments&&e.employments.employment?this.updateDataFromResponseItems("1"!==e.total_items?e.employments.employment:[e.employments.employment]):this.options.section.items=!1},updateDataFromResponseItems:function(e){this.options.section.items=[];var t=this.options.section.items;for(var i in e){var o=e[i],s=odesk.date.sparse(o.start_date),n=o.end_date&&"Present"!=o.end_date?odesk.date.sparse(o.end_date):!1;t.push({recordId:o.record_id,company:o.company||"",companyId:o.StandardizedCompanyID||"",city:o.CompanyCity||"",country:o.CompanyCountry||"",title:o.title||"",jobTitle:o.job_title||"",jobTitleId:o.StandardizedJobTitleID||"",role:o.role,startUnixTime:parseInt(o.start_date,10),endUnixTime:o.end_date?parseInt(o.end_date,10):Number.MAX_VALUE,startDate:odesk.date.format(s,"%m/%Y"),startDateFullMonth:odesk.date.format(s,"%b %Y"),endDate:n?odesk.date.format(n,"%m/%Y"):"Present",endDateFullMonth:n?odesk.date.format(n,"%b %Y"):"Present",fromMonth:s.getMonth()+1,fromYear:odesk.date.format(s,"%Y"),toMonth:n?n.getMonth()+1:"",toYear:n?odesk.date.format(n,"%Y"):"",description:o.description_raw||"",descriptionHtml:o.description_html||""})}this.sortItems(t,{startUnixTime:!1,endUnixTime:!1})}}),e.extend(!0,odesk.ContractorEmployments.prototype,odesk.mediator)}(jQuery),odesk.templates.employmentsList='<table class="oTable"><thead><tr><th>From</th><th>To</th><th>Company</th><th>Title/Role</th><th>Actions</th></tr></thead><tbody>{{if items && items.length}}{{each items}}<tr data-id="${$value.recordId}"><td class="jsStartDate">${$value.startDate}</td><td class="jsEndDate">${$value.endDate}</td><td class="jsCompany">${$value.company}</td><td class="jsTitle">${$value.title}</td><td class="oActionsCell"><a class="oBtnEditSmall" href="#">Edit</a> <a class="oBtnDeleteSmall" href="#">Remove</a></td></tr>{{/each}}{{else}}<tr><td colspan="5"><span class="oNullBig">No Employment History</span></td></tr>{{/if}}</tbody></table>{{if info.showAdditionalAddButton}}<a href="#" class="oBtn oBtnSecondary jsAdd">Add Employment</a>{{/if}}',odesk.templates.employmentsListWysiwyg='{{if items.length || editing}}<section class="oListLite"><h2 class="oH2Lite">{{if editing}}<a class="jsAdd oRight oBtnEditSmall" href="#">Add</a>{{/if}}Employment History</h2>{{if items.length}}{{each items}}<article data-id="${$value.recordId}"{{if !editing && $index>=visibleCount}} class="isHidden"{{/if}}>{{if editing}}<div class="oRight oNormal editControl"><div class="p"><a href="#" class="oEditIcon"></a><a href="#" class="oDeleteIcon"></a></div></div>{{/if}}<h1 class="oRowTitle">${$value.jobTitle} <span class="oHMin">${$value.company}</span></h1><div class="oSupportInfo">${$value.startDateFullMonth} - ${$value.endDateFullMonth}</div><p data-id="${$value.recordId}">{{html $value.descriptionHtml}}</p></article>{{/each}}{{if !editing && items.length>visibleCount}}<footer class="oMoreRow"><button class="oMore oMoreLarge">View More <span class="jsCount oMoreCount">${items.length - visibleCount}</span></button></footer>{{/if}}{{else}}<ul class="oList"><li><span class="oNullBig">No Employment History</span></li></ul>{{/if}}</section>{{/if}}',odesk.templates.employmentDescriptionHint='<div><strong>List projects, responsibilities and accomplishments in this role.</strong></div><div class="oMute">For example:</div><div>I was responsible for frontend software development of our customer facing website.  I designed and implemented features, conducted code reviews and  worked closely with a team of designers and product managers.</div>',odesk.templates.editEmployment='<form>{{if action && action == "edit"}}<input type="hidden" name="http_method" value="put" />{{/if}}<input type="hidden" name="id" value="${data.recordId}"><input type="hidden" name="StandardizedCompanyID" value="${data.companyId}"><input type="hidden" name="StandardizedJobTitleID" value="${data.jobTitleId}"><div class="oFormField"><label class="oLabel">Company</label><div class="oFieldValue oFormLrg jsFieldContainer"><div><input class="oFormLrg" type="text" name="we_cmp_name" maxlength="200" value="${data.company}"></div></div></div><div class="oFormField"><label class="oLabel">Location</label><div class="oFieldValue oFormLrg"><div class="ib txtTop oFormSml jsFieldContainer"><div><input placeholder="City" class="oInputText oFormSml" type="text" name="CompanyCity" maxlength="70" value="${data.city}"></div> </div> <div class="ib txtTop oFormSml jsFieldContainer"><div><input placeholder="Country" class="oInputText oFormSml" type="text" name="CompanyCountry" maxlength="70" value="${data.country}"></div> </div></div></div><div class="oFormField"><label class="oLabel">Title</label><div class="oFieldValue oFormLrg jsFieldContainer"><div><input class="oFormLrg" type="text" name="we_title" maxlength="70" value="${data.jobTitle}"></div></div></div><div class="oFormField"><label class="oLabel">Role</label><select class="oFormMed" name="we_role"><option value="">Please select...</option>{{each info.roles}}<option value="${$index}"{{if data.role == $index}} selected="selected"{{/if}}>${$value}</option>{{/each}}</select></div><div class="oFormField"><label class="oLabel">Period</label><div class="oFieldValue"><span class="ib txtTop"><select name="we_from_month"><option value="">Month...</option>{{each info.months}}<option value="${$index}"{{if data.fromMonth == $index}} selected="selected"{{/if}}>${$value}</option>{{/each}}</select> <select name="we_from_year"><option value="">Year...</option>{{each info.years}}<option value="${$value}"{{if data.fromYear == $value}} selected="selected"{{/if}}>${$value}</option>{{/each}}</select></span> &ndash; <span class="ib txtTop"><div class="jsWeTo"><select name="we_to_month"><option value="">Month...</option>{{each info.months}}<option value="${$index}"{{if data.toMonth == $index}} selected="selected"{{/if}}>${$value}</option>{{/each}}</select> <select name="we_to_year"><option value="">Year...</option>{{each info.years}}<option value="${$value}"{{if data.toYear == $value}} selected="selected"{{/if}}>${$value}</option>{{/each}}</select></div><div class="jsWeToPresent oHidden">Present</div><label class="oOptLbl"><input type="checkbox" class="jsCurrentlyWork" name="currentlyWork">I currently work here</label></span></div></div><div class="oFormField oOptional"><label class="oLabel">Description<span class="oHelpDot" data-content="${odesk.templates.employmentDescriptionHint}" data-class-name="oHelpTip" data-placement="top bottom" data-delay="{&quot;show&quot;:300,&quot;hide&quot;:400}" data-rel="flyout"></span></label><textarea class="oFormLrg" name="we_description">${data.description}</textarea></div><footer class="oFormFooter"><div class="oFieldValue"><button class="oBtn oBtnPrimary jsSubmit">Save</button> <button class="oBtn oBtnSecondary jsSubmitMore">Save and Add More</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></div></footer></form>',odesk.templates.removeEmployment='<form><input type="hidden" name="http_method" value="delete" /><input type="hidden" name="id" value="${data.recordId}"><p>Remove item "${data.company}"?</p><footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Remove</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',odesk.templates.emptyEmploymentList='<div class="oWidget oWidgetLink jsAdd"><div class="oBd oMed"><i class="oIconBriefcase oIconLarge oIconLeft oIconLight"></i><div class="oBd oMute"><a class="oTxtMega jsAddLink" href="#">Add your Employment History</a>{{if optional}} (Optional){{/if}}<div class="oTxtMed">Tell clients about your work experience</div></div></div></div>',function(e){e.validator.addMethod("preventStuffing",function(e,t){return this.optional(t)?!0:e.replace(/(.{4,}?)(?:\1{5,})/g,function(e,t){return/^(\s*(<(\/?[^>]+)>|&nbsp;|[^\s]{0,3})\s*|(.)\4+)$/.test(t)?e:""})===e},"This isn't a valid description.")}(jQuery),function(e){new odesk.Class("odesk.ContractorEducations","odesk.ContractorSection",{options:{profileSection:"educations",degreeSuggestionClass:"oFieldSuggestDegree",getListUrl:"/fwh-api/get-education-records",sectionUrl:"/fwh-api/save-education-record",templates:{section:odesk.pageConfig.profileWysiwyg?"educationsListWysiwyg":"educationsList",editDialog:"editEducation",removeDialog:"removeEducation",emptyList:""},section:{info:{addDialogTitle:"Add Education",editDialogTitle:"Edit Education",removeDialogTitle:"Remove Education",educationFromYears:odesk.pageConfig.educationFromYears,educationToYears:odesk.pageConfig.educationToYears},editing:!1,visibleCount:3}},init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(!0,this.options,o),e.extend(!0,this.options.section,odesk.pageConfig.educationSection),e.extend(this.events,odesk.events.makeMap(this.name,["update","add"])),this.editInputs={},this.addTemplates(),this.options.section.items===void 0?this.loadSection():this.$element.html(this._renderTemplate(this.options.templates.section)),this.addEvents()},loadSection:function(){var t=this;this.ajaxRequest({rawValues:[-1],url:this.options.getListUrl,success:e.proxy(function(e){this.updateDataFromResponse(e);var i="";i=this.options.section.items&&this.options.section.items.length||!this.options.templates.emptyList?this.options.templates.section:this.options.templates.emptyList,this.$element.html(this._renderTemplate(i)),t.ctx.mediator.publish(t.events.update,t.options.section)},this)})},addEvents:function(){var e=this;this.addCommonEditEvent(),this.addRemoveEvent(function(){e.loadSection()}),this.$element.delegate("a.jsAdd","click",function(t){t.preventDefault(),e.openAddDialog()})},_registerDialogWidgets:function(t){var i=e("[name=SchoolName]",t),o=(e("[name=StandardizedSchoolID]",t),e("[name=Degree]",t)),s=(e("[name=StandardizedDegreeID]",t),e("[name=AreaOfStudy]",t));e("[name=StandardizedAreaStudyID]",t),this.registerWidget({educationSchool:new odesk.AutoSuggest("educationSchool",i.parent(),{source:"/fwh-api/schools",queryParam:"prefix",extraParams:"&rows=6",resultsClass:"oFieldSuggest oFieldSuggestDivided",currentItemClass:"isCurrent",minChars:1,emptyText:!1,retrieveComplete:function(e){return e.schools},selectedItemProp:"institution",searchObjProps:"institution",selectedValuesProp:"uid",formatList:function(e,t){var i=t.html('<div class="ib">'+e.institution+'</div><div class="oSupportInfo">'+e.country+"</div>");return i},highlight:function(e,t,i){var o;return o=i?RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","g"):RegExp("(?![^&;]+;)(?!<[^<>]*)("+t+")(?![^<>]*>)(?![^&;]+;)","gi"),odesk.string.cutStr(e,70).replace(o,"<strong>$1</strong>")}}),educationDegree:new odesk.AutoComplete("educationDegree",o.parent(),{url:"/fwh-api/degrees/prefix/{q}",jsonPath:["degrees"],resultsClass:"oFieldSuggest "+this.options.degreeSuggestionClass,matchContains:!1,getItemValue:function(e){return e.degree?odesk.string.decodeEntity(e.degree):!1},highlight:function(t,i,o){var s=o.data,n=e.Autocompleter.defaults.highlight(s.degree,i);return n}}),educationAreaOfStudy:new odesk.AutoComplete("educationAreaOfStudy",s.parent(),{url:"/fwh-api/areas-of-study/prefix/{q}",jsonPath:["areas"],resultsClass:"oFieldSuggest",matchContains:!1,getItemValue:function(e){return e.areaOfStudy?odesk.string.decodeEntity(e.areaOfStudy):!1},highlight:function(t,i,o){var s=o.data,n=e.Autocompleter.defaults.highlight(s.areaOfStudy,i);return n}})})},_getEditFormInputs:function(t,i){if(i||e.isEmptyObject(this.editInputs)){var o={recordId:"id",schoolName:"SchoolName",fromYear:"YearStarted_year",toYear:"YearEnded_year",degree:"Degree",areaOfStudy:"AreaOfStudy",comments:"Comments",schoolId:"SchoolId",degreeId:"DegreeId",areaOfStudyId:"AreaOfStudyId"};this.editInputs={};for(var s in o)this.editInputs[s]=e("[name="+o[s]+"]",t)}return this.editInputs},_updateStandardizedInputs:function(){if(e.isEmptyObject(this.widgets.educationSchool.getSelectedData()))this.editInputs.schoolId.val("");else{var t=this.widgets.educationSchool.getSelectedData(),i=t&&t.uid?t.uid:"";this.editInputs.schoolId.val(i)}if(!e.isEmptyObject(this.widgets.educationDegree.getCacheData())){var o=this.widgets.educationDegree.getSelectedData(),s=o&&o.uid?o.uid:"";this.editInputs.degreeId.val(s)}if(!e.isEmptyObject(this.widgets.educationAreaOfStudy.getCacheData())){var n=this.widgets.educationAreaOfStudy.getSelectedData(),a=n&&n.uid?n.uid:"";this.editInputs.areaOfStudyId.val(a)}},_openCommonDialog:function(t){var i=this;this.$editDialog=this.openDialog(this.$editDialog,e.extend({keepContent:!0,dialogTemplate:this.options.templates.editDialog,onInit:function(t,o,s){var n=e("form",t),a=i._getEditFormInputs(n);for(var r in a)a[r].val(s.data&&s.data[r]||"");e("[name=http_method]",n).remove(),"edit"===o.action&&n.append('<input type="hidden" name="http_method" value="put" />')},onOpen:function(t){var o=e("form",t),s=i._getEditFormInputs(o),n=(s.degree,s.fromYear),a=s.toYear;i._registerDialogWidgets(),e.validator.addMethod("fromBeforeToEducation",function(){return n.val()&&a.val()?n.val()<=a.val():!0},"Please be sure the start year is not after the end year."),e.validator.addMethod("degreeFromAutosuggestion",function(t){var o={},s=e("input[name=Degree]").val();return""==s||e("."+i.options.degreeSuggestionClass+" li[data-term='"+s+"']").size()>0?!0:(e.ajax({url:"/fwh-api/degrees/prefix/"+encodeURI(t),async:!1,success:function(i){o=e.grep(Object.keys(i.degrees),function(e){return i.degrees[e].degree.toLowerCase()==t.toLowerCase()})}}),o.length>0)},"Select the appropriate Degree from the drop down list"),e("form",t).oFormValidation({ignore:".ignore,input[type=hidden],:hidden",errorsAtRight:!0,rules:{SchoolName:{required:!0},YearStarted_year:{required:!0,fromBeforeToEducation:!0},YearEnded_year:{required:!0,fromBeforeToEducation:!0},Degree:{degreeFromAutosuggestion:!0},Comments:{maxlength:10240,preventStuffing:!0}},validateOnSubmit:{Degree:!0},messages:{Comments:{maxlength:"Must be less than 10,240 characters"}},errorPlacements:{SchoolName:function(e,t){e.addClass("oFormErrorBottom").appendTo(t.closest(".oFieldValue")).wrap("<div />")},YearStarted_year:i._errorReplacementForPeriod,YearEnded_year:i._errorReplacementForPeriod,Comments:function(e,t){e.addClass("oFormErrorBottom").appendTo(t.closest(".oFormField"))}},callback:function(){return!1}}),e(".oCountdown",t).remove()},onSubmit:function(t,o,s,n,a){var r=e("form",t);i.isFormValid(r)&&(e(".jsSubmit",r).prop("disabled",!0),e(":input",r).prop("readonly",!0),i._updateStandardizedInputs(),i.saveAjaxForm(r,{urlKey:s.urlKey||!1,onSave:function(){i.loadSection(),i.ctx.mediator.publish(i.events.update,n),"add"!==s.action||a||i.ctx.mediator.publish(i.events.add,i.options.profileSection),o()}}))}},t))},_errorReplacementForPeriod:function(e,t){0===t.closest(".oFieldValue").find(".jsPeriodError").length&&e.addClass("oFormErrorBottom jsPeriodError").appendTo(t.closest(".oFieldValue")).wrap("<div />")},updateDataFromResponse:function(e){if("0"!==e.total_items&&e.educations&&e.educations.education){this.options.section.items=[];var t=this.options.section.items,i="1"!==e.total_items?e.educations.education:[e.educations.education];for(var o in i){var s=i[o],n=odesk.date.sparse(s.year_started),a=s.year_ended?odesk.date.sparse(s.year_ended):!1;t.push({recordId:s.record_id,schoolName:s.school_name||"",degree:s.degree||"",areaOfStudy:s.area_of_study||"",startUnixTime:parseInt(s.year_started,10),endUnixTime:s.year_ended?parseInt(s.year_ended,10):Number.MAX_VALUE,startDate:odesk.date.format(n,"%Y"),fromMonth:odesk.date.format(n,"%b"),endDate:a?odesk.date.format(a,"%Y")+(a.getFullYear()>(new Date).getFullYear()?" (expected)":""):"Present",fromYear:odesk.date.format(n,"%Y"),toYear:a?odesk.date.format(a,"%Y"):"",toMonth:a?odesk.date.format(a,"%b"):"",comments:s.comments_raw||"",commentsHtml:s.comments_html||"",schoolId:s.StandardizedSchoolID||"",areaOfStudyId:s.StandardizedAreaStudyID||"",degreeId:s.StandardizedDegreeID||""})}this.sortItems(t,{startUnixTime:!1,endUnixTime:!1})}else this.options.section.items=!1}}),e.extend(!0,odesk.ContractorEducations.prototype,odesk.mediator)}(jQuery),odesk.templates.educationsList='<table class="oTable"><thead><tr><th>From</th><th>To</th><th>School</th><th>Area of Study</th><th>Actions</th></tr></thead><tbody>{{if items && items.length}}{{each items}}<tr data-id="${$value.recordId}"><td class="jsStartDate">${$value.startDate}</td><td class="jsEndDate">${$value.endDate}</td><td class="jsSchoolName">${$value.schoolName}</td><td class="jsAreaOfStudy">{{if $value.areaOfStudy}}${$value.areaOfStudy}{{else}}&nbsp;{{/if}}</td><td class="oActionsCell"><a class="oBtnEditSmall" href="#">Edit</a> <a class="oBtnDeleteSmall" href="#">Remove</a></td></tr>{{/each}}{{else}}<tr><td colspan="5"><span class="oNullBig">No Education</span></td></tr>{{/if}}</tbody></table>{{if info.showAdditionalAddButton}}<a href="#" class="oBtn oBtnSecondary jsAdd">Add Education</a>{{/if}}',odesk.templates.educationsListWysiwyg='{{if items.length || editing}}<section class="oListLite"><h2 class="oH2Lite">{{if editing}}<a class="jsAdd oRight oBtnEditSmall" href="#">Add</a>{{/if}}Education</h2>{{if items.length}}{{each items}}<article data-id="${$value.recordId}"{{if !editing && $index>=visibleCount}} class="isHidden"{{/if}}>{{if editing}}<div class="oRight oNormal editControl"><div class="p"><a href="#" class="oEditIcon"></a><a href="#" class="oDeleteIcon"></a></div></div>{{/if}}<h1 class="oRowTitle">${$value.degree}{{if $value.degree && $value.areaOfStudy}}, {{/if}}${$value.areaOfStudy} <span class="{{if $value.degree || $value.areaOfStudy}}oHMin{{else}}oHMinClean{{/if}}">${$value.schoolName}</span></h1><div class="oSupportInfo">${$value.startDate} - ${$value.endDate}</div><p data-id="${$value.recordId}">{{html $value.commentsHtml}}</p></article>{{/each}}{{if !editing && items.length>visibleCount}}<footer class="oMoreRow"><button class="oMore oMoreLarge">View More <span class="jsCount oMoreCount">${items.length - visibleCount}</span></button></footer>{{/if}}{{else}}<ul class="oList"><li><span class="oNullBig">No Education</span></li></ul>{{/if}}</section>{{/if}}',odesk.templates.educationDescriptionHint='<div><strong>List your coursework, activities, honors and awards received</strong></div><div class="oMute">For example:</div><div>Most of my coursework was focused on Software Engineering but I minored in Economics. I was twice elected to student council as Treasurer and won an award for humanitarian work.</div>',odesk.templates.editEducation='<form>{{if action && action == "edit"}}<input type="hidden" name="http_method" value="put" />{{/if}}<input type="hidden" name="id" value="${data.recordId}"><input type="hidden" name="SchoolId" value="${data.schoolId}"><input type="hidden" name="AreaOfStudyId" value="${data.areaOfStudyId}"><input type="hidden" name="DegreeId" value="${data.degreeId}"><div class="oFormField"><label class="oLabel">School</label><div class="oFieldValue oFormLrg"><div><input class="oFormMed" type="text" name="SchoolName" maxlength="200" value="${data.schoolName}"></div></div></div><div class="oFormField"><label class="oLabel">Dates Attended</label><div class="oFieldValue"><select name="YearStarted_year"><option value="">From</option>{{each info.educationFromYears}}<option value="${$value}"{{if data.fromYear == $value}} selected="selected"{{/if}}>${$value}</option>{{/each}}</select> &ndash; <select name="YearEnded_year"><option value="">To</option>{{each info.educationToYears}}<option value="${$value}"{{if data.toYear == $value}} selected="selected"{{/if}}>${$value}</option>{{/each}}</select> <span class="oNull">Or expected graduation year</span></div></div><div class="oFormField oOptional"><label class="oLabel">Degree</label><div class="oFieldValue oFormMed"><input class="oFormMed" type="text" name="Degree" maxlength="70" value="${data.degree}"></div></div><div class="oFormField oOptional"><label class="oLabel">Area of Study<span class="oHelpDot" data-content="Primary focus of your academic work at this school" data-class-name="oHelpTip" data-placement="top bottom" data-delay="{&quot;show&quot;:300,&quot;hide&quot;:400}" data-rel="flyout"></span></label><div class="oFieldValue oFormMed"><input class="oFormMed" type="text" name="AreaOfStudy" maxlength="70" value="${data.areaOfStudy}"></div></div><div class="oFormField oOptional"><label class="oLabel">Description<span class="oHelpDot" data-content="${odesk.templates.educationDescriptionHint}" data-class-name="oHelpTip" data-placement="top bottom" data-delay="{&quot;show&quot;:300,&quot;hide&quot;:400}" data-rel="flyout"></span></label><textarea class="oFormMed oFormShort" name="Comments">${data.comments}</textarea></div><footer class="oFormFooter"><div class="oFieldValue"><button class="oBtn oBtnPrimary jsSubmit">Save</button> <button class="oBtn oBtnSecondary jsSubmitMore">Save and Add More</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></div></footer></form>',odesk.templates.removeEducation='<form><input type="hidden" name="http_method" value="delete" /><input type="hidden" name="id" value="${data.recordId}"><p>Remove item "${data.schoolName}"?</p><footer class="oFormFooter txtCenter"><button class="oBtn oBtnPrimary jsSubmit">Remove</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></footer></form>',odesk.templates.emptyEducationList='<div class="oWidget oWidgetLink jsAdd"><div class="oBd oMed"><i class="oIconGraduationCap oIconLarge oIconLeft oIconLight"></i><div class="oBd oMute"><a class="oTxtMega" href="#">Add Education</a><div class="oTxtMed">Tell clients about your education</div></div></div></div>',function(e){"$:nomunge";
var t,i=decodeURIComponent;e.deparam=function(o,s){var n={},a={"true":!0,"false":!1,"null":null};return e.each(o.replace(/\+/g," ").split("&"),function(o,r){var l,d=r.split("="),c=i(d[0]),p=n,u=0,h=c.split("]["),f=h.length-1;if(/\[/.test(h[0])&&/\]$/.test(h[f])?(h[f]=h[f].replace(/\]$/,""),h=h.shift().split("[").concat(h),f=h.length-1):f=0,2===d.length)if(l=i(d[1]),s&&(l=l&&!isNaN(l)?+l:"undefined"===l?t:a[l]!==t?a[l]:l),f)for(;f>=u;u++)c=""===h[u]?p.length:h[u],p=p[c]=f>u?p[c]||(h[u+1]&&isNaN(h[u+1])?{}:[]):l;else e.isArray(n[c])?n[c].push(l):n[c]=n[c]!==t?[n[c],l]:l;else c&&(n[c]=s?t:"")}),n}}(jQuery,this),function(e){new odesk.Class("odesk.ContractorAvailability","odesk.AbstractWidget",{options:{profileSection:"availabilityForProjects",sectionUrl:"/fwh-api/get-update-availability/",selectorAvailability:".jsAvailability",templates:{section:"contractorAvailability",editDialog:"editContractorAvailability"}},init:function(t,i,o){this.name=t,this.$element=e(i),e.extend(!0,this.options,o),e.extend(this.events,odesk.events.makeMap(this.name,["update"]));var s=this;this.$element.delegate("a.jsAvailabilityEdit","click",function(e){e.preventDefault(),s.openEditDialog()}.bind(this))},loadSection:function(){var t=this;odesk.ajax({type:"GET",cache:!1,url:this.options.sectionUrl,success:e.proxy(function(e){odesk.pageConfig.contractorAvailability.data=e,t.updateSection()},this)})},updateSection:function(){e(this.options.selectorAvailability,this.$element).html(e.tmpl(odesk.templates[odesk.pageConfig.contractorAvailability.template],odesk.pageConfig.contractorAvailability))},openEditDialog:function(){var t=this;if(!odesk.pageConfig.contractorAvailability.data.error){var i=e("<div></div>");i.html(e.tmpl(odesk.templates.editContractorAvailability,odesk.pageConfig.contractorAvailability)),i.dialog({title:"Edit Availability",autoOpen:!0,modal:!0,resizable:!1,width:740,open:function(){var t=e(".oDatePicker",i),o=odesk.date.now(),s=odesk.date.formatDate(o,"yymmdd"),n=odesk.pageConfig.contractorAvailability.data.availableAgain,a="mm/dd/yy",r=new odesk.DateSelector("datePicker",t,{defaultDate:n?odesk.date.parseDate(n,a):"",beforeShowDay:function(e){return[odesk.date.formatDate(odesk.date.localToUtc(e),"yymmdd")>=s,""]},onSelect:function(e){t.val(odesk.date.formatDate(e,a)).keyup()}});r.$input.datepicker("option","dateFormat",a),e(".oOptBoxSmall",i).mouseup(function(){"smallBoxAvailable"==e(this).attr("id")&&(e("#smallBoxAvailable",i).addClass("isChecked"),e("#availableBox",i).removeClass("isHidden"),e("#smallBoxNotAvailable",i).removeClass("isChecked"),e("#notAvailableBox",i).addClass("isHidden"),e("input:radio",this).prop("checked",!0)),"smallBoxNotAvailable"==e(this).attr("id")&&(e("#smallBoxNotAvailable",i).addClass("isChecked"),e("#notAvailableBox",i).removeClass("isHidden"),e("#smallBoxAvailable",i).removeClass("isChecked"),e("#availableBox",i).addClass("isHidden"),e("input:radio",this).prop("checked",!0))})}}),e(".jsSubmit",i).off("click").on("click",function(o){o.preventDefault();var s=e("form",i);e(".oBtn",s).prop("disabled",!0),odesk.loading.show("Saving...");var n=s.serializeArray(),a=e.deparam(window.location.search.replace("?",""));a.asource!==void 0&&(t.options.source=a.asource),"undefined"!==t.options.source&&n.push({name:"source",value:t.options.source}),odesk.ajax({type:"POST",cache:!1,dataType:"json",url:t.options.sectionUrl,data:e.param(n),complete:function(o){e(".oBtn",s).prop("disabled",!1),odesk.loading.hide();var n=odesk.json.parse(o.responseText);n.error&&n.error.message?t.setFormError(s,{message:n.error.message}):(i.dialog("close"),t.loadSection(),t.ctx.mediator.publish(t.events.update,t.options.section))}})}),e(".jsCancel",i).off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),i.dialog("close")})}},setFormError:function(t,i){i=e.extend({msgClass:"oMsgError",message:"Please fix errors below",show:!0},i);var o=t.prev(".oFormHeader");o.length||(o=e('<header class="oFormHeader jsGenerated isHidden"></header>').insertBefore(t));var s=e(".oMsg",o);s.length||(s=e("<article></article>").appendTo(o)),s.attr("class","oMsg "+i.msgClass).html(i.message),o.hasClass("jsGenerated")?o.toggleClass("isHidden",!i.show):s.toggleClass("isHidden",!i.show)},setWarning:function(e){odesk.pageConfig.contractorAvailability.warningMessage=e},startEditing:function(){odesk.pageConfig.contractorAvailability.editing=!0,odesk.pageConfig.contractorAvailability.showSection=!0,this.updateSection()},doneEditing:function(){odesk.pageConfig.contractorAvailability.editing=!1,odesk.pageConfig.contractorAvailability.showSection=!odesk.pageConfig.contractorAvailability.data.isEmpty||odesk.pageConfig.contractorAvailability.responsivenessText,this.updateSection()}}),e.extend(!0,odesk.ContractorAvailability.prototype,odesk.mediator)}(jQuery),odesk.templates.contractorAvailability='{{if !data.isEmpty}}{{if data.capacity=="partTime"}}Available for new projects - 10-30 hours/week{{/if}}{{if data.capacity=="lessThen"}}Available for projects - Less than 10 hours/week{{/if}}{{if data.capacity=="fullTime"}}Available for new projects{{/if}}{{if data.capacity=="notSure"}}Not sure at this time{{/if}}{{if !data.capacity}}Not available for new work {{if data.availableAgain}}until ${data.availableAgain}{{/if}}{{/if}}{{/if}} (<a class="jsAvailabilityEdit" href="#">Change</a>)',odesk.templates.contractorAvailabilityFWH='{{if !data.isEmpty}}{{if data.capacity}}<span class="oGood oTxtSmall">AVAILABLE</span>{{else}}<span class="oNull oTxtSmall">NOT AVAILABLE</span>{{/if}} for new work {{else}}Availability is not set{{/if}}(<a class="jsAvailabilityEdit" href="#">Change</a>)',odesk.templates.contractorAvailabilityWYSIWYG='{{if showSection}}{{if editing}}<a href="#" class="jsAvailabilityEdit oRight"><i class="oEditIcon"></i>Edit</a>{{/if}}<h3 class="oH3 oMute oH3Lite">Availability</h3><ul class="oPlainList">{{if !data.isEmpty}}{{if data.capacity}}<li class="oTxtMed"><strong>Available</strong></li>{{/if}}<li  class="oTxtMed">{{if data.capacity=="fullTime"}}<strong>Full time</strong> <span class="oMute">30+ hrs / week</span>{{/if}}{{if data.capacity=="partTime"}}<strong>Part time</strong> <span class="oMute">10 - 30 hrs / week</span>{{/if}}{{if data.capacity=="lessThen"}}<strong>Part time</strong> <span class="oMute">under 10 hrs / week</span>{{/if}}{{if data.capacity=="notSure"}}Not sure at this time{{/if}}{{if !data.capacity}}<strong>Not available</strong>{{if data.availableAgain}} <span class="oMute">until ${data.availableAgain}</span>{{/if}}{{/if}}</li>{{/if}}{{if responsivenessText}}<li class="oTxtMed"><strong class="jsResponsiveness" data-responsiveness="${responsivenessScore}">${responsivenessText}</strong> <span class="oMute">response time</span>{{if editing}}<span class="oHelpDot" data-content="A Responsiveness Score will be shown on your public profile. By showing how often you respond to requests, potential clients get a better idea of when you will respond. You can improve your score by accepting or declining all job invitations within 24 hours. <a href=\'https://support.odesk.com/entries/23127826\'>Learn more</a>" data-class-name="oHelpTip" data-placement="bottom top" data-delay="{&quot;show&quot;:300,&quot;hide&quot;:400}" data-rel="flyout"></span>{{else}}<span class="oHelpDot" data-content="This freelancer responds to most messages within ${responsivenessText}" data-class-name="oHelpTip" data-placement="bottom top" data-delay="{&quot;show&quot;:300,&quot;hide&quot;:400}" data-rel="flyout"></span>{{/if}}</li>{{/if}}</ul>{{/if}}',odesk.templates.editContractorAvailability='<form class="oContractorAvailabilityForm"><header class="oFormHeader">{{if warningMessage}}<div class="oMsg oMsgWarning">${warningMessage}</div>{{/if}}</header><div class="col col2of7"><div class="oFormField"><span class="oTxtMed">Are you available to take on new work?</span></div><div class="oFormField"><label class="oOpt oOptLbl">Knowing when you are available helps oDesk find the right jobs for you.</label></div><div class="oFormField"><a target="_blank" href="https://support.odesk.com/entries/23137476">How do we use this info</a></div></div><div class="col col4of7"><div class="oRightPlate"><input type="hidden" name="http_method" value="put"><input type="hidden" name="act" value="edit" /><span class="oOpt oOptLbl">I am currently</span><div class="oOptGrp oOptBoxGrp"><div id="smallBoxAvailable" class="oOpt oOptBox oOptBoxSmall {{if data.capacity || data.isEmpty}} isChecked{{/if}}"><label class="oOptLbl"><input type="radio" name="availability" value="public" {{if data.capacity || data.isEmpty}} checked="checked"{{/if}}>Available</label></div><div id="smallBoxNotAvailable" class="oOpt oOptBox oOptBoxSmall {{if !data.capacity && !data.isEmpty}} isChecked{{/if}}"><label class="oOptLbl"><input type="radio" name="availability" value="" {{if !data.capacity && !data.isEmpty}} checked="checked"{{/if}}>Not Available</label></div></div><div id="availableBox" class="oFormField {{if !data.capacity && !data.isEmpty}} isHidden{{/if}}">{{each enums.capacities}}<label class="oOpt oOptLbl"><input type="radio" name="capacity" value="${$index}" {{if data.capacity == $index || (!data.capacity && $index=="fullTime")}} checked="checked"{{/if}}> ${$value}</label>{{/each}}{{if data.profileAccess != "public"}}<div class="oMed oBtnBox"><span class="oImg oLockIcon"></span> <div class="oBd txtLeft"><div class="oFormField"><ul>Your profile is currently <b>private</b>. Do you want to make it public so clients can see you in search results?</ul></div><input name="profileAccess" type="checkbox" value="public">Yes, make my profile public</div></div>{{/if}}</div><div id="notAvailableBox" class="oFormField {{if data.capacity || data.isEmpty}} isHidden{{/if}}"><span class="oOpt oOptLbl">When do you expect to be ready for new work? </span><span class="oOpt oOptLbl"><input class="oInputText oDatePicker" type="text" name="availableAgain" value="${data.availableAgain}"></span></div><footer class="oFormFooter"><div class="oFormField"><button class="oBtn oBtnPrimary jsSubmit">Save</button> <a class="oBtn oBtnCancel jsCancel" href="#">Cancel</a></div></footer></div></div></form>',function(e){new odesk.Class("odesk.RecommendedFreelancers","odesk.AbstractWidget",{options:{dialog:{title:"...",dialogClass:"jsInviteContractorDialog",autoOpen:!1,modal:!0,width:740,resizable:!1,draggable:!1},epitomeLink:".jsEpitome"},init:function(t){this.name=t,this.$element=e("<div></div>")},openDialog:function(){var t=this,i=odesk.env.CONSOLE_ROOT+"jobs/recommended-freelancers/"+odesk.pageConfig.showRecommendedFreelancers;odesk.ajax({url:i,type:"get",dataType:"json",rawValues:[-1],success:function(i){if(i.hasContractors){var o=e('<div class="jsContactContractorWidget">'+i.result+"</div>");t.$element.html(o),e(t.options.epitomeLink).each(function(){new odesk.Epitome(this)}),t.options.dialog.title="Invitation Sent!",t.$element.dialog(t.options.dialog),t.$element.dialog("open")}}})}}),e.extend(!0,odesk.RecommendedFreelancers.prototype,odesk.mediator)}(jQuery),function(e){new odesk.Class("odesk.BabelSkills","odesk.Tokenizer",{options:{max:10,input:"#skills",itemClassName:"oSkill",limitMessage:"You have reached your skills limit",limitClass:"oFormMsg oFormError",showLimitAlert:!0,items:function(){var t=e(this.input).val();return t?t.split(this.separator):null},onChange:function(e){var t=this.$sourceInput;t.length&&t.val(e.join(this.options.separator)).trigger("change")},data:odesk.env.API_ROOT+"profiles/v1/search/seedskills/{q}.json?status=active",deprecatedQuery:",deprecated",autocomplete:{showNoResultsMessage:!1,queryPlaceholderInUrl:"{q}",dataType:"json",jsonPath:["skill"],limit:100,max:1e5,onNoResults:function(t,i,o){var s="oAdvice",n="isSelected";o.data("init")||(o.data("init",!0).delegate("."+s,"mousedown",function(i){t.data("tokenizer").add(e(i.target).text())}),o.data("onKeypress",function(e){var i=o.find("."+s+"."+n);switch(e.which){case 39:case 40:i.length?(i.next().addClass(n),i.removeClass(n)):o.find("."+s+":first").addClass(n);break;case 37:case 38:i.length?(i.prev().addClass(n),i.removeClass(n)):o.find("."+s+":last").addClass(n);break;case 13:i.length&&t.parent().data("widget").add(i.text())}})),e(document).bind("keydown",o.data("onKeypress"));var a=e.trim(t.val());i.blockKeyboardOnError&&t.attr("maxlength",t.val().length),i.noResultsHtml='<li class="oNotRecognized">This skill is not recognized. ';for(var r=[],l=t.data("cache"),d=0,c=a.length;c>d;d++){var p=l.load(a.substr(0,c-d),!1);if(p&&p.length){for(var u=2==a.length?3:1,h=0;u>h;h++)p[h]&&r.push(p[h].value);break}}if(!r.length)return i.noResultsHtml+="</li>",void 0;i.noResultsHtml+="Did you mean: ";var f="";for(d=0,c=r.length;c>d;d++)"advice-"+(new Date).getTime()+d,1==d&&(f+=", "),2==d&&(f+=" or "),f+='<span class="'+s+(0===d?" "+n:"")+'">'+r[d]+"</span>";i.noResultsHtml+=f+"?</li>"},onNoResultsHide:function(t,i,o){i.blockKeyboardOnError&&t.attr("maxlength",100),e(document).unbind("keydown",o.data("onKeypress"))},parseJson:function(e){var t=[];if(!e.skills)return t;for(var i in e.skills)t.push({data:[e.skills[i]],value:e.skills[i],result:e.skills[i]});return t},blockKeyboardOnError:!0,substitute:{" ":"-"},requceDashRequest:!1,noResultsMessage:'<ul><li class="oNotRecognized tt-empty-template">This skill is not recognized!</li></ul>'}},init:function(t,i,o){e.extend(!0,this.options,o),this.$max=e('<div id="babelSkillsLimit" />').addClass(this.options.limitClass).text(this.options.limitMessage),o.hideDeprecated||(this.options.data+=this.options.deprecatedQuery),this._super(i,o),e.template("presuggest",odesk.templates.presuggest),this._initPresuggest()},_disable:function(){this.options.showLimitAlert&&this.$max.insertAfter(this.$element),this._super()},_enable:function(){this.$max.detach(),this._super()},_onBlur:function(){this._super(),this._updatePresuggest(),this._clearInput()},_onKeyup:function(){this.isPresuggestVisible=!1,this._hidePresuggest()},_clearInput:function(){this.$input.val("")},remove:function(e,t){return this._super(e,t),this.$pressuggest.find('span.value[data-value="'+(this.options.ignoreCase?e.toLowerCase():e)+'"]').removeClass("disabled"),this},_onChange:function(){this._super(),this._updatePresuggest()},setPresuggest:function(t){return t?(this.$pressuggest.html(e.tmpl("presuggest",{items:t})).appendTo(document.body),this._disableExistPresuggest()):this.$pressuggest.detach(),this._updatePresuggest(),this},_initPresuggest:function(){this.$pressuggest=e('<div class="'+this.options.autocomplete.resultsClass+'"></div>').hide(),this.presuggestHidden=!0,this._addPresuggestEvents()},_addPresuggestEvents:function(){this.$input.bind("keyup",e.proxy(this._onKeyup,this)),this.$input.one("focus",this._updateHeight.bind(this)),this.$pressuggest.delegate("span.value","click",e.proxy(this._onPresuggestItemClick,this)).bind("mousedown",e.proxy(function(){this.isPresuggestVisible=!0},this));var t=this;this.$container.bind("mousedown",function(i){e(i.target).closest("li.item").length||setTimeout(function(){t.isPresuggestVisible=!0,t._updatePresuggest()},0)})},_onPresuggestItemClick:function(t){this.isPresuggestVisible=!0,this.add(e(t.currentTarget).addClass("disabled").text(),!0),this.$input.focus()},_showPresuggest:function(){this.presuggestHidden=!1,this._disableExistPresuggest();var e=this.$input.closest("ul.acInput").length?this.$container:this.$input,t=e.offset();this.options.autocomplete,this.$pressuggest.css({width:e.width()+parseInt(e.css("padding-left"),10)+parseInt(e.css("padding-right"),10),top:t.top+e[0].offsetHeight,left:t.left,position:"absolute"}).show()},_hidePresuggest:function(){this.presuggestHidden||(this.presuggestHidden=!0,this.$pressuggest.hide())},_updatePresuggest:function(){this.isPresuggestVisible&&!e.trim(this.$input.val())&&this.get().length<this.options.max?this._showPresuggest():this._hidePresuggest(),this.isPresuggestVisible=!1},_disableExistPresuggest:function(){this.$pressuggest.find("span.value").removeClass("disabled");for(var e in this.items)this.$pressuggest.find('span.value[data-value="'+e+'"]').addClass("disabled")},_onDragStart:function(){this.isPresuggestVisible=!1,this._hidePresuggest()},destroy:function(){return this._super(),this.$pressuggest.remove(),this.$max.remove(),this}})}(jQuery),odesk.templates.presuggest='<ul class="topSkills"><li class="label">Top 10 skills in your category</li>{{each(i, value) items}}<li><span class="value" data-value="${value.toLowerCase()}">${value}</span></li>{{/each}}</ul>',function(e){function t(t){var s,n=t||window.event,a=[].slice.call(arguments,1),r=0,l=0,d=0,c=0,p=0;return t=e.event.fix(n),t.type="mousewheel",n.wheelDelta&&(r=n.wheelDelta),n.detail&&(r=-1*n.detail),n.deltaY&&(d=-1*n.deltaY,r=d),n.deltaX&&(l=n.deltaX,r=-1*l),void 0!==n.wheelDeltaY&&(d=n.wheelDeltaY),void 0!==n.wheelDeltaX&&(l=-1*n.wheelDeltaX),c=Math.abs(r),(!i||i>c)&&(i=c),p=Math.max(Math.abs(d),Math.abs(l)),(!o||o>p)&&(o=p),s=r>0?"floor":"ceil",r=Math[s](r/i),l=Math[s](l/o),d=Math[s](d/o),a.unshift(t,r,l,d),(e.event.dispatch||e.event.handle).apply(this,a)}var i,o,s=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],n="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];if(e.event.fixHooks)for(var a=s.length;a;)e.event.fixHooks[s[--a]]=e.event.mouseHooks;e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e,t,i){e.fn.jScrollPane=function(t){function o(t,o){function s(o){var a,l,c,p,u,g,m=!1,v=!1;if(N=o,V===i)u=t.scrollTop(),g=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),W=t.innerWidth()+kt,U=t.innerHeight(),t.width(W),V=e('<div class="jspPane" />').css("padding",bt).append(t.children()),q=e('<div class="jspContainer" />').css({width:W+"px",height:U+"px"}).append(V).appendTo(t);else{if(t.css("width",""),m=N.stickToBottom&&P(),v=N.stickToRight&&D(),p=t.innerWidth()+kt!=W||t.outerHeight()!=U,p&&(W=t.innerWidth()+kt,U=t.innerHeight(),q.css({width:W+"px",height:U+"px"})),!p&&yt==Y&&V.outerHeight()==z)return t.width(W),i;yt=Y,V.css("width",""),t.width(W),q.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}V.css("overflow","auto"),Y=o.contentWidth?o.contentWidth:V[0].scrollWidth,z=V[0].scrollHeight,V.css("overflow",""),J=Y/W,K=z/U,Q=K>1,G=J>1,G||Q?(t.addClass("jspScrollable"),a=N.maintainPosition&&(et||ot),a&&(l=x(),c=S()),n(),r(),d(),a&&(C(v?Y-W:l,!1),w(m?z-U:c,!1)),F(),$(),O(),N.enableKeyboardNavigation&&L(),N.clickOnTrack&&h(),R(),N.hijackInternalLinks&&B()):(t.removeClass("jspScrollable"),V.css({top:0,width:q.width()-kt}),T(),E(),A(),f(),M()),N.autoReinitialise&&!vt?vt=setInterval(function(){s(N)},N.autoReinitialiseDelay):!N.autoReinitialise&&vt&&clearInterval(vt),u&&t.scrollTop(0)&&w(u,!1),g&&t.scrollLeft(0)&&C(g,!1),t.trigger("jsp-initialised",[G||Q])}function n(){Q&&(q.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),st=q.find(">.jspVerticalBar"),nt=st.find(">.jspTrack"),X=nt.find(">.jspDrag"),N.showArrows&&(dt=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",p(0,-1)).bind("click.jsp",I),ct=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",p(0,1)).bind("click.jsp",I),N.arrowScrollOnHover&&(dt.bind("mouseover.jsp",p(0,-1,dt)),ct.bind("mouseover.jsp",p(0,1,ct))),c(nt,N.verticalArrowPositions,dt,ct)),rt=U,q.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){rt-=e(this).outerHeight()}),X.hover(function(){X.addClass("jspHover")},function(){X.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",I),X.addClass("jspActive");var i=t.pageY-X.position().top;return e("html").bind("mousemove.jsp",function(e){m(e.pageY-i,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),a())}function a(){nt.height(rt+"px"),et=0,at=N.verticalGutter+nt.outerWidth(),V.width(W-at-kt);try{0===st.position().left&&V.css("margin-left",at+"px")}catch(e){}}function r(){G&&(q.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),pt=q.find(">.jspHorizontalBar"),ut=pt.find(">.jspTrack"),tt=ut.find(">.jspDrag"),N.showArrows&&(gt=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",p(-1,0)).bind("click.jsp",I),mt=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",p(1,0)).bind("click.jsp",I),N.arrowScrollOnHover&&(gt.bind("mouseover.jsp",p(-1,0,gt)),mt.bind("mouseover.jsp",p(1,0,mt))),c(ut,N.horizontalArrowPositions,gt,mt)),tt.hover(function(){tt.addClass("jspHover")},function(){tt.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",I),tt.addClass("jspActive");var i=t.pageX-tt.position().left;return e("html").bind("mousemove.jsp",function(e){b(e.pageX-i,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),ht=q.innerWidth(),l())}function l(){q.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ht-=e(this).outerWidth()}),ut.width(ht+"px"),ot=0}function d(){if(G&&Q){var t=ut.outerHeight(),i=nt.outerWidth();rt-=t,e(pt).find(">.jspCap:visible,>.jspArrow").each(function(){ht+=e(this).outerWidth()}),ht-=i,U-=i,W-=t,ut.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),a(),l()}G&&V.width(q.outerWidth()-kt+"px"),z=V.outerHeight(),K=z/U,G&&(ft=Math.ceil(1/J*ht),ft>N.horizontalDragMaxWidth?ft=N.horizontalDragMaxWidth:N.horizontalDragMinWidth>ft&&(ft=N.horizontalDragMinWidth),tt.width(ft+"px"),it=ht-ft,k(ot)),Q&&(lt=Math.ceil(1/K*rt),lt>N.verticalDragMaxHeight?lt=N.verticalDragMaxHeight:N.verticalDragMinHeight>lt&&(lt=N.verticalDragMinHeight),X.height(lt+"px"),Z=rt-lt,v(et))}function c(e,t,i,o){var s,n="before",a="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==n?a=t:t==a&&(n=t,s=i,i=o,o=s),e[n](i)[a](o)}function p(e,t,i){return function(){return u(e,t,this,i),this.blur(),!1}}function u(t,i,o,s){o=e(o).addClass("jspActive");var n,a,r=!0,l=function(){0!==t&&_t.scrollByX(t*N.arrowButtonSpeed),0!==i&&_t.scrollByY(i*N.arrowButtonSpeed),a=setTimeout(l,r?N.initialDelay:N.arrowRepeatFreq),r=!1};l(),n=s?"mouseout.jsp":"mouseup.jsp",s=s||e("html"),s.bind(n,function(){o.removeClass("jspActive"),a&&clearTimeout(a),a=null,s.unbind(n)})}function h(){f(),Q&&nt.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var o,s=e(this),n=s.offset(),a=t.pageY-n.top-et,r=!0,l=function(){var e=s.offset(),n=t.pageY-e.top-lt/2,c=U*N.scrollPagePercent,p=Z*c/(z-U);if(0>a)et-p>n?_t.scrollByY(-c):m(n);else{if(!(a>0))return d(),i;n>et+p?_t.scrollByY(c):m(n)}o=setTimeout(l,r?N.initialDelay:N.trackClickRepeatFreq),r=!1},d=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",d)};return l(),e(document).bind("mouseup.jsp",d),!1}}),G&&ut.bind("mousedown.jsp",function(t){if(t.originalTarget===i||t.originalTarget==t.currentTarget){var o,s=e(this),n=s.offset(),a=t.pageX-n.left-ot,r=!0,l=function(){var e=s.offset(),n=t.pageX-e.left-ft/2,c=W*N.scrollPagePercent,p=it*c/(Y-W);if(0>a)ot-p>n?_t.scrollByX(-c):b(n);else{if(!(a>0))return d(),i;n>ot+p?_t.scrollByX(c):b(n)}o=setTimeout(l,r?N.initialDelay:N.trackClickRepeatFreq),r=!1},d=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",d)};return l(),e(document).bind("mouseup.jsp",d),!1}})}function f(){ut&&ut.unbind("mousedown.jsp"),nt&&nt.unbind("mousedown.jsp")}function g(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),X&&X.removeClass("jspActive"),tt&&tt.removeClass("jspActive")}function m(e,t){Q&&(0>e?e=0:e>Z&&(e=Z),t===i&&(t=N.animateScroll),t?_t.animate(X,"top",e,v):(X.css("top",e),v(e)))}function v(e){e===i&&(e=X.position().top),q.scrollTop(0),et=e;var o=0===et,s=et==Z,n=e/Z,a=-n*(z-U);(wt!=o||jt!=s)&&(wt=o,jt=s,t.trigger("jsp-arrow-change",[wt,jt,Ct,xt])),y(o,s),V.css("top",a),t.trigger("jsp-scroll-y",[-a,o,s]).trigger("scroll")}function b(e,t){G&&(0>e?e=0:e>it&&(e=it),t===i&&(t=N.animateScroll),t?_t.animate(tt,"left",e,k):(tt.css("left",e),k(e)))}function k(e){e===i&&(e=tt.position().left),q.scrollTop(0),ot=e;var o=0===ot,s=ot==it,n=e/it,a=-n*(Y-W);(Ct!=o||xt!=s)&&(Ct=o,xt=s,t.trigger("jsp-arrow-change",[wt,jt,Ct,xt])),_(o,s),V.css("left",a),t.trigger("jsp-scroll-x",[-a,o,s]).trigger("scroll")}function y(e,t){N.showArrows&&(dt[e?"addClass":"removeClass"]("jspDisabled"),ct[t?"addClass":"removeClass"]("jspDisabled"))}function _(e,t){N.showArrows&&(gt[e?"addClass":"removeClass"]("jspDisabled"),mt[t?"addClass":"removeClass"]("jspDisabled"))}function w(e,t){var i=e/(z-U);m(i*Z,t)}function C(e,t){var i=e/(Y-W);b(i*it,t)}function j(t,i,o){var s,n,a,r,l,d,c,p,u,h=0,f=0;try{s=e(t)}catch(g){return}for(n=s.outerHeight(),a=s.outerWidth(),q.scrollTop(0),q.scrollLeft(0);!s.is(".jspPane");)if(h+=s.position().top,f+=s.position().left,s=s.offsetParent(),/^body|html$/i.test(s[0].nodeName))return;r=S(),d=r+U,r>h||i?p=h-N.verticalGutter:h+n>d&&(p=h-U+n+N.verticalGutter),p&&w(p,o),l=x(),c=l+W,l>f||i?u=f-N.horizontalGutter:f+a>c&&(u=f-W+a+N.horizontalGutter),u&&C(u,o)}function x(){return-V.position().left}function S(){return-V.position().top}function P(){var e=z-U;return e>20&&10>e-S()}function D(){var e=Y-W;return e>20&&10>e-x()}function $(){q.unbind(Pt).bind(Pt,function(e,t,i,o){var s=ot,n=et;return _t.scrollBy(i*N.mouseWheelSpeed,-o*N.mouseWheelSpeed,!1),s==ot&&n==et})}function T(){q.unbind(Pt)}function I(){return!1}function F(){V.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){j(e.target,!1)})}function E(){V.find(":input,a").unbind("focus.jsp")}function L(){function i(){var e=ot,t=et;switch(o){case 40:_t.scrollByY(N.keyboardSpeed,!1);break;case 38:_t.scrollByY(-N.keyboardSpeed,!1);break;case 34:case 32:_t.scrollByY(U*N.scrollPagePercent,!1);break;case 33:_t.scrollByY(-U*N.scrollPagePercent,!1);break;case 39:_t.scrollByX(N.keyboardSpeed,!1);break;case 37:_t.scrollByX(-N.keyboardSpeed,!1)}return s=e!=ot||t!=et}var o,s,n=[];G&&n.push(pt[0]),Q&&n.push(st[0]),V.focus(function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this||n.length&&e(t.target).closest(n).length){var a=ot,r=et;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:o=t.keyCode,i();break;case 35:w(z-U),o=null;break;case 36:w(0),o=null}return s=t.keyCode==o&&a!=ot||r!=et,!s}}).bind("keypress.jsp",function(e){return e.keyCode==o&&i(),!s}),N.hideFocus?(t.css("outline","none"),"hideFocus"in q[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in q[0]&&t.attr("hideFocus",!1))}function A(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function R(){if(location.hash&&location.hash.length>1){var t,i,o=escape(location.hash);try{t=e(o)}catch(s){return}t.length&&V.find(o)&&(0===q.scrollTop()?i=setInterval(function(){q.scrollTop()>0&&(j(o,!0),e(document).scrollTop(q.position().top),clearInterval(i))},50):(j(o,!0),e(document).scrollTop(q.position().top)))}}function M(){e("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function B(){M(),e("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var e,t=this.href.split("#");return t.length>1&&(e=t[1],e.length>0&&V.find("#"+e).length>0)?(j("#"+e,!0),!1):i})}function O(){var e,t,o,s,n,a=!1;q.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(i){var r=i.originalEvent.touches[0];e=x(),t=S(),o=r.pageX,s=r.pageY,n=!1,a=!0}).bind("touchmove.jsp",function(i){if(a){var r=i.originalEvent.touches[0],l=ot,d=et;return _t.scrollTo(e+o-r.pageX,t+s-r.pageY),n=n||Math.abs(o-r.pageX)>5||Math.abs(s-r.pageY)>5,l==ot&&d==et}}).bind("touchend.jsp",function(){a=!1}).bind("click.jsp-touchclick",function(){return n?(n=!1,!1):i})}function H(){var e=S(),i=x();t.removeClass("jspScrollable").unbind(".jsp"),t.replaceWith(St.append(V.children())),St.scrollTop(e),St.scrollLeft(i)}var N,V,W,U,q,Y,z,J,K,Q,G,X,Z,et,tt,it,ot,st,nt,at,rt,lt,dt,ct,pt,ut,ht,ft,gt,mt,vt,bt,kt,yt,_t=this,wt=!0,Ct=!0,jt=!1,xt=!1,St=t.clone(!1,!1).empty(),Pt=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";bt=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),kt=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0),e.extend(_t,{reinitialise:function(t){t=e.extend({},N,t),s(t)},scrollToElement:function(e,t,i){j(e,t,i)},scrollTo:function(e,t,i){C(e,i),w(t,i)},scrollToX:function(e,t){C(e,t)},scrollToY:function(e,t){w(e,t)},scrollToPercentX:function(e,t){C(e*(Y-W),t)},scrollToPercentY:function(e,t){w(e*(z-U),t)},scrollBy:function(e,t,i){_t.scrollByX(e,i),_t.scrollByY(t,i)},scrollByX:function(e,t){var i=x()+Math[0>e?"floor":"ceil"](e),o=i/(Y-W);b(o*it,t)},scrollByY:function(e,t){var i=S()+Math[0>e?"floor":"ceil"](e),o=i/(z-U);m(o*Z,t)},positionDragX:function(e,t){b(e,t)},positionDragY:function(e,t){m(e,t)},animate:function(e,t,i,o){var s={};s[t]=i,e.animate(s,{duration:N.animateDuration,easing:N.animateEase,queue:!1,step:o})},getContentPositionX:function(){return x()},getContentPositionY:function(){return S()},getContentWidth:function(){return Y},getContentHeight:function(){return z},getPercentScrolledX:function(){return x()/(Y-W)},getPercentScrolledY:function(){return S()/(z-U)},getIsScrollableH:function(){return G},getIsScrollableV:function(){return Q},getContentPane:function(){return V},scrollToBottom:function(e){m(Z,e)},hijackInternalLinks:function(){B()},destroy:function(){H()}}),s(o)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var i=e(this),s=i.data("jsp");s?s.reinitialise(t):(s=new o(i,t),i.data("jsp",s))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:i,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,o,s){return jQuery.easing[jQuery.easing.def](e,t,i,o,s)},easeInQuad:function(e,t,i,o,s){return o*(t/=s)*t+i},easeOutQuad:function(e,t,i,o,s){return-o*(t/=s)*(t-2)+i},easeInOutQuad:function(e,t,i,o,s){return 1>(t/=s/2)?o/2*t*t+i:-o/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,o,s){return o*(t/=s)*t*t+i},easeOutCubic:function(e,t,i,o,s){return o*((t=t/s-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,o,s){return 1>(t/=s/2)?o/2*t*t*t+i:o/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,o,s){return o*(t/=s)*t*t*t+i},easeOutQuart:function(e,t,i,o,s){return-o*((t=t/s-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,o,s){return 1>(t/=s/2)?o/2*t*t*t*t+i:-o/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,o,s){return o*(t/=s)*t*t*t*t+i
},easeOutQuint:function(e,t,i,o,s){return o*((t=t/s-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,o,s){return 1>(t/=s/2)?o/2*t*t*t*t*t+i:o/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,o,s){return-o*Math.cos(t/s*(Math.PI/2))+o+i},easeOutSine:function(e,t,i,o,s){return o*Math.sin(t/s*(Math.PI/2))+i},easeInOutSine:function(e,t,i,o,s){return-o/2*(Math.cos(Math.PI*t/s)-1)+i},easeInExpo:function(e,t,i,o,s){return 0==t?i:o*Math.pow(2,10*(t/s-1))+i},easeOutExpo:function(e,t,i,o,s){return t==s?i+o:o*(-Math.pow(2,-10*t/s)+1)+i},easeInOutExpo:function(e,t,i,o,s){return 0==t?i:t==s?i+o:1>(t/=s/2)?o/2*Math.pow(2,10*(t-1))+i:o/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(e,t,i,o,s){return-o*(Math.sqrt(1-(t/=s)*t)-1)+i},easeOutCirc:function(e,t,i,o,s){return o*Math.sqrt(1-(t=t/s-1)*t)+i},easeInOutCirc:function(e,t,i,o,s){return 1>(t/=s/2)?-o/2*(Math.sqrt(1-t*t)-1)+i:o/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,o,s){var n=1.70158,a=0,r=o;if(0==t)return i;if(1==(t/=s))return i+o;if(a||(a=.3*s),Math.abs(o)>r){r=o;var n=a/4}else var n=a/(2*Math.PI)*Math.asin(o/r);return-(r*Math.pow(2,10*(t-=1))*Math.sin((t*s-n)*2*Math.PI/a))+i},easeOutElastic:function(e,t,i,o,s){var n=1.70158,a=0,r=o;if(0==t)return i;if(1==(t/=s))return i+o;if(a||(a=.3*s),Math.abs(o)>r){r=o;var n=a/4}else var n=a/(2*Math.PI)*Math.asin(o/r);return r*Math.pow(2,-10*t)*Math.sin((t*s-n)*2*Math.PI/a)+o+i},easeInOutElastic:function(e,t,i,o,s){var n=1.70158,a=0,r=o;if(0==t)return i;if(2==(t/=s/2))return i+o;if(a||(a=s*.3*1.5),Math.abs(o)>r){r=o;var n=a/4}else var n=a/(2*Math.PI)*Math.asin(o/r);return 1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin((t*s-n)*2*Math.PI/a)+i:.5*r*Math.pow(2,-10*(t-=1))*Math.sin((t*s-n)*2*Math.PI/a)+o+i},easeInBack:function(e,t,i,o,s,n){return void 0==n&&(n=1.70158),o*(t/=s)*t*((n+1)*t-n)+i},easeOutBack:function(e,t,i,o,s,n){return void 0==n&&(n=1.70158),o*((t=t/s-1)*t*((n+1)*t+n)+1)+i},easeInOutBack:function(e,t,i,o,s,n){return void 0==n&&(n=1.70158),1>(t/=s/2)?o/2*t*t*(((n*=1.525)+1)*t-n)+i:o/2*((t-=2)*t*(((n*=1.525)+1)*t+n)+2)+i},easeInBounce:function(e,t,i,o,s){return o-jQuery.easing.easeOutBounce(e,s-t,0,o,s)+i},easeOutBounce:function(e,t,i,o,s){return 1/2.75>(t/=s)?o*7.5625*t*t+i:2/2.75>t?o*(7.5625*(t-=1.5/2.75)*t+.75)+i:2.5/2.75>t?o*(7.5625*(t-=2.25/2.75)*t+.9375)+i:o*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,o,s){return s/2>t?.5*jQuery.easing.easeInBounce(e,2*t,0,o,s)+i:.5*jQuery.easing.easeOutBounce(e,2*t-s,0,o,s)+.5*o+i}}),function(e){new odesk.Class("odesk.ImageUploader","odesk.FileUploader",{options:{selectors:{imageBox:".oImageUploaderBox",editMenu:".oImageUploaderEdit",addBlock:".oImageUploaderAdd",addLink:".oAddLink",editLink:".jsUploaderEditLink",deleteLink:".jsUploaderDeleteLink"},template:{edit:"",choose:"imageUploaderChoose",remove:"imageUploaderRemove",tooLarge:"imageUploaderTooLarge",maxResolution:"imageUploaderTooLarge",unknownFormat:"imageUploaderUnknownFormat"},support:{types:"image.(gif|jpeg|png)",accept:"image/png,image/gif,image/jpeg",extensions:["png","jpg","jpeg","gif"]},url:{change:"",remove:""},stateClass:{"default":"isDefault",processing:"isProcessing",uploaded:"isUploaded"},flyout:{placement:"right"},minWidth:50,minHeight:50,maxWidth:odesk.env.USER_MAX_UPLOADING_WIDTH,maxHeight:odesk.env.USER_MAX_UPLOADING_HEIGHT,previewWidth:100,previewHeight:100,showResolutionMessage:!1,aspectRatio:1,useSquareCheckbox:!1,errors:{MIN_RESOLUTION:"Minimal image resolution is %d x %d.",NOT_SELECTED:"Please select cropping area to continue."},extendedData:{},translates:{imageAlt:"Image",imageRestriction:"",chooseTitle:"Choose an Image",chooseDescription:"Must be an actual photo!",chooseAnotherButton:"Choose Another Image",removeTitle:"Delete Image?",removeDescription:"",tooLargeTitle:"Image Too Large",tooLargeDescription:"Sorry, your image is too large."}},init:function(t,i){this.$element=e(t),e.extend(!0,this.options,i),e.extend(this.events,odesk.events.makeMap(this.name,["upload","remove"])),this.setProperties(),this._setImageProperties(),this._addFlyout(),this.support.iframe?this.initDialog("choose"):this.$imageFile=this._initAddFile(),this.$dialogEdit=this._initEditDialog(),this._dialogInits.maxResolution=this._initMaxResolutionDialog,this._addCropping(),this._addEvents(),this._updateFlyoutState(this.state),this.support.iframe||this._addDroppingFiles()},add:function(){return"default"!==this.state?(this.edit(),void 0):(this._hideFlyout(),this.resetFileElement(),this._openAddDialog(),void 0)},edit:function(){"uploaded"===this.state&&(this._hideFlyout(),this.resetFileElement(),this.originSrc?(this._setOriginalImage(this.originSrc),this._openEditDialog()):this._openAddDialog())},remove:function(){"uploaded"===this.state&&(this._hideFlyout(),this._openRemoveDialog())},update:function(e){this.originKey=e.originKey,this.originSrc=e.originSrc;var t=e.$image.prop("src");this.previewKey=e.previewKey,this.previewSrc=t&&t!==this.noimageSrc?t:"",this.$image.prop("src",t),this._setState(e.state)},showError:function(e,t){this.$editError.addClass("isHidden"),this.closeDialogs(),"message"===e?this.$editError.find(".oMsg").html(t).end().removeClass("isHidden"):e&&this.openDialog(e)},getData:function(){return{originalKey:this.originKey,original:this.originSrc?this.originSrc.split("?")[0]:"",previewKey:this.previewKey,preview:this.previewSrc?this.previewSrc.split("?")[0]:""}},_setImageProperties:function(){this.$imageBox=this.$element.find(this.options.selectors.imageBox),this.$image=this.$imageBox.find("img"),this.$editMenu=this.$element.find(this.options.selectors.editMenu),this.$addBlock=this.$element.find(this.options.selectors.addBlock),this.state=this.$element.hasClass(this.options.stateClass["default"])?"default":"uploaded",this._fileName=this.$image.data("name"),this.noimageSrc=this.$image.data("noimage"),this.originSrc=this.$image.data("origin"),this.previewSrc=this.$image.data("preview"),this.isCompact=!!this.$image.data("compact"),this._aspectRatio=this.options.aspectRatio,this.originKey="",this.previewKey="",this._dialogInits.remove=this._initRemoveDialog},_initAddFile:function(){var t=this;return e('<input name="'+this._fileName+'" type="file" class="oHiddenFile">').prependTo(this.$element).bind("change",function(){t.onFileChange(this)})},_initEditDialog:function(){var e=this,t=this.initCommonDialog("edit",{useSquareCheckbox:this.options.useSquareCheckbox,aspectRatio:this.options.aspectRatio},{close:function(){e.resetFileElement(),e._toggleDropTargets(!0)}});return this.$editCols=t.children(".cols"),this.$editLoading=t.find(".oLoadingLrg"),this.$fullImageBlock=t.find(".jsFullImageBlock"),this.$fullImageContainer=t.find(".oImageUploaderFull"),this.$imagePreview=t.find(".oImagePreview"),this.$imagePreviewArea=t.find(".oImagePreviewArea"),this.$editError=t.find(".oFormHeader"),this.$saveButton=t.find(".jsUseImage"),this.$keepSquare=t.find(".jsKeepSquare"),this.$fullImage=this.$fullImageContainer.find("img"),this.$previewImage=this.$imagePreview.find("img"),this.$editFile=this.createFileElement(t.find(".jsChooseFile")),this.$saveButton.bind("click",function(i){i.preventDefault(),e.showError(!1);var o=e.getChangedFileElement();!o&&e.support.iframe&&(o=e.$editFile[0]),e._uploadFileElement(o,{afterProcess:function(){t.dialog("close")}})}),t},_initRemoveDialog:function(){var t=this,i=this.initCommonDialog("remove");return i.find(this.options.selectors.submitButton).bind("click",function(o){o.preventDefault();var s=t.state;t._setState("processing"),odesk.ajax({url:t.options.url.remove,data:t.options.extendedData,success:e.proxy(function(){this.originKey="",this.originSrc="",this.previewKey="",this.previewSrc="",this.$image.prop("src",this.noimageSrc),this._setState("default"),this.resetFileElement(),this.ctx.mediator.publish(this.events.remove)},t),error:function(){t._setState(s)}}),i.dialog("close")}),i},_initMaxResolutionDialog:function(){var e=this.initCommonDialog("maxResolution",{maxWidth:this.options.maxWidth,maxHeight:this.options.maxHeight,showResolutionMessage:!0});return this.createFileElement(e.find(this.options.selectors.submitButton)),e},_fixColsHeight:function(){var e=this.$editCols.height();if(!this._fixedColsHeight||e>this._fixedColsHeight){var t=!this._isLoadingHidden();t&&this._showLoading(!1),e=this.$editCols.height(),this.$editCols.height(e),t&&this._showLoading(!0),this._fixedColsHeight=e}},_showDefaultPreview:function(){var e={width:this.$imagePreview.width()+"px",height:this.$imagePreview.height()+"px",marginLeft:0,marginTop:0};this.$previewImage.prop("src",this.$image.prop("src")).css(e),this.$imagePreviewArea.css(e)},_openEditDialog:function(){if(!this.$dialogEdit.dialog("isOpen")){this.showError(!1),this._showDefaultPreview(),this._toggleDropTargets(!1);var t=this.$dialogEdit.data(this.originSrc?"edit-title":"add-title");this.$dialogEdit.dialog("option","open",e.proxy(this._fixColsHeight,this)).dialog("option","title",t).dialog("open")}},_openRemoveDialog:function(){this.initDialog("remove")&&(this._dialogs.remove.find("img").prop("src",this.$image.prop("src")),this._dialogs.remove.dialog("open"))},_showJcrop:function(e){this.$fullImageContainer.children(".jcrop-holder").toggleClass("isHidden",!e)},_addDroppingFiles:function(){var e=this;this.registerWidget("dropFile",new odesk.DropFile({isDocumentDropping:this.options.documentDropping,targets:{image:{element:this.$imageBox,hintClass:"oTxtLarge",isDefault:!0},full:{element:this.$fullImageContainer,isDisabled:!0}}})),this.subscribe(this.widgets.dropFile.events.toggleHint,function(t,i){e.$dialogEdit.dialog("isOpen")&&e._showJcrop(!i.visible)}),this.subscribe(this.widgets.dropFile.events.dropFile,function(t,i){e.onFileChange(i.file)})},_toggleDropTargets:function(e){this.widgets.dropFile&&this.widgets.dropFile.enableTarget("image",e).enableTarget("full",!e)},_addEvents:function(){var e=this;this.$element.find(this.options.selectors.editLink).bind("click",function(t){t.preventDefault(),e.edit()}),this.$element.find(this.options.selectors.deleteLink).bind("click",function(t){t.preventDefault(),e.remove()}),this.$image.add(this.$element.find(this.options.selectors.addLink)).bind("click",function(t){t.stopPropagation(),t.preventDefault(),e.add()})},_onStateChange:function(e){"default"===e?(this.$editMenu.hide(),this.$addBlock.show()):"uploaded"===e&&(this.$addBlock.hide(),this.$editMenu.show())},_setState:function(e){if(this.state!==e){var t=this.options.stateClass;t[this.state]&&this.$element.removeClass(t[this.state]),t[e]&&this.$element.addClass(t[e]),this.state=e,this._onStateChange(e);var i="processing"===this.state;this.$imageBox.toggleClass("oLockOverlay",i),this.$saveButton.prop("disabled",i),this._updateFlyoutState(e)}},_showUploadingError:function(e,t){switch(e||0){case 415:this.showError("unknown");break;case 413:this.showError("tooLarge");break;default:this.showError("message",t||"Error")}},_uploadFileElement:function(t,i){var o="none"!==this.jCrop.ui.selection.css("display"),s=this.isFileSelected(t);if(!o&&!s)return this.showError("message",this.options.errors.NOT_SELECTED),void 0;var n=[],a=e.extend({ratio:this._aspectRatio},this.options.extendedData);if(o){var r=this.jCrop.tellSelect();e.extend(a,{x:Math.round(r.x),y:Math.round(r.y),x2:Math.round(r.x2),y2:Math.round(r.y2)})}for(var l in a)n.push({name:l,value:a[l]});var d={name:this._fileName};this.isElement(t)?d.element=t:d.file=t,n.push(d),this._openEditDialog(),this.uploadImageData(n,i,s)},uploadImageByKey:function(t,i){var o=[],s=e.extend({ratio:this._aspectRatio},this.options.extendedData);s.tmpKey=t;for(var n in s)o.push({name:n,value:s[n]});this.uploadImageData(o,i,!0)},uploadImageData:function(e,t,i){var o=this,s=this.state;this._setState("processing"),this._setLoading("Uploading image..."),this.uploader.upload({url:this.options.url.change,dataType:"json",data:e,success:function(e){return o._setLoading(!1),e.error?(o._setState(s),o._showUploadingError(e.code,e.error.message),void 0):(o.resetFileElement(),o.onUploadSuccess(e,t,i),o._setState("uploaded"),o.ctx.mediator.publish(o.events.upload,e),void 0)},progress:function(e){e===void 0||100===e?o._setLoading("Wait for it..."):o._setLoading("Uploaded "+e+"%...")},error:function(e){o._setLoading(!1),o._setState(s),o._showUploadingError(0,e)}})},onUploadSuccess:function(e,t,i){t=t||{},i&&(this.originKey=e.originalKey||"",this.originSrc=e.original?odesk.url.unique(e.original):""),this.previewKey=e.previewKey||"",this.previewSrc=e.preview||"",this.$image.prop("src",e.preview?odesk.url.unique(e.preview):this.noimageSrc),i&&!e.original&&t.originError?t.originError():t.afterProcess&&t.afterProcess(e)},_restorePreviousImage:function(){this.resetFileElement(),this._setOriginalImage(this.originSrc)},onFileChange:function(t){if("processing"!==this.state){var i=this,o=!this.support.iframe&&this.support.fileReader,s=this.isFileSelected(t),n=this.getElementFile(t);if(o&&!n)return this.showError(!1),this._restorePreviousImage(),void 0;if(s&&!this.checkFileElement(t))return this._restorePreviousImage(),void 0;this.showError(!1),o?(this._setLoading("Previewing image..."),this._openEditDialog(),this.uploader.readAsDataURL(n,{loadend:function(){var o=this;e("<img />").load(function(){this.width>i.options.maxWidth||this.height>i.options.maxHeight?(i._restorePreviousImage(),i.showError("maxResolution")):this.width<i.options.minWidth||this.height<i.options.minHeight?(i._restorePreviousImage(),i.showError("message",odesk.string.sprintf(i.options.errors.MIN_RESOLUTION,i.options.minWidth,i.options.minHeight))):(i.setFileElement(t),i.jCrop.release(),i.$previewImage.prop("src",o.result),i._setOriginalImage(o.result))}).on("error",function(){i._restorePreviousImage(),i.showError("unknown")}).attr("src",o.result)},progress:function(e){e!==void 0&&100>e&&i._setLoading("Loaded "+e+"%...")},error:function(e){i._restorePreviousImage(),i.showError("message",e)}})):(this.setFileElement(t),this.jCrop.release(),this._uploadFileElement(this.getChangedFileElement(),{afterProcess:function(){i._setOriginalImage(i.originSrc)},originError:function(){i.$dialogEdit.dialog("close")}}))}},_addCropping:function(){var t=this;this.jCrop=e.Jcrop(this.$fullImage,{onChange:e.proxy(this._showPreview,this),onSelect:e.proxy(this._showPreview,this),onRelease:function(){t._showPreview(t._getDefaultArea())},boxWidth:this.$fullImageContainer.width(),boxHeight:this.$fullImageContainer.height(),aspectRatio:this._aspectRatio}),this.options.useSquareCheckbox&&this.$keepSquare.bind("change",function(){t._aspectRatio=e(this).prop("checked")?1:0,t.jCrop.setOptions({aspectRatio:t._aspectRatio})})},_getDefaultArea:function(){var e=this.jCrop.getBounds(),t=Math.round(e[0]),i=Math.round(e[1]),o=t/i,s=t/this._aspectRatio,n=i*this._aspectRatio;return o>this._aspectRatio?n=i*this._aspectRatio:s=t/this._aspectRatio,{x:Math.round((t-n)/2),y:Math.round((i-s)/2),w:t,h:i}},_showPreview:function(e){var t=this.jCrop.getBounds(),i=this.options.previewWidth,o=this.options.previewHeight,s=i/e.w,n=o/e.h,a=i,r=o,l=0,d=0;1!==this._aspectRatio&&(n>s?(r=e.h/e.w*i,d=Math.round((o-r)/2),n=s):s>n&&(a=e.w/e.h*i,l=Math.round((i-a)/2),s=n)),this.$imagePreviewArea.css({width:Math.round(a)+"px",height:Math.round(r)+"px",marginLeft:l+"px",marginTop:d+"px"}),this.$previewImage.css({width:Math.round(s*t[0])+"px",height:Math.round(n*t[1])+"px",marginLeft:"-"+Math.round(s*e.x)+"px",marginTop:"-"+Math.round(n*e.y)+"px"})},_showFullImageLoading:function(e){this.$fullImageContainer.toggleClass("oLockOverlay",e).children().toggle(!e)},_setEmptyOriginalImage:function(){this.originKey="",this.originSrc="",this.previewKey="",this.previewSrc="",this._setState("default"),this._showJcrop(!1),this._showDefaultPreview(),this._showFullImageLoading(!1)},_setOriginalImage:function(t){var i=this;this._setLoading(!1),t?(this._showJcrop(!0),this._showFullImageLoading(!0),this.jCrop.setImage(t,function(){i._showFullImageLoading(!1),i.$previewImage.prop("src",t);var e=i._getDefaultArea();i.jCrop.setOptions({minSize:[Math.min(e.w,i.options.minWidth),Math.min(e.h,i.options.minHeight)]}),i.jCrop.setSelect([e.x,e.y,e.x+e.w,e.y+e.h]),i.$saveButton.prop("disabled",!1)},e.proxy(this._setEmptyOriginalImage,this)),this.jCrop.enable()):this._setEmptyOriginalImage()},_isLoadingHidden:function(){return this.$editLoading.hasClass("isHidden")},_showLoading:function(e){var t=!this._isLoadingHidden();e!==t&&(e?(this.$fullImageBlock.addClass("isHidden"),this.$editLoading.removeClass("isHidden")):(this.$editLoading.addClass("isHidden"),this.$fullImageBlock.removeClass("isHidden")))},_setLoading:function(e){var t=!0;e&&(this.$editLoading.html(e),t=this._isLoadingHidden()),t&&this._showLoading(!!e)},_openAddDialog:function(){this.support.iframe?this.openDialog("choose"):this.$imageFile.trigger("click")},_addFlyout:function(){this.isCompact&&this.$imageBox.flyout(this.options.flyout)},_hideFlyout:function(){this.isCompact&&this.$imageBox.data("flyout").hide()},_updateFlyoutState:function(e){if(this.isCompact){var t=this.$imageBox.data("flyout");"processing"===e?t.disable():(t.setContent("default"===e?this.$addBlock:this.$editMenu),t.enable())}}}),e.extend(!0,odesk.ImageUploader.prototype,odesk.mediator)}(jQuery),odesk.templates.imageUploaderChoose='<div class="oImageUploaderDialog jsUploaderChooseDialog" data-title="${chooseTitle}"><div class="oMsg oMsgError oHidden">We could not upload your file. Try a different one.</div><p>Select a file under ${formattedMaxSize} in size.<p><p>Allowed file types: {{each extensions}}<strong>${$value}</strong>{{if $index < extensions.length - 1}}, {{/if}}{{/each}}.</p>{{if chooseDescription || imageRestriction}}<p>{{html chooseDescription}} {{html imageRestriction}}</p>{{/if}}<button class="oBtn oBtnPrimary">${chooseAnotherButton}</button><a class="oBtn oBtnCancel" href="#">Cancel</a></div>',odesk.templates.imageUploaderRemove='<div class="oImageUploaderDialog jsUploaderRemoveDialog" data-title="${removeTitle}"><div class="oMed"><img class="oImg oPortraitLarge" alt="${imageAlt}"><div class="oBd"><h1 class="np">Are you sure?</h1>{{if removeDescription}}<p>{{html removeDescription}}</p>{{/if}}<button class="oBtn oBtnPrimary">Yes, Delete</button> <a class="oBtn oBtnCancel" href="#">Cancel</a></div></div></div>',odesk.templates.imageUploaderTooLarge='<div class="oImageUploaderDialog jsUploaderTooLargeDialog" data-title="${tooLargeTitle}"><div class="oMed"><img class="oImg" src="/images/upload/toolarge.jpg" width="200" height="222" alt="Too Large"><div class="oBd"><h1 class="np">Too Large!</h1><p>{{html tooLargeDescription}} Please try again with {{if showResolutionMessage}}maximum resolution of ${maxWidth} x ${maxHeight}{{else}}an image under ${formattedMaxSize}{{/if}}.</p><button class="oBtn oBtnPrimary">${chooseAnotherButton}</button> <a class="oBtn oBtnCancel" href="#">Cancel</a></div></div></div>',odesk.templates.imageUploaderUnknownFormat='<div class="oImageUploaderDialog jsUploaderUnknownDialog" data-title="Unknown Format"><div class="oMed"><img class="oImg" src="/images/alien.jpg" width="150" height="133" alt="Unknown format"><div class="oBd"><h1 class="np">Unknown Format</h1>Uh-oh! Our system doesnâ€™t recognize this file format.<p>Try again with a {{each extensions}}{{if $index === extensions.length - 1}} or {{/if}}<strong>${$value}</strong>{{if $index < extensions.length - 2}}, {{/if}}{{/each}}.</p><button class="oBtn oBtnPrimary">${chooseAnotherButton}</button> <a class="oBtn oBtnCancel" href="#">Cancel</a></div></div></div>',function(e){e.Jcrop=function(t,i){function o(e){return Math.round(e)+"px"}function s(e){return A.baseClass+"-"+e}function n(){return e.fx.step.hasOwnProperty("backgroundColor")}function a(t){var i=e(t).offset();return[i.left,i.top]}function r(e){return[e.pageX-L[0],e.pageY-L[1]]}function l(t){"object"!=typeof t&&(t={}),A=e.extend(A,t),e.each(["onChange","onSelect","onRelease","onDblClick"],function(e,t){"function"!=typeof A[t]&&(A[t]=function(){})})}function d(e,t,i){if(L=a(W),ft.setCursor("move"===e?e:e+"-resize"),"move"===e)return ft.activateHandlers(p(t),m,i);var o=pt.getFixed(),s=u(e),n=pt.getCorner(u(s));pt.setPressed(pt.getCorner(s)),pt.setCurrent(n),ft.activateHandlers(c(e,o),m,i)}function c(e,t){return function(i){if(A.aspectRatio)switch(e){case"e":i[1]=t.y+1;break;case"w":i[1]=t.y+1;break;case"n":i[0]=t.x+1;break;case"s":i[0]=t.x+1}else switch(e){case"e":i[1]=t.y2;break;case"w":i[1]=t.y2;break;case"n":i[0]=t.x2;break;case"s":i[0]=t.x2}pt.setCurrent(i),ht.update()}}function p(e){var t=e;return gt.watchKeys(),function(e){pt.moveOffset([e[0]-t[0],e[1]-t[1]]),t=e,ht.update()}}function u(e){switch(e){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function h(e){return function(t){return A.disabled?!1:"move"!==e||A.allowMove?(L=a(W),ot=!0,d(e,r(t)),t.stopPropagation(),t.preventDefault(),!1):!1}}function f(e,t,i){var o=e.width(),s=e.height();o>t&&t>0&&(o=t,s=t/e.width()*e.height()),s>i&&i>0&&(s=i,o=i/e.height()*e.width()),tt=e.width()/o,it=e.height()/s,e.width(o).height(s)}function g(e){return{x:e.x*tt,y:e.y*it,x2:e.x2*tt,y2:e.y2*it,w:e.w*tt,h:e.h*it}}function m(){var e=pt.getFixed();e.w>A.minSelect[0]&&e.h>A.minSelect[1]?(ht.enableHandles(),ht.done()):ht.release(),ft.setCursor(A.allowSelect?"crosshair":"default")}function v(e){if(A.disabled)return!1;if(!A.allowSelect)return!1;ot=!0,L=a(W),ht.disableHandles(),ft.setCursor("crosshair");var t=r(e);return pt.setPressed(t),ht.update(),ft.activateHandlers(b,m,"touch"===e.type.substring(0,5)),gt.watchKeys(),e.stopPropagation(),e.preventDefault(),!1}function b(e){pt.setCurrent(e),ht.update()}function k(){var t=e("<div></div>").addClass(s("tracker"));return M&&t.css({opacity:0,backgroundColor:"white"}),t}function y(e){Y.removeClass().addClass(s("holder")).addClass(e)}function _(e,t){function i(){window.setTimeout(b,p)}var o=e[0]/tt,s=e[1]/it,n=e[2]/tt,a=e[3]/it;if(!st){var r=pt.flipCoords(o,s,n,a),l=pt.getFixed(),d=[l.x,l.y,l.x2,l.y2],c=d,p=A.animationDelay,u=r[0]-d[0],h=r[1]-d[1],f=r[2]-d[2],g=r[3]-d[3],m=0,v=A.swingSpeed;o=c[0],s=c[1],n=c[2],a=c[3],ht.animMode(!0);var b=function(){return function(){m+=(100-m)/v,c[0]=Math.round(o+m/100*u),c[1]=Math.round(s+m/100*h),c[2]=Math.round(n+m/100*f),c[3]=Math.round(a+m/100*g),m>=99.8&&(m=100),100>m?(C(c),i()):(ht.done(),ht.animMode(!1),"function"==typeof t&&t.call(mt))}}();i()}}function w(e){C([e[0]/tt,e[1]/it,e[2]/tt,e[3]/it]),A.onSelect.call(mt,g(pt.getFixed())),ht.enableHandles()}function C(e){pt.setPressed([e[0],e[1]]),pt.setCurrent([e[2],e[3]]),ht.update()}function j(){return g(pt.getFixed())}function x(){return pt.getFixed()}function S(e){l(e),E()}function P(){A.disabled=!0,ht.disableHandles(),ht.setCursor("default"),ft.setCursor("default")}function D(){A.disabled=!1,E()}function $(){ht.done(),ft.activateHandlers(null,null)}function T(){Y.remove(),H.show(),H.css("visibility","visible"),e(t).removeData("Jcrop")}function I(e,t){ht.release(),P();var i=new Image;i.onload=function(){var o=i.width,s=i.height,n=A.boxWidth,a=A.boxHeight;W.width(o).height(s),W.attr("src",e),z.attr("src",e),f(W,n,a),U=W.width(),q=W.height(),z.width(U).height(q),rt.width(U+2*at).height(q+2*at),Y.width(U).height(q),ut.resize(U,q),D(),"function"==typeof t&&t.call(mt)},i.src=e}function F(e,t,i){var o=t||A.bgColor;A.bgFade&&n()&&A.fadeTime&&!i?e.animate({backgroundColor:o},{queue:!1,duration:A.fadeTime}):e.css("backgroundColor",o)}function E(e){A.allowResize?e?ht.enableOnly():ht.enableHandles():ht.disableHandles(),ft.setCursor(A.allowSelect?"crosshair":"default"),ht.setCursor(A.allowMove?"move":"default"),A.hasOwnProperty("trueSize")&&(tt=A.trueSize[0]/U,it=A.trueSize[1]/q),A.hasOwnProperty("setSelect")&&(w(A.setSelect),ht.done(),delete A.setSelect),ut.refresh(),A.bgColor!=lt&&(F(A.shade?ut.getShades():Y,A.shade?A.shadeColor||A.bgColor:A.bgColor),lt=A.bgColor),dt!=A.bgOpacity&&(dt=A.bgOpacity,A.shade?ut.refresh():ht.setBgOpacity(dt)),G=A.maxSize[0]||0,X=A.maxSize[1]||0,Z=A.minSize[0]||0,et=A.minSize[1]||0,A.hasOwnProperty("outerImage")&&(W.attr("src",A.outerImage),delete A.outerImage),ht.refresh()}var L,A=e.extend({},e.Jcrop.defaults),R=navigator.userAgent.toLowerCase(),M=/msie/.test(R),B=/msie [1-6]\./.test(R);"object"!=typeof t&&(t=e(t)[0]),"object"!=typeof i&&(i={}),l(i);var O={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},H=e(t),N=!0;if("IMG"==t.tagName){if(0!=H[0].width&&0!=H[0].height)H.width(H[0].width),H.height(H[0].height);else{var V=new Image;V.src=H[0].src,H.width(V.width),H.height(V.height)}var W=H.clone().removeAttr("id").css(O).show();W.width(H.width()),W.height(H.height()),H.after(W).hide()}else W=H.css(O).show(),N=!1,null===A.shade&&(A.shade=!0);f(W,A.boxWidth,A.boxHeight);var U=W.width(),q=W.height(),Y=e("<div />").width(U).height(q).addClass(s("holder")).css({position:"relative",backgroundColor:A.bgColor}).insertAfter(H).append(W);A.addClass&&Y.addClass(A.addClass);var z=e("<div />"),J=e("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),K=e("<div />").width("100%").height("100%").css("zIndex",320),Q=e("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var e=pt.getFixed();A.onDblClick.call(mt,e)}).insertBefore(W).append(J,K);N&&(z=e("<img />").attr("src",W.attr("src")).css(O).width(U).height(q),J.append(z)),B&&Q.css({overflowY:"hidden"});var G,X,Z,et,tt,it,ot,st,nt,at=A.boundary,rt=k().width(U+2*at).height(q+2*at).css({position:"absolute",top:o(-at),left:o(-at),zIndex:290}).mousedown(v),lt=A.bgColor,dt=A.bgOpacity;L=a(W);var ct=function(){function e(){var e,t={},i=["touchstart","touchmove","touchend"],o=document.createElement("div");try{for(e=0;i.length>e;e++){var s=i[e];s="on"+s;var n=s in o;n||(o.setAttribute(s,"return;"),n="function"==typeof o[s]),t[i[e]]=n}return t.touchstart&&t.touchend&&t.touchmove}catch(a){return!1}}function t(){return A.touchSupport===!0||A.touchSupport===!1?A.touchSupport:e()}return{createDragger:function(e){return function(t){return A.disabled?!1:"move"!==e||A.allowMove?(L=a(W),ot=!0,d(e,r(ct.cfilter(t)),!0),t.stopPropagation(),t.preventDefault(),!1):!1}},newSelection:function(e){return v(ct.cfilter(e))},cfilter:function(e){return e.pageX=e.originalEvent.changedTouches[0].pageX,e.pageY=e.originalEvent.changedTouches[0].pageY,e},isSupported:e,support:t()}}(),pt=function(){function e(e){e=a(e),f=u=e[0],g=h=e[1]}function t(e){e=a(e),c=e[0]-f,p=e[1]-g,f=e[0],g=e[1]}function i(){return[c,p]}function o(e){var t=e[0],i=e[1];0>u+t&&(t-=t+u),0>h+i&&(i-=i+h),g+i>q&&(i+=q-(g+i)),f+t>U&&(t+=U-(f+t)),u+=t,f+=t,h+=i,g+=i}function s(e){var t=n();switch(e){case"ne":return[t.x2,t.y];case"nw":return[t.x,t.y];case"se":return[t.x2,t.y2];case"sw":return[t.x,t.y2]}}function n(){if(!A.aspectRatio)return l();var e,t,i,o,s=A.aspectRatio,n=A.minSize[0]/tt,a=A.maxSize[0]/tt,c=A.maxSize[1]/it,p=f-u,m=g-h,v=Math.abs(p),b=Math.abs(m),k=v/b;return 0===a&&(a=10*U),0===c&&(c=10*q),s>k?(t=g,i=b*s,e=0>p?u-i:i+u,0>e?(e=0,o=Math.abs((e-u)/s),t=0>m?h-o:o+h):e>U&&(e=U,o=Math.abs((e-u)/s),t=0>m?h-o:o+h)):(e=f,o=v/s,t=0>m?h-o:h+o,0>t?(t=0,i=Math.abs((t-h)*s),e=0>p?u-i:i+u):t>q&&(t=q,i=Math.abs(t-h)*s,e=0>p?u-i:i+u)),e>u?(n>e-u?e=u+n:e-u>a&&(e=u+a),t=t>h?h+(e-u)/s:h-(e-u)/s):u>e&&(n>u-e?e=u-n:u-e>a&&(e=u-a),t=t>h?h+(u-e)/s:h-(u-e)/s),0>e?(u-=e,e=0):e>U&&(u-=e-U,e=U),0>t?(h-=t,t=0):t>q&&(h-=t-q,t=q),d(r(u,h,e,t))}function a(e){return 0>e[0]&&(e[0]=0),0>e[1]&&(e[1]=0),e[0]>U&&(e[0]=U),e[1]>q&&(e[1]=q),[Math.round(e[0]),Math.round(e[1])]}function r(e,t,i,o){var s=e,n=i,a=t,r=o;return e>i&&(s=i,n=e),t>o&&(a=o,r=t),[s,a,n,r]}function l(){var e,t=f-u,i=g-h;return G&&Math.abs(t)>G&&(f=t>0?u+G:u-G),X&&Math.abs(i)>X&&(g=i>0?h+X:h-X),et/it&&et/it>Math.abs(i)&&(g=i>0?h+et/it:h-et/it),Z/tt&&Z/tt>Math.abs(t)&&(f=t>0?u+Z/tt:u-Z/tt),0>u&&(f-=u,u-=u),0>h&&(g-=h,h-=h),0>f&&(u-=f,f-=f),0>g&&(h-=g,g-=g),f>U&&(e=f-U,u-=e,f-=e),g>q&&(e=g-q,h-=e,g-=e),u>U&&(e=u-q,g-=e,h-=e),h>q&&(e=h-q,g-=e,h-=e),d(r(u,h,f,g))}function d(e){return{x:e[0],y:e[1],x2:e[2],y2:e[3],w:e[2]-e[0],h:e[3]-e[1]}}var c,p,u=0,h=0,f=0,g=0;return{flipCoords:r,setPressed:e,setCurrent:t,getOffset:i,moveOffset:o,getCorner:s,getFixed:n}}(),ut=function(){function t(e,t){f.left.css({height:o(t)}),f.right.css({height:o(t)})}function i(){return s(pt.getFixed())}function s(e){f.top.css({left:o(e.x),width:o(e.w),height:o(e.y)}),f.bottom.css({top:o(e.y2),left:o(e.x),width:o(e.w),height:o(q-e.y2)}),f.right.css({left:o(e.x2),width:o(U-e.x2)}),f.left.css({width:o(e.x)})}function n(){return e("<div />").css({position:"absolute",backgroundColor:A.shadeColor||A.bgColor}).appendTo(h)}function a(){u||(u=!0,h.insertBefore(W),i(),ht.setBgOpacity(1,0,1),z.hide(),r(A.shadeColor||A.bgColor,1),ht.isAwake()?d(A.bgOpacity,1):d(1,1))}function r(e,t){F(p(),e,t)}function l(){u&&(h.remove(),z.show(),u=!1,ht.isAwake()?ht.setBgOpacity(A.bgOpacity,1,1):(ht.setBgOpacity(1,1,1),ht.disableHandles()),F(Y,0,1))}function d(e,t){u&&(A.bgFade&&!t?h.animate({opacity:1-e},{queue:!1,duration:A.fadeTime}):h.css({opacity:1-e}))}function c(){A.shade?a():l(),ht.isAwake()&&d(A.bgOpacity)}function p(){return h.children()}var u=!1,h=e("<div />").css({position:"absolute",zIndex:240,opacity:0}),f={top:n(),left:n().height(q),right:n().height(q),bottom:n()};return{update:i,updateRaw:s,getShades:p,setBgColor:r,enable:a,disable:l,resize:t,refresh:c,opacity:d}}(),ht=function(){function t(t){var i=e("<div />").css({position:"absolute",opacity:A.borderOpacity}).addClass(s(t));return J.append(i),i}function i(t,i){var o=e("<div />").mousedown(h(t)).css({cursor:t+"-resize",position:"absolute",zIndex:i}).addClass("ord-"+t);return ct.support&&o.bind("touchstart.jcrop",ct.createDragger(t)),K.append(o),o}function n(e){var t=A.handleSize,o=i(e,P++).css({opacity:A.handleOpacity}).addClass(s("handle"));return t&&o.width(t).height(t),o}function a(e){return i(e,P++).addClass("jcrop-dragbar")}function r(e){var t;for(t=0;e.length>t;t++)T[e[t]]=a(e[t])}function l(e){var i,o;for(o=0;e.length>o;o++){switch(e[o]){case"n":i="hline";break;case"s":i="hline bottom";break;case"e":i="vline right";break;case"w":i="vline"}D[e[o]]=t(i)}}function d(e){var t;for(t=0;e.length>t;t++)$[e[t]]=n(e[t])}function c(e,t){A.shade||z.css({top:o(-t),left:o(-e)}),Q.css({top:o(t),left:o(e)})}function p(e,t){Q.width(Math.round(e)).height(Math.round(t))}function u(){var e=pt.getFixed();pt.setPressed([e.x,e.y]),pt.setCurrent([e.x2,e.y2]),f()}function f(e){return S?m(e):void 0}function m(e){var t=pt.getFixed();p(t.w,t.h),c(t.x,t.y),A.shade&&ut.updateRaw(t),S||b(),e?A.onSelect.call(mt,g(t)):A.onChange.call(mt,g(t))}function v(e,t,i){(S||t)&&(A.bgFade&&!i?W.animate({opacity:e},{queue:!1,duration:A.fadeTime}):W.css("opacity",e))}function b(){Q.show(),A.shade?ut.opacity(dt):v(dt,!0),S=!0}function y(){C(),Q.hide(),A.shade?ut.opacity(1):v(1),S=!1,A.onRelease.call(mt)}function _(){I&&K.show()}function w(){return I=!0,A.allowResize?(K.show(),!0):void 0}function C(){I=!1,K.hide()}function j(e){e?(st=!0,C()):(st=!1,w())}function x(){j(!1),u()}var S,P=370,D={},$={},T={},I=!1;A.dragEdges&&e.isArray(A.createDragbars)&&r(A.createDragbars),e.isArray(A.createHandles)&&d(A.createHandles),A.drawBorders&&e.isArray(A.createBorders)&&l(A.createBorders),e(document).bind("touchstart.jcrop-ios",function(t){e(t.currentTarget).hasClass("jcrop-tracker")&&t.stopPropagation()});var F=k().mousedown(h("move")).css({cursor:"move",position:"absolute",zIndex:360});return ct.support&&F.bind("touchstart.jcrop",ct.createDragger("move")),J.append(F),C(),{updateVisible:f,update:m,release:y,refresh:u,isAwake:function(){return S},setCursor:function(e){F.css("cursor",e)},enableHandles:w,enableOnly:function(){I=!0},showHandles:_,disableHandles:C,animMode:j,setBgOpacity:v,done:x}}(),ft=function(){function t(t){rt.css({zIndex:450}),t?e(document).bind("touchmove.jcrop",a).bind("touchend.jcrop",l):u&&e(document).bind("mousemove.jcrop",o).bind("mouseup.jcrop",s)}function i(){rt.css({zIndex:290}),e(document).unbind(".jcrop")
}function o(e){return c(r(e)),!1}function s(e){return e.preventDefault(),e.stopPropagation(),ot&&(ot=!1,p(r(e)),ht.isAwake()&&A.onSelect.call(mt,g(pt.getFixed())),i(),c=function(){},p=function(){}),!1}function n(e,i,o){return ot=!0,c=e,p=i,t(o),!1}function a(e){return c(r(ct.cfilter(e))),!1}function l(e){return s(ct.cfilter(e))}function d(e){rt.css("cursor",e)}var c=function(){},p=function(){},u=A.trackDocument;return u||rt.mousemove(o).mouseup(s).mouseout(s),W.before(rt),{activateHandlers:n,setCursor:d}}(),gt=function(){function t(){A.keySupport&&(n.show(),n.focus())}function i(){n.hide()}function o(e,t,i){A.allowMove&&(pt.moveOffset([t,i]),ht.updateVisible(!0)),e.preventDefault(),e.stopPropagation()}function s(e){if(e.ctrlKey||e.metaKey)return!0;nt=e.shiftKey?!0:!1;var t=nt?10:1;switch(e.keyCode){case 37:o(e,-t,0);break;case 39:o(e,t,0);break;case 38:o(e,0,-t);break;case 40:o(e,0,t);break;case 27:A.allowSelect&&ht.release();break;case 9:return!0}return!1}var n=e('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),a=e("<div />").css({position:"absolute",overflow:"hidden"}).append(n);return A.keySupport&&(n.keydown(s).blur(i),B||!A.fixedSupport?(n.css({position:"absolute",left:"-20px"}),a.append(n).insertBefore(W)):n.insertBefore(W)),{watchKeys:t}}();ct.support&&rt.bind("touchstart.jcrop",ct.newSelection),K.hide(),E(!0);var mt={setImage:I,animateTo:_,setSelect:w,setOptions:S,tellSelect:j,tellScaled:x,setClass:y,disable:P,enable:D,cancel:$,release:ht.release,destroy:T,focus:gt.watchKeys,getBounds:function(){return[U*tt,q*it]},getWidgetSize:function(){return[U,q]},getScaleFactor:function(){return[tt,it]},getOptions:function(){return A},ui:{holder:Y,selection:Q}};return M&&Y.bind("selectstart",function(){return!1}),H.data("Jcrop",mt),mt},e.fn.Jcrop=function(t,i){var o;return this.each(function(){if(e(this).data("Jcrop")){if("api"===t)return e(this).data("Jcrop");e(this).data("Jcrop").setOptions(t)}else"IMG"==this.tagName?e.Jcrop.Loader(this,function(){e(this).css({display:"block",visibility:"hidden"}),o=e.Jcrop(this,t),e.isFunction(i)&&i.call(o)}):(e(this).css({display:"block",visibility:"hidden"}),o=e.Jcrop(this,t),e.isFunction(i)&&i.call(o))}),this},e.Jcrop.Loader=function(t,i,o){function s(){a.complete?(n.unbind(".jcloader"),e.isFunction(i)&&i.call(a)):window.setTimeout(s,50)}var n=e(t),a=n[0];n.bind("load.jcloader",s).bind("error.jcloader",function(){n.unbind(".jcloader"),e.isFunction(o)&&o.call(a)}),a.complete&&e.isFunction(i)&&(n.unbind(".jcloader"),i.call(a))},e.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),function(e){new odesk.Class("odesk.ContactContractor","odesk.AbstractWidget",{options:{dialog:{title:"Invite Freelancer to Discuss Job",dialogClass:"jsInviteContractorDialog",autoOpen:!1,modal:!0,width:740,resizable:!1,draggable:!1},templateName:"interviewForm",errorTemplateName:"interviewFormError",verifiedUser:odesk.pageConfig.emailVerified,isInviteInterviewAllowed:odesk.pageConfig.isInviteInterviewAllowed,useDialog:!0,useAjax:!0,regParam:RegExp("[?&]inviteOverlay=([0-9;]+)","gi"),teamSelectorWidgetContainer:"#jsTeamSelector",teamSelector:"#jsTeamSelector select",contractorField:"#jsContractor",originField:"#jsOrigin",jobField:"#jsOpening",msgField:"#jsMessage",buttonSelector:".jsContactContractor",buttonMultiSelector:".jsMultipleInterview:not(.isDisabled)",topErrorMessage:".jsTopMsgError",formSelector:"#jsInviteContractorForm",submitInviteContractorButton:"#jsSubmitInviteContrator",cancelInviteContractorButton:"#jsCancelInviteContractor",saveAndPostJob:".jsSaveAndPostJob",teamDialog:"#jsSelectTeamForOfferDialog",offerLink:"#jsMakeOfferLink",offerCancel:"#jsMakeOfferCancel",offerProceed:"#jsMakeOfferProceed",epitomeLink:".jsEpitome",lockedApplicants:{},aclList:[],formErrors:[],jobsApplicants:{},jobs:{},contractorsInfoMini:[],contractors:[],companyId:"",isMltEnabled:!0},model:{companyIsChanged:!1,defaultJobKey:""},companySelector:{flavor:odesk.AuthUser.Flavors.recruiter,canBind:!0},init:function(t,i,o){var s=this;if(s.name=t,s.$element=e(i),"d"!==s.getCompanyReference().charAt(0)){if(s.companySelector.selection={reference:s.getCompanyReference()},e.extend(s.options,o),e.extend(s.events,odesk.events.makeMap(s.name,["sendInterview"])),s._registerWidgets(),s._addEvents(),s.options.useDialog){s.$list=s.$element,s.$element=e("<div></div>");var n=s.options.regParam.exec(s._getQueryString());if(null!==n&&n[1]!==void 0){var a=s._getParametersFromUrl(s._getQueryString(),"jobKey");""!==a&&(a=decodeURI(a),s.setDefaultJob(a));var r=odesk.env.CONSOLE_ROOT+"e/"+s.getCompanyReference()+"/applications/new?contractor="+n[1];s._openContactDialog(r);var l=s._getParametersFromUrl(s._getQueryString(),"op_recno");""!==l&&s._sendEmailAfterJobPost(l)}}else s.options.$form=s.$element.find(s.options.formSelector),s._setupValidation(),s._addFormEvent();var d=e(document.body);(d.hasClass("F2416_MoreLikeThis-TreatmentOld")||d.hasClass("F2416_MoreLikeThis-TreatmentNew"))&&new odesk.InviteInterviewSubmitLogging}},_getQueryString:function(){return window.location.href},setDefaultJob:function(e){return this.model.defaultJobKey=e||"",this},_registerWidgets:function(){var t=this;t.options.$teamSelectorWidget=t.options.useDialog?e('<div id="jsTeamSelector" class="oFieldValue"></div>'):e(t.options.teamSelectorWidgetContainer),this.registerWidget({teamSelector:new odesk.CustomSelector("teamSelectorWidget",t.options.$teamSelectorWidget,{includeAllOption:!1,noItemsText:""}),interviewOverlayEventLogging:new odesk.InterviewOverlayEventLogging({location:t.options.location,modal:t.options.useAjax})}),this.widgets.teamSelector.$select.addClass("oFormMed"),t.options.$teamSelectorWidget.find("select").size()&&odesk.AuthServices.getAuthUserAndRoles(function(e){t.model.company=e.getCompanyByReference(t.getCompanyReference()),t.model.company.filterTeams(e,t.companySelector.flavor),t.model.teams=[{id:"",name:"-- Choose Team --"}];for(var i=e.getVisibleTeams(t.model.company),o=0;i.length>o;o++){var s=i[o];t.model.teams.push({id:s.reference,name:s.name})}this.widgets.teamSelector.populate(t.model.teams)}.bind(this))},_addEvents:function(){var t=this;t.options.useDialog&&(t.$element.on("click",t.options.buttonMultiSelector,function(i){if(t.options.verifiedUser||t.options.isInviteInterviewAllowed){if(i.preventDefault(),e("body").hasClass("JP13_PRIVATE_INVITES-Treatment")){var o=[];return t.$list.find(".jsDevContact:checked").each(function(){o.push(e(this).parents(".oContractorTile").attr("data-un"))}),location.href="/e/jobs/invite/"+o.join(","),void 0}var s=e(this).attr("rel"),n=[];t.$list.find(".jsDevContact:checked").each(function(){n.push(e(this).val())}),s+=n.join(";"),t._openContactDialog(s)}else t._pleaseVerify(i)}),t.$element.on("click",t.options.buttonSelector,function(i){if(t.options.verifiedUser||t.options.isInviteInterviewAllowed){var o=e(this).attr("href");t._openContactDialog(o),i.preventDefault()}else t._pleaseVerify(i)}))},_pleaseVerify:function(e){e.preventDefault(),window.location.href="/signup/please-verify/?ba=contact&redirect_url="+encodeURIComponent(window.location.href)},_openContactDialog:function(e){var t=this;odesk.loading.show("Loading...",!0),odesk.ajax({url:e,type:"get",dataType:"json",rawValues:[-1],success:function(e){e.error?(""!==e.redirect&&(window.location.href=e.redirect),""!==e.message&&(odesk.loading.hide(),new odesk.Showbox({type:"error",title:"Error",message:e.message,timeout:5e3}).show())):(odesk.loading.hide(),t.options.jobsApplicants={},t.widgets.interviewOverlayEventLogging.setAtsData(e),t.render(e),t._openDialog())},error:function(){odesk.loading.hide()}})},render:function(t){var i=this;e.extend(i.options,t),e.template(i.options.templateName,odesk.templates[i.options.templateName]);var o=e.tmpl(i.options.templateName,i.options);i.$element.html(o),i.options.$form=i.$element.find(i.options.formSelector),i.$element.find(i.options.teamSelectorWidgetContainer).append(i.options.$teamSelectorWidget.html()),i.options.invitationSent=!1,i.options.invitationError=!1,i._addFormEvent(),i._setupValidation(),i._selectDefaultJob()},_selectDefaultJob:function(){this.model.defaultJobKey&&this.options.$form.find(this.options.jobField+' option[data-key="'+this.model.defaultJobKey+'"]').prop("selected",!0),this.widgets.interviewOverlayEventLogging.setAtsData({defaultJob:this.options.$form.find(this.options.jobField).val()})},_openDialog:function(){var t=this;t.options.dialog.title="Invite Freelancer"+(t.options.contractors.length>1?"s":"")+" to Discuss Job",t.$element.dialog(t.options.dialog),t.$element.dialog("open"),t.options.$form.find(t.options.cancelInviteContractorButton).click(function(e){t.$element.dialog("close"),e.preventDefault()}),e("div.ui-widget-overlay:last").bind("click",function(e){t.$element.dialog("close"),e.preventDefault()}),t.options.$form.find(t.options.originField).val(window.location.href.replace(t.options.regParam,"")),t.widgets.interviewOverlayEventLogging.logImpressionEvents("invitation_overlay",odesk.logging.logAtsEventToProxy)},_addFormEvent:function(){var t=this,i=this.$element;if(i.find(t.options.saveAndPostJob).click(function(i){var o=e(this).attr("href");t.options.$form.attr("action",o),t.options.$form.validate().cancelSubmit=!0,t.options.$form.submit(),i.preventDefault()}),i.find(t.options.jobField).change(function(){var i=t.options.$form.find("#jsOpening option:selected").data("key");e(this).parent().find(".oFormError").remove(),t._getApplicantsForJob(i)}),t.options.useAjax?t.options.$form.find(t.options.submitInviteContractorButton).click(function(e){t._ajaxSubmit(),e.preventDefault()}):t.options.$form.find(t.options.submitInviteContractorButton).click(function(e){t._isValid()||e.preventDefault()}),i.find(t.options.teamSelector).length){var o=i.find(t.options.teamDialog);o.dialog({title:"Which team do you want to hire in?",autoOpen:!1,modal:!0,resizable:!1,width:"auto"}),i.find(t.options.offerLink).click(function(e){2===o.find(t.options.teamSelector+" option").length?(window.location.replace(odesk.env.CONSOLE_ROOT+"e/"+t.getCompanyReference()+"/offers/new?contractor="+t.getContractorReferences()+"&team="+o.find(t.options.teamSelector+" option").last().val()),odesk.loading.show("Sending...",!0)):o.dialog("open"),e.preventDefault()}),o.find(t.options.offerCancel).click(function(e){o.dialog("close"),e.preventDefault()}),o.find(t.options.offerProceed).click(function(e){""!==o.find(t.options.teamSelector).val()&&(window.location.replace(odesk.env.CONSOLE_ROOT+"e/"+t.getCompanyReference()+"/offers/new?team="+o.find(t.options.teamSelector).val()+"&contractor="+t.getContractorReferences()),odesk.loading.show("Sending...",!0)),e.preventDefault()})}},getContractorReferences:function(){return e(this.options.contractorField).val()},getCompanyReference:function(){return e.cookie(odesk.env.COOKIE_PREFIX+"company_last_accessed")},_ajaxSubmit:function(){var t=this;if(t._isValid()){var i={contractor_key:t.options.$form.find("#jsContractorKeys").val(),job_key:t.options.$form.find("#jsOpening option:selected").data("key")};odesk.loading.show("Sending...",!0),t.widgets.interviewOverlayEventLogging.logSendInvitationEvent(i),t.widgets.interviewOverlayEventLogging.setSelectedJob(i.job_key),odesk.ajax({url:t.options.$form.attr("action"),type:t.options.$form.attr("method"),dataType:"json",data:t.options.$form.serialize(),rawValues:[-1],success:function(o,s,n){if(n.getResponseHeader("please-verify")&&(window.location.href="/signup/please-verify/?ba=contact_more"),odesk.loading.hide(),t.ctx.mediator.publish(t.events.sendInterview,e.extend(i,{success:o.success})),o.formErrors===void 0){var a=e('<div class="jsContactContractorWidget">'+o.result+"</div>");t.options.mlt=a.find(".jsSimilarContractors").length>0&&t.options.isMltEnabled,t.options.invitationSent=!0,a.find(".jsMsgError").length||a.find(".jsMsgWarning").length?(t.options.invitationError=!0,t.$element.html(a),t.widgets.interviewOverlayEventLogging.logErrorEvent(a.find(".jsMsgWarning").text()||a.find(".jsMsgError").text(),"invitation_confirmation")):t.options.mlt?(t.$element.html(a),t.widgets.interviewOverlayEventLogging.logSuccessEvent(i,!0)):(t.$element.dialog("close"),odesk.loading.show("Invitation Sent"),t.widgets.interviewOverlayEventLogging.logSuccessEvent(i,!1),setTimeout(function(){odesk.loading.hide()},3e3)),t.options.mlt&&e(t.options.epitomeLink).each(function(){new odesk.Epitome(this)})}else t.render(o)},error:function(){odesk.loading.hide(),new odesk.Showbox({type:"error",title:"Error",message:"An error occurred while processing your request.",timeout:5e3}).show(),t.ctx.mediator.publish(t.events.sendInterview,e.extend(i,{success:!1}))}})}},_getApplicantsForJob:function(e){var t=this,i=odesk.env.OCA_ROOT+"hr/v2/jobs/"+e+"/applications/jar/search.json?a_status=3";t.options.jobsApplicants[e]===void 0?odesk.ajax({url:i,type:"get",dataType:"json",data:[],success:function(i){0!==parseInt(i.search.tot,10)&&(t.options.jobsApplicants[e]=i.search.doc.record instanceof Array?i.search.doc.record:[i.search.doc.record]),t._checkContractorNotInvited()},error:function(){}}):t._checkContractorNotInvited()},_setupValidation:function(){var e=this;e.options.$form.validate({debug:!1,errorElement:"div",focusInvalid:!1,errorClass:"errors",labelErrorClass:"jsValidation",focusCleanup:!0,showErrors:function(){e.options.$form.find(".jsValidation").remove(),this.defaultShowErrors(),e.options.$form.find(".oFormMsg").addClass("oFormError oFormErrorBottom")},errorPlacement:function(e,t){e.appendTo(t.parent())},invalidHandler:function(){e.options.$form.find("div.oMsgError").show()},rules:{opening:{required:!0},message:{required:!0}}})},_checkContractorNotInvited:function(){var e=this,t=e.$element.find(e.options.jobField),i=t.find("option:selected").data("key"),o=!0,s=[];t.parent().find(".oFormError").remove();for(var n=0;e.options.contractors.length>n;n++)for(var a in e.options.jobsApplicants[i])if(e.options.jobsApplicants[i][a].contractor_ref==e.options.contractors[n].dev_recno){s.push(e.options.contractors[n].dev_short_name),o=!1;break}if(!o){var r="You have already sent "+s.join(", ")+" an invitation for this job. "+'<a class="jsSaveAndPostJob oMute" href="/e/'+e.options.companyId+'/applications/save">Post a new job</a>';t.after('<div class="oFormMsg oFormError oFormErrorBottom">'+r+"</div>"),e.widgets.interviewOverlayEventLogging.logErrorEvent(r)}return this.options.$form.find(this.options.submitInviteContractorButton).toggleClass("isDisabled",!o),o},_isValid:function(){var t=this,i=t.options.$form.find(t.options.jobField).length>0,o=!0,s={};i?o=t._checkContractorNotInvited():s.opening={isEmpty:"Select or post a job so that "+(t.options.contractors.length>1?"contractors":t.options.contractors[0].dev_short_name)+" can apply."},e.template(t.options.errorTemplateName,odesk.templates[t.options.errorTemplateName]);var n=e.tmpl(t.options.errorTemplateName,{formErrors:s}),a=t.$element.find(t.options.topErrorMessage).html(n);return i||a.show(),i&&o&&t.options.$form.valid()},setMltEnabled:function(e){this.options.isMltEnabled=Boolean(e)},_getParametersFromUrl:function(e,t){var i=RegExp("[?&]"+t+"=([^&]+)(&|$)"),o=e.match(i);return o?o[1]:""},_sendEmailAfterJobPost:function(e){odesk.ajax({type:"get",url:"/send-mail/"+e,success:function(){return!0}})},setLocation:function(e){this.widgets.interviewOverlayEventLogging.setLocation(e)}}),e.extend(!0,odesk.ContactContractor.prototype,odesk.mediator)}(jQuery),odesk.templates.interviewFormError="<ul>{{each(i, error) formErrors}}<li>${error.isEmpty}</li>{{/each}}{{if formErrors.length == 0}}<li>Please fix the errors below</li>{{/if}}</ul>",odesk.templates.interviewForm='<div class="jsContactContractorWidget"><div class="jsTopMsgError oMsg oMsgError {{if formErrors.length == 0}}oHidden{{/if}}"><ul>{{each(i, error) formErrors}}<li>${error.isEmpty}</li>{{/each}}{{if formErrors.length == 0}}<li>Please fix the errors below</li>{{/if}}</ul></div>{{if !useDialog}}<header class="oFormHeader"><h1>Invite Freelancer{{if contractors.length > 1}}s{{/if}} to Discuss Job</h1></header>{{/if}}<form method="post" action="/e/${companyId}/applications/new?contractor=${contractorsId}" enctype="multipart/form-data" class="oInviteContractorForm" id="jsInviteContractorForm" name="inviteInterview" novalidate="novalidate"><div class="oFormField oReadOnly"><label class="oLabel">Freelancer{{if contractors.length > 1}}s{{/if}}</label><div class="oFieldValue oContractorList">{{each(i, infoMini) contractorsInfoMini}}{{html infoMini}}{{/each}}</div></div><input type="hidden" id="jsContractor" value="${contractorsId}" name="contractor"><input type="hidden" id="jsContractorKeys" value="${contractorsKey}" name="contractorsKey"><input type="hidden" id="jsCompany" value="${teamRef}" name="company"><input type="hidden" id="jsOrigin" value="" name="origin"><div class="oFormField oReadOnly">{{if nbJobs > 0}}<div id="oFormField-opening" class="oFormField oFormField-opening"><label for="opening" id="oLabel-opening" class="oLabel">Job Posting</label><select class="oFormLrg oFormMed" id="jsOpening" name="opening">{{each(i, job) jobs}}<option label="${job.name}" value="${job.key}" data-key="${job.key}">${job.name}</option>{{/each}}</select></div><div class="oHint">To invite {{if contractors.length > 1}}these contractors{{else}}${contractors[0].dev_short_name}{{/if}} you must select or <a href="/e/${companyId}/applications/save" class="jsSaveAndPostJob">post a job</a>.</div>{{else}}<div class="oFormField oReadOnly"><label class="oLabel">Job Posting</label><div class="oFieldValue"><a class="jsSaveAndPostJob" href="/e/${companyId}/applications/save">Post a Job</a></div><div class="oHint">Post a Job so that {{if contractors.length > 1}}these freelancers{{else}}${contractors[0].dev_short_name}{{/if}} can apply.</div></div>{{/if}}</div><div id="oFormField-message" class="oFormField oFormField-message"><label for="message" id="oLabel-message" class="oLabel">Message</label><textarea cols="80" rows="24" id="jsMessage" class="oFormLrg" name="message">${message}</textarea></div><footer class="oFormFooter">{{if aclList.length > 0}}<div class="oFieldValue oFormNote"><b>Note: </b>{{if aclList.length > 1}}Some of these freelancers are associated with agencies. Your message will be sent to their managers.{{else}}${aclList[0]} is associated with an agency. Your message will be sent to the agency manager.{{/if}}</div>{{/if}}<div class="oFieldValue"><input type="submit" name="submitButton" value="Send Invitation" id="jsSubmitInviteContrator" class="oBtn oBtnPrimary"><a class="oBtn oBtnCancel" id="jsCancelInviteContractor" href="/contractors/">Cancel</a></div>{{if hiringRight}}{{if contractors.length == 1}}<div class="oFieldValue oFormNote">Already know this freelancer? <a id="jsMakeOfferLink" href="#">Hire now</a>.</div><div id="jsSelectTeamForOfferDialog" class="oSelectTeamForOfferDialog oHidden"><div id="jsTeamSelector" class="oSelector"><label>Team:</label></div><div class="oRight oFormMed"><a href="#" id="jsMakeOfferProceed" class="oBtn oBtnPrimary">Continue</a><a href="#" id="jsMakeOfferCancel" class="oBtn oBtnCancel">Cancel</a></div></div>{{/if}}{{/if}}</footer></form></div>';